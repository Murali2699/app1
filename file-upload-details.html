<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta content="width=device-width, initial-scale=1.0" name="viewport">
      <title>Payment Automation Dashboard</title>
      <meta content="" name="description">
      <meta content="" name="keywords">
      
      <link href="assets/img/tn_logo.png" rel="icon">
      <link href="assets/img/tn_logo.png" rel="apple-touch-icon">
      <link href="https:
      <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
      <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
       
      <link href="assets/css/style.css" rel="stylesheet">
      <script src="assets/components/official_header.js" type="text/javascript" defer></script>
      <official-header-component></official-header-component>
      <div id="preloader"></div>
      <main id="main" class="main">
         
         <section>
            <div class="container-fluid">
               <div class="card mb-1">
                  <form id="formFilters" method="post">
                     <div class="card-body pb-0 pt-2">
                        <div class="accordion" id="accordionExample">
                           <div class="accordion-item">
                              <h2 class="accordion-header">
                                 <button id="btnfilter" style="    background: linear-gradient(to right, rgb(44 43 88), rgb(34 25 111)) !important;
                                    color: #fff !important;" class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                 <i class="bi bi-funnel"></i>  <span class="px-2">File Uploading Status Filter</span>
                                 </button>
                              </h2>
                              <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                                 <div class="accordion-body w-100">
                                    <div class="row mb-2 boxflex">
                                       
                                       <div class="col-md-3">
                                          <label for="ddl_scheme_cate" class="form-label fw-bold">Scheme category</label>
                                          <select class="form-select" id="ddl_scheme_cate" name="ddl_scheme_cate">
                                             <option value="">--All--</option>
                                             <option value="">Scheme category 1</option>
                                             <option value="">Scheme category 2</option>
                                          </select>
                                       </div>
                                          <label for="ddl_scheme_code" class="form-label fw-bold">Scheme Code</label>
                                          <select class="form-select" id="ddl_scheme_code" name="ddl_scheme_code">
                                             <option value="">--Select--</option>
                                             <option value="0212">0212</option>
                                             <option value="0209">0209</option>
                                             <option value="0219">0219</option>
                                             <option value="0100">0100</option>
                                             <option value="0207">0207</option>
                                             <option value="0221">0221</option>
                                             <option value="0208">0208</option>
                                             <option value="0001">0001</option>
                                             <option value="0220">0220</option>
                                             <option value="0211">0211</option>
                                             <option value="0218">0218</option>
                                             <option value="0213">0213</option>
                                             <option value="0206">0206</option>
                                             <option value="0210">0210</option>
                                          <label for="ddl_scheme_name" class="form-label fw-bold">Scheme Name</label>
                                          <select class="form-select" id="ddl_scheme_name" name="ddl_scheme_name">
                                          <label for="ddl_sub_scheme" class="form-label fw-bold">Sub Scheme Name</label>
                                          <select class="form-select" id="ddl_sub_scheme" name="ddl_sub_scheme">
                                          <label for="ddl_department" class="form-label fw-bold mt-3">Department</label>
                                          <select class="form-select" id="ddl_department" name="ddl_department">
                                          <label for="ddl_sub_department" class="form-label fw-bold mt-3">Sub Department</label>
                                          <select class="form-select" id="ddl_sub_department" name="ddl_sub_department">
                                    </div>
                                    

                                    <hr>
                                        
                      
                                        <div class="col-md" id="from_date_col">
                                            <label for="from_date" class="form-label fw-bold mt-3">Upload File From Date</label>
                                            <input type="date" name="from_date" id="from_date" class="form-control form-control-sm">
                                          </div>
                                          <div class="col-md" id="to_date_col">
                                            <label for="to_date" class="form-label fw-bold mt-3">Upload File To Date</label>
                                            <input type="date" name="to_date" id="to_date" class="form-control form-control-sm">
                                      </div>
                                       <button class="btn btn-success float-end cbtn col-md-2" type="submit"><i class="bi bi-pencil-square"></i> Submit</button>
                                 </div>
                                 <input type="hidden" name="approvelpayment" id="approvelpayment">
                              </div>
                           </div>
                        </div>
                     </div>
                  </form>
               </div>
               <div class="card mb-1 mt-4" id="div_report_tbl">
                  <div class="card-body">
                     
                     <div class="col-lg-12 mt-2 clear-both" style="    clear: both;">
                        <div class="table-responsive cus-grid">
                            
                           <table class="table table-striped w-100 no-footer dataTable mt-3" id="tblUploadfileList" aria-describedby="tblUploadfileList_info">
                              <thead>
                                 <tr>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="S.No: activate to sort column descending" aria-sort="ascending">S.No</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="Scheme category: activate to sort column descending" aria-sort="ascending">Scheme category</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="scheme name: activate to sort column descending" aria-sort="ascending">scheme name </th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="sub scheme name: activate to sort column descending" aria-sort="ascending">sub scheme name </th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="district: activate to sort column descending" aria-sort="ascending">File Name</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Initiate Date & Time</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Available Records</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Duplicate Beneficiaries Records</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Invalid Aadhaar Records</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Invalid Records</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Invalid Account Records</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">valid Records</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="received date: activate to sort column descending" aria-sort="ascending">Completed Date & Time</th>
                                    <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblUploadfileList" aria-label="status: activate to sort column descending" aria-sort="ascending"> Status </th>
                                 </tr>                                 
                              </thead>
                              <tbody>
                              </tbody>
                           </table>
                  </div>
               
            </div>
         </section>
      </main>
      <footer id="footer" class="footer">
         <div class="copyright">
            &copy; Copyright <strong><span>TNeGA</span></strong>. All Rights Reserved
         </div>
         <div class="credits">
            Designed & Developed by <a href="https:
      </footer>
      <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script type="text/javascript" src="assets/vendor/jquery-validate/js/jquery.validate.min.js"></script>
    
    <script src="assets/vendor/datatable/jquery.dataTables.min.js"></script>
    <script src="assets/vendor/datatable/dataTables.bootstrap5.min.js"></script>
    <script type="text/javascript" src="assets/vendor/datatable/js/dataTables.js"></script>
    <script type="text/javascript" src="assets/vendor/datatable/js/dataTables.bootstrap4.js"></script>
    <script src="assets/vendor/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/jszip.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/pdfmake.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/vfs_fonts.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.colVis.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert2.all.min.js"></script>
    <script src="assets/vendor/toggle/bootstrap-toggle.min.js"></script>
    <script src="assets/js/global.js"></script>
    <script src="assets/js/alpinejs_3_10_2.min.js" defer></script>
    <script src="assets/lang/reports.js"></script>
    <script src='https:
    <script src="assets/scripts/xlsx.full.min.js"></script>
    <script src="assets/scripts/jspdf.umd.min.js"></script>
    <script src="https:
    <script src="assets/js/base64tojson.js"></script>
    <script src="assets/js/crypto-js.js"></script>
    <script src="assets/js/aes.js"></script>
  
    <script type="text/javascript" src="assets/vendor/toastr/toastr.min.js"></script>
    <script src="assets/vendor/encryption/crypto-js.min.js"></script>
    <script src="assets/vendor/encryption/Encryption.js"></script>
 
 <script type="text/javascript">
var url = window.location.href;
var page_url = url.split('/');
var page = page_url[4];
var userDataString = getCookie('payment_official');
userDataString = JSON.parse(userDataString);
$(document).ready(function () {
  $(document).on({
        
         ajaxStop: function () {
           $('#preloader').hide();
          
         }
       });
  $('.official').each(function (i, obj) {
    var href = obj.getAttribute("href");
    if (href == page) {
      obj.classList.add('active');
    } else {
      obj.classList.remove('active');
    }
  });
  var userDataString = getCookie('payment_official');
  if (!userDataString) {
    $('#preloader').show();
    window.location.href = "login.html";
  }
  userDataString = JSON.parse(userDataString);
  $('#official_username').text(userDataString['first_name']);
  $('#UserID').val(userDataString['user_id']);
  window.loginUser_id = userDataString['user_id'];
  reloID = userDataString['role_id'];
    roleBasedPageAllow(loginUser_id,reloID);
  getSchemeCategory();
  getDistricts();
  $('#ddl_sub_scheme').on('change',function(){      
   $('#ddl_department').empty();
   $('#ddl_sub_department').empty();
   $('#ddl_department').append($('<option>', {value: "",text: "--ALL--"}));
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--ALL--"}));
     $.ajax({
       url: APIURL +'schem_filter',
       type: "POST",
       headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
       data: {case: "get_department",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),sub_scheme_name:$('#ddl_sub_scheme').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
       success: function(response) {
        $('#preloader').hide();
           var department_code = response.data[0];
           getDepartment(department_code.department);
       },
       error: function(xhr, status, error) {
           console.log("Error:", error);
       }
     });
  $('#ddl_district').on('change', function () {
    var district_code = $('#ddl_district').val();
    $('#ddl_taluk').empty();
    $('#ddl_taluk').append('<option value="">--ALL--</option>');
    getTaluk(district_code);
});
$(document).ready(function() {
    $('[data-toggle="tooltip"]').tooltip({
        html: true, 
        title: function() {
            return $(this).data('content');
        }
    });
function getCookie(name) {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.startsWith(name + '=')) {
        return cookie.substring(name.length + 1);
      }
    return null;
function getSchemeCategory(){
    $('#ddl_scheme_name').empty();
    $('#ddl_sub_scheme').empty();
    $('#ddl_department').empty();
    $('#ddl_sub_department').empty();
    $('#ddl_scheme_name').append($('<option>', {value: "", text: "--All--"}));
    $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--All--"}));
    $('#ddl_department').append($('<option>', {value: "",text: "--All--"}));
    $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));
  $.ajax({
    url: APIURL +'schem_filter',
    type: "POST",
    headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
    data: {case: "get_scheme_category",get_column:"scheme_code",groupbycolumn:"scheme_code",user_id:loginUser_id},
    success: function(response) {
        var schemeCode = response.data;
        $('#ddl_scheme_cate').empty();
        $('#ddl_scheme_cate').append($('<option>', {
              value: "",
              text: "--All--"
          }));
        $.each(schemeCode, function (index, scheme) {
            
            if(schemeCode.length >1){
              $('#ddl_scheme_cate').append($('<option>', {
                value: scheme.scheme_category,
                text: scheme.scheme_category
            }));
            }else{
            }).prop('selected', true));
            $('#ddl_scheme_cate').trigger('change');
            }
         });
    },
    error: function(xhr, status, error) {
        console.log("Error:", error);
}
$('#ddl_scheme_cate').on('change',function(){
    $('#ddl_scheme_code').empty();
    $('#ddl_scheme_code').append($('<option>', {value: "", text: "--All--"}));
   $.ajax({
     url: APIURL +'schem_filter',
     type: "POST",
     headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
     data: {case: "get_scheme_code",get_column:"scheme_code",groupbycolumn:"scheme_code",whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
     success: function(response) {
         var schemeCode = response.data;
         $('#ddl_scheme_code').empty();
         $('#ddl_scheme_code').append($('<option>', {
               value: "",
               text: "--All--"
           }));  
              $('#ddl_scheme_code').append($('<option>', {
                value: scheme.scheme_code,
                text: scheme.scheme_code
         $('#ddl_scheme_code').trigger('change');
     },
     error: function(xhr, status, error) {
         console.log("Error:", error);
     }
   });
})
$('#ddl_scheme_code').on('change',function(){
     $('#ddl_sub_scheme').empty();
     $('#ddl_scheme_name').empty();
     $('#ddl_department').empty();
     $('#ddl_sub_department').empty();
     $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--All--"}));
     $('#ddl_scheme_name').append($('<option>', {value: "", text: "--All--"}));
     $('#ddl_department').append($('<option>', {value: "",text: "--All--"}));
     $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));
      $('#preloader').show();
   url: APIURL +'schem_filter',
   type: "POST",
   headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
   data: {case: "get_scheme",scheme_code:$('#ddl_scheme_code').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
   success: function(response) {
    $('#preloader').hide();
       var schemeCode = response.data;
       $('#ddl_scheme_name').empty();
       $('#ddl_scheme_name').append($('<option>', {
             value: "",
             text: "--All--"
         }));
       $.each(schemeCode, function (index, scheme) {
        if(schemeCode.length >1){
          $('#ddl_scheme_name').append($('<option>', {
             value: scheme.scheme_name,
             text: scheme.scheme_name
        }else{
         }).prop('selected', true));
       $('#ddl_scheme_name').trigger('change');
   },
   error: function(xhr, status, error) {
       console.log("Error:", error);
   }
 });
$('#ddl_scheme_name').on('change',function(){
   
   $('#ddl_sub_scheme').empty();
   $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--All--"}));
   $('#ddl_department').append($('<option>', {value: "",text: "--All--"}));
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));
$('#preloader').show();
   data: {case: "get_sub_scheme",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
       $('#ddl_sub_scheme').empty();
       $('#ddl_sub_scheme').append($('<option>', {
        if(schemeCode.length > 1){
          $('#ddl_sub_scheme').append($('<option>', {
             value: scheme.subscheme_name,
             text: scheme.subscheme_name
       $('#ddl_sub_scheme').trigger('change');
function getDepartment(depID){
    let scheme_cate = $('#ddl_scheme_cate').val();
$.ajax({
   url: APIURL +'get_department',
   data: {type: "department"},
       var department = response[0].data;
      if(scheme_cate == '' || scheme_cate === 0){
                  $('#ddl_department').empty();
                  $('#ddl_department').append($('<option>', {val: '', text: '--All--' }));
                  $('#ddl_payment_cycle').empty();
                  $('#ddl_payment_cycle').append($('<option>', {val: '', text: 'Scheme Based Payment Period' }));
              }
              else
              {
       $.each(department, function (index, dep) {
         if(dep.department_code==depID){
           $('#ddl_department').append($('<option>', {
             value: dep.department_code,
             text: dep.department_name
           }).attr('selected', 'selected'));
           
           $.ajax({
                 url: APIURL +'schem_filter',
                 type: "POST",
                 headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
                 data: {case: "get_sub_department",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),sub_scheme_name:$('#ddl_sub_scheme').val(),department:$('#ddl_department').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
                 success: function(response) {
                  $('#preloader').hide();
                    
                     var subdepartment_code = response.data[0];
                     get_sub_department(dep.department_code,subdepartment_code.subdepartment);
                 },
                 error: function(xhr, status, error) {
                     console.log("Error:", error);
                 }
             });
 function get_sub_department(depID,subDepID){
     
     url: APIURL +'get_department',
     data: {type: "sub_department",whereColumn:$('#ddl_scheme_cate').val(),department_code:depID},
      $('#preloader').hide();
         var department = response[0].data;
         $('#ddl_sub_department').empty();
         $('#ddl_sub_department').append($('<option>', {
           }));
         $.each(department, function (index, sub_dep) {
           if(sub_dep.sub_department_code==subDepID){
             $('#ddl_sub_department').append($('<option>', {
               value: sub_dep.sub_department_code,
               text: sub_dep.sub_department_name
           }
 }
  function getDistricts(){
      const userDataString = getCookie("payment_official");
      const userData = JSON.parse(userDataString);
      var districtID=0;
      var data=[];
      if(userData['district_code']!=0){
      districtID=userData['district_code'];
      data={ case: 'district',district_code: districtID,user_id:userData['user_id']};
      } else {
      data={ case: 'district',user_id:userData['user_id']};
      $('#ddl_taluk').empty();
      $('#ddl_taluk').append('<option value="">--All--</option>');
    $.ajax({
      url: userMasterAPIURL+'userMaster',
      method: 'POST',
      headers: {'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
      data: data,
      dataType: 'json',
      success: function (response) {
        var district = response.district;
        var districtDropdown = $("#ddl_district");
        $('#ddl_district').empty();
        $('#ddl_district').append($('<option>', {value: "",text: "--ALL--"}));
        if(districtID==0 || districtID ==undefined){
        } else {
        districtDropdown.html('<option value="'+district['district_code']+'">'+district['district_name']+'</option>');
        $('#ddl_district').trigger('change');
        var district_code= district['district_code'];
          getTaluk(district_code);
        } 
      },
      error: function () {
        console.error('Error fetching district data');
  function getTaluk(districtID){
    $('#ddl_taluk').append('<option value="">--All--</option>');
      var talukID=0;
      if(userData['taluk_code']!=0){
      talukID=userData['taluk_code'];
      data={ case: 'taluk',district_code: districtID,taluk_code: talukID,user_id:userData['user_id']};
      data={ case: 'taluk',district_code: districtID,user_id:userData['user_id']};
      url: userMasterAPIURL+'userMaster', 
      headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
        var taluk = response.taluk
        var talukDropdown = $("#ddl_taluk");
        if(talukID==0){
          talukDropdown.html('<option value="'+taluk['taluk_code']+'">'+taluk['taluk_name']+'</option>');
        $('#ddl_taluk').trigger('change');
        Swal.fire({
          icon: "error",
          title: "Service Error!",
          showConfirmButton: false,
          timer: 2000
        })
    $("#ddl_month_col").prop("disabled", true);
    $("#ddl_year_col").prop("disabled", true);
  $('#to_date').on('change', function() {
      var fromDate = $('#from_date').val();
      var toDate = $(this).val();
      if (fromDate && toDate && fromDate > toDate) {
        alert('To Date should not be earlier than From Date.');
        $(this).val('');
var formsFilter = [];
window.localStorage.removeItem('filters');
  $("#formFilters").validate({
          rules: {
            ddl_scheme_cate: {required: true},
            ddl_scheme_code: {required: true},
            ddl_scheme_name: {required: true},
            ddl_sub_scheme: {required: true},
            ddl_department: {required: true},
            ddl_sub_department: {required: true},
            from_date : {required: true},
            to_date : {required: true},
          },
          messages: {
            ddl_scheme_cate: {required: "Select the Scheme Category"},
            ddl_scheme_code: {required: "Select the Scheme Code"},
            ddl_scheme_name: {required: "Select the scheme Name"},
            ddl_sub_scheme: {required: "Select the Sub Scheme Name"},
            ddl_department: {required: "Select the Deparment"},
            ddl_sub_department: {required: "Select the Sub Deparment"},
            from_date : {required: "Select the From Date"},
            to_date : {required: "Select the To Date"},
          errorClass: "help-inline text-danger",
          errorElement: "span",
          highlight: function(element, errorClass, validClass) {
              $(element).parents('.form-group').addClass('has-error');
          unhighlight: function(element, errorClass, validClass) {
              $(element).parents('.form-group').removeClass('has-error');
              $(element).parents('.form-group').addClass('has-success');
          submitHandler: function(form,e) {
              e.preventDefault();
              
              formsFilter.length = 0;
              formsFilter = [];
              var formData = $(form).serialize();
              window.localStorage.removeItem('filters');
              window.localStorage.setItem('filters', JSON.stringify(formData));
              fileuploadStatusList();
              return false;
          }
function fileuploadStatusList(){
  var dataFilters = window.localStorage.getItem('filters');
  $('#preloader').show();
    $('#tblUploadfileList').DataTable().clear().destroy();
    $('#tblUploadfileList').DataTable({
        "aLengthMenu": [10, 25, 50,100],
        "pageLength": 50,
        "footer": true,
        "dom": 'Bfrtip',
        "buttons": [
          {
                extend: 'csv',
                text: 'CSV',
                filename: 'upload file Status',
                exportOptions: {
                    rows: ':visible', 
                    modifier: {
                        selected: null 
                    }
                }
            },
            {
                extend: 'excel',
                text: 'Excel',
                filename: 'upload file Status' 
                extend: 'pdf',
                text: 'PDF',
            }],
        "searching": true,
        "processing": true,
        "serverSide": true,
        "ajax": {
            "url": APIURL + 'upload_file_status_list',
            "type": "POST",
            "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
            "dataType": "JSON",
            "data": function (data) {
              data.fileters = dataFilters;
              data.user_id = loginUser_id;
          "beforeSend": function () {
            tblPreloaderEnable('tblUploadfileList');
          "error": function (xhr, error, thrown) {
                Swal.fire({
                    icon: "error",
                    title: 'Service Error !',
                    showConfirmButton: false,
                    timer: 2000
                });
            "dataSrc": 'data',
        "columns": [
            { "data": "S.No", render: function (data, type, row, meta) {
                return meta.row + meta.settings._iDisplayStart + 1;
            { "data": "scheme_code" },
            { "data": "scheme_name" },
            { "data": "subscheme_name" },
            { "data": "file_name" },
            { "data": "initiated_ts" },
            { "data": "available_records"},
            { "data": "duplicate_beneficiaries_records"},
            { "data": "invalid_aadhaar_records"},
            { "data": "invalid_records"},
            { "data": "ivalid_account_records"},
            { "data": "valid_records"},
            { "data": "completed_ts"},
            { "data": "upload status",
              "render": function (data, type, row, meta) {
                    let uploadStatus = ``;
                    if(row.upload_status == 'InProgress'){
                      uploadStatus = `<span class="badge bg-info" data-toggle="tooltip" data-placement="top" title="Upload completed" data-content="Date: ${row.upload_remarks}">${row.upload_status}</span>`;
                    }else if(row.upload_status == 'Pending'){
                      uploadStatus = `<span class="badge bg-waring" data-toggle="tooltip" data-placement="top" title="Upload completed" data-content="Date: ${row.upload_remarks}">${row.upload_status}</span>`;
                    }else if(row.upload_status == 'Updated'){
                      uploadStatus = `<span class="badge bg-success" data-toggle="tooltip" data-placement="top" title="Upload completed" data-content="Date: ${row.upload_remarks}">${row.upload_status}</span>`;
                    return uploadStatus;
        ],
        "aoColumnDefs": [{
          'bSortable': false,
          'aTargets': [0]
        }],
        "drawCallback": function (settings) {
        },
        "initComplete": function (settings, json) {
         $('#preloader').hide(); 
         tableRecordCount = json.recordsTotal;
    });  
function populateDropdown(dropdownId, data, fieldName) {
    const dropdown = document.getElementById(dropdownId);
    data.forEach(item => {
      const option = document.createElement('option');
      option.value = item[fieldName + '_code'];
      option.textContent = item[fieldName + '_name'];
      dropdown.appendChild(option);
  $('#selectAllCheckbox').on('change', function () {
      $('tbody :checkbox').prop('checked', $(this).prop('checked'));
  $('#selectAllCheckbox2').on('change', function () {
  $('#selectAllCheckbox3').on('change', function () {
function generateUniqueId() {
  const timestamp = new Date().getTime();
  return `${timestamp}`;
function tblPreloaderEnable(tableName){
      var processingDiv = document.getElementById(tableName+'_processing');
      var displayStatus = window.getComputedStyle(processingDiv).display;
      if (displayStatus === 'block') {
      $('#'+tableName+'_processing').html(`<div id="preloader"></div>`);
        $('#'+tableName+'_processing').text(`<div id="preloader"></div>`);
var generate_payment_enable = window.localStorage.getItem('generate_payment_enable');
var transfer_payment_enable = window.localStorage.getItem('transfer_payment_enable');
if(generate_payment_enable === 'true'){
  $('#generate_payment_real_btn').hide();
  $('#generate_payment_status').addClass('d-inline');
  $('#generate_payment_status').show();
  $('#generate_payment_disable_btn').show();
if(transfer_payment_enable === 'true'){
    $('#transfer_payment_status').addClass('d-inline');
    $('#transfer_payment_status').show();
    $('#transfer_payment_disable_btn').show();
    $('#transfer_payment_enable').hide();
$('#xlsx_btn').on('click',function(){
  var totalRecords = totalgetReportRecords;
       url: APIURL +'get_all_payment_report_list',
       data: {total_list_count:totalRecords,fileters:dataFilters,user_id:loginUser_id},
        if(response.success ==1){
            exportJsonToExcel(response.data,'payment report');
            Swal.fire({
            icon: "error",
            title: "Data Not Found !",
            showConfirmButton: false,
            timer: 2000
          })
            console.log('get report is data not found');
$('#csv_btn').on('click',function(){
            convertJsonToCsv(response.data,'payment report');
          Swal.fire({
          title: "Data Not Found !",
function exportJsonToExcel(jsonData, file_name) {
  var data = jsonData.map(obj => Object.values(obj));
  var ws = XLSX.utils.aoa_to_sheet([Object.keys(jsonData[0])].concat(data));
  var wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');
  var binaryData = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'binary' });
  var blob = new Blob([s2ab(binaryData)], { type: 'application/octet-stream' });
  saveAs(blob, file_name + '.xlsx');
  $('#preloader').hide();
function s2ab(s) {
  var buf = new ArrayBuffer(s.length);
  var view = new Uint8Array(buf);
  for (var i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;
  return buf;
function convertJsonToCsv(jsonData,filename) {
    let columns = Object.keys(jsonData[0]);
    let csvContent = [
        columns.join(','), 
        ...jsonData.map(obj => columns.map(col => obj[col]).join(',')) 
    ].join('\n');
    let blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    let link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.setAttribute('download', filename+'.csv');
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
</script>
</body>
</html>