<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta content="width=device-width, initial-scale=1.0" name="viewport">
      <title>Payment Automation Dashboard</title>
      <meta content="" name="description">
      <meta content="" name="keywords">
      <!-- Favicons -->
      <link href="assets/img/tn_logo.png" rel="icon">
      <link href="assets/img/tn_logo.png" rel="apple-touch-icon">
      <!-- Google Fonts -->
      <link href="https://fonts.gstatic.com" rel="preconnect">
      <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
      <!-- Vendor CSS Files -->
      <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
      <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
      <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> -->
      <link rel="stylesheet" href="assets/vendor/sweetalert2/css/sweetalert.min.css" />
      <link rel="stylesheet" href="assets/vendor/sweetalert2/css/sweetalert2.min.css" />
      <!-- <link rel="stylesheet" href="assets/vendor/toggle/bootstrap-toggle.min.css" /> -->
      <!-- CSS File --> 
      <link href="assets/css/style.css" rel="stylesheet">
      <script src="assets/components/official_header.js" type="text/javascript" defer></script>
      <!-- <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css"> -->
      <style type="text/css">
         .card-green-text {
         /* background-color: #008000; */
         background-color: #6eba6e !important;
         color: #fff;
         font-size: 14px;
         font-weight: bold;
         }
         .card-green-blue
         {
         /*  background-color: #5f14d3;*/
         background-color: #8e63d0 !important;
         color: #fff;
         font-size: 14px;
         font-weight: bold;
         }
         .cus-grid th {
         vertical-align: middle;
         } 
         .bg-card-blue {
         /* background-color: #008000; */
         background-color: #2c41b4 !important;
         color: #fff;
         font-size: 14px;
         font-weight: bold;
         } 
         #accordionExample .accordion-button:not(.collapsed)::after, .accordion-button::after {
         filter: invert(1) grayscale(100%) brightness(200%) !important;
         }
        input.form-control.form-control-sm {
        margin-bottom: 1rem;
        }
        .dt-buttons.btn-group.flex-wrap {
        position: absolute;
        right: 2rem;
        }
      .card-lg-blue-text {
        background-color: #2c93b4 !important;
        color: #fff;
        font-size: 14px;
        font-weight: bold;
      }
      .card-lg-orange-text {
        background: #c09012 !important;
        color: #fff;
        font-size: 14px;
        font-weight: bold;
      }
      th {
        text-align: center;
      }
      a#xlsx_btn {
      position: absolute;
      right: 8rem;
      top: 1rem;
      }
      a#csv_btn {
      position: absolute;
      right: 2rem;
      top: 1rem;
      }
      .ligth-bg{
        --bs-bg-opacity: 0.3!important;
      }
      .font-custom-lable{
        font-size: 12px!important;
      }
      .font-custom-text{
        font-size: 12px!important;
        color:brown;
      }
      #checkTaluk_lable {
        float: right;
        background: #2a275d;
        color: #fff;
        padding-right: 0.6rem;
        padding-left: 1rem;
        border-radius: 3px;
      }
      </style>
   </head>
   <body>
      <!-- ======= Header & sidemenu ======= -->
      <official-header-component></official-header-component>
      <!-- <div id="preloader"></div> -->
      <!-- End Sidebar-->
      <main id="main" class="main">
         <!-- Dashboard view starts -->
         <section>
            <div class="container-fluid">
               <div class="card mb-1">
                  <form id="formFilters" method="post">
                    <div class="card-body pb-0 pt-2">
                       <div class="accordion" id="accordionExample">
                          <div class="accordion-item">
                             <h2 class="accordion-header">
                                <button id="btnfilter" style="    background: linear-gradient(to right, rgb(44 43 88), rgb(34 25 111)) !important;
                                   color: #fff !important;" class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                <i class="bi bi-funnel"></i>  <span class="px-2">Tranfer File-wise Filter</span>
                                </button>
                             </h2>
                             <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                                <div class="accordion-body w-100">
                                   <div class="row mb-2 boxflex">
                                      <!-- <h5 class="card-title pb- mb-0"><i class="bi bi-funnel"></i>  Report Filter </h5> -->
                                      <div class="col-md-3">
                                         <label for="ddl_scheme_cate" class="form-label fw-bold">Scheme category</label>
                                         <select class="form-select" id="ddl_scheme_cate" name="ddl_scheme_cate">
                                            <option value="">--All--</option>
                                         </select>
                                      </div>
                                      <div class="col-md-3">
                                         <label for="ddl_scheme_code" class="form-label fw-bold">Scheme Code</label>
                                         <select class="form-select" id="ddl_scheme_code" name="ddl_scheme_code"><option value="">--All--</option></select>
                                      </div>
                                      <div class="col-md-3">
                                         <label for="ddl_scheme_name" class="form-label fw-bold">Scheme Name</label>
                                         <select class="form-select" id="ddl_scheme_name" name="ddl_scheme_name">
                                            <option value="">--Select--</option>
                                         </select>
                                      </div>
                                      <div class="col-md-3">
                                         <label for="ddl_sub_scheme" class="form-label fw-bold">Sub Scheme Name</label>
                                         <select class="form-select" id="ddl_sub_scheme" name="ddl_sub_scheme">
                                            <option value="">--Select--</option>
                                         </select>
                                      </div>
                                      <div class="col-md-3">
                                         <label for="ddl_department" class="form-label fw-bold">Department</label>
                                         <select class="form-select" id="ddl_department" name="ddl_department">
                                            <option value="">--Select--</option>
                                         </select>
                                      </div>
                                      <div class="col-md-3">
                                         <label for="ddl_sub_department" class="form-label fw-bold">Sub Department</label>
                                         <select class="form-select" id="ddl_sub_department" name="ddl_sub_department">
                                            <option value="">--Select--</option>
                                         </select>
                                      </div>
                                   </div>
                                   <hr>
                                  <div class="row mb-2 boxflex">
                                      <div class="col-md-4">
                                        <label class="form-label fw-bold" for="dayWeekMonthFilter">Payment Period</label>
                                        <select name="dayWeekMonthFilter" id="dayWeekMonthFilter" class="form-select">
                                          <option value="mm" selected>Monthly</option>
                                          <option value="fq">Financial Quarterly</option>
                                          <option value="cq">Calendar Quarterly</option>
                                          <option value="h">Half-Yearly</option>
                                          <option value="yyyy">Yearly</option>
                                        </select>
                                      </div>
                    
                                      <div class="col-md" id="ddl_month_col">
                                        <label for="from_date" class="form-label fw-bold">Select Month</label>
                                        <select name="ddl_month" id="ddl_month" class="form-select">
                                          <option value="" disabled selected>Select Month</option>
                                          <option value="01">January</option>
                                          <option value="02">February</option>
                                          <option value="03">March</option>
                                          <option value="04">April</option>
                                          <option value="05">May</option>
                                          <option value="06">June</option>
                                          <option value="07">July</option>
                                          <option value="08">August</option>
                                          <option value="09">September</option>
                                          <option value="10">October</option>
                                          <option value="11">November</option>
                                          <option value="12">December</option>
                                        </select>
                                      </div>
                                      <div class="col-md" id="ddl_financialQuarterly_col">
                                        <label for="financialQuarterly" class="form-label fw-bold">Select Financial Quarterly</label>
                                        <select name="ddl_financialQuarterly" id="ddl_financialQuarterly" class="form-select">
                                          <option value="" disabled selected>Select  Financial Quarterly</option>
                                          <option value="f1q1">Q1 (April, May, and June )</option>
                                          <option value="f2q2">Q2 (July, August, and September)</option>
                                          <option value="f3q3">Q3 (October, November, and December)</option>
                                          <option value="f4q4">Q4 (January, February, and March)</option>
                                        </select>
                                      </div>
                                      <div class="col-md" id="ddl_calendarQuarterly_col">
                                        <label for="ddl_calendarQuarterly" class="form-label fw-bold">Select Calendar Quarterly</label>
                                        <select name="ddl_calendarQuarterly" id="ddl_calendarQuarterly" class="form-select">
                                          <option value="" disabled selected>Select Calendar Quarterly</option>
                                          <option value="c1q1">Q1 (January, February, and March)</option>
                                          <option value="c2q2">Q2 (April, May, and June )</option>
                                          <option value="c3q3">Q3 (July, August, and September)</option>
                                          <option value="c4q4">Q4 (October, November, and December)</option>
                                        </select>
                                      </div>
                                      <div class="col-md" id="ddl_half_yearly_col">
                                        <label for="ddl_half_yearly" class="form-label fw-bold">Select Half Yearly</label>
                                        <select name="ddl_half_yearly" id="ddl_half_yearly" class="form-select">
                                          <option value="" disabled selected>Select Half-Yearly</option>
                                          <option value="h1">H1 (January to June)</option>
                                          <option value="h2">H2 (July to December)</option>
                                        </select>
                                      </div>

                                      <div class="col-md" id="ddl_year_col">
                                        <label for="to_date" class="form-label fw-bold">Select Year</label>
                                        <select name="ddl_year" id="ddl_year" class="form-select">
                                          <option value="" disabled selected>Select Year</option>
                                          <option value="2022">2022</option>
                                          <option value="2023">2023</option>
                                          <option value="2024">2024</option>
                                        </select>
                                      </div>
                                    </div>
                                     
                                  <div class="row mb-2 boxflex">
                                    <button class="btn btn-success float-end cbtn col-md-2" type="submit"><i class="bi bi-pencil-square"></i> Submit</button>
                                  </div>
                                </div>
                                <input type="hidden" name="approvelpayment" id="approvelpayment">
                             </div>
                          </div>
                       </div>
                    </div>
                    <input type="hidden" name="current_tab_value" id="current_tab_value" value="0">
                    <input type="hidden" name="approvelpayment" id="approvelpayment">
                 </form>
               </div>
                
                
                <div class="card mb-1 mt-2" id="filter_based_info_card_div">
                    <div class="card-body pb-0 pt-2 bg-info ligth-bg">
                      <div class="row">
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Scheme Category</label>
                          <p id="lable_text_scheme_cate" class="text-left font-custom-text">KMUT</p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Scheme Code</label>
                          <p id="lable_text_scheme_code" class="text-left font-custom-text">CD94U</p>
                        </div>
                        
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Scheme Name</label>
                          <p id="lable_text_scheme" class="text-left font-custom-text">KALAINGAR MAHALIR URIMAI THITTAM</p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Sub Scheme Name</label>
                          <p id="lable_text_sub_scheme" class="text-left font-custom-text">kmut</p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Department</label>
                          <p id="lable_text_Department" class="text-left font-custom-text">Revenue And Disaster Management Department</p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Sub Department</label>
                          <p id="lable_text_sub_department" class="text-left font-custom-text">Revenue Administration</p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Year</label>
                          <p id="lable_text_year" class="text-left font-custom-text"></p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Payment Period</label>
                          <p id="lable_text_payment_period" class="text-left font-custom-text"></p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Month</label>
                          <p id="lable_text_month" class="text-left font-custom-text"></p>
                        </div>
                        <div class="col">
                          <label class="form-label fw-bold font-custom-lable">Payment Date</label>
                          <select name="payment_date" id="payment_date" class="form-select text-center mb-2" aria-invalid="false">
                            <option value="">--All--</option>
                            <option value="c1q1">01-12-2023</option>
                            <option value="c2q2">12-01-2024</option>
                            <option value="c3q3">14-02-2024</option>
                            <option value="c4q4">10-03-2024</option>
                          </select>
                        </div>
                        <!-- <div class="col" id="from_date_div">
                          <label class="form-label fw-bold font-custom-lable">Payment Period From Date</label>
                          <p id="lable_text_from_date" class="text-left font-custom-text">2024-02-20</p>
                        </div>
                        <div class="col" id="to_date_div">
                          <label class="form-label fw-bold font-custom-lable">Payment Period To Date</label>
                          <p id="lable_text_to_date" class="text-left font-custom-text">2024-02-20</p>
                        </div> -->
                      </div>                   
                    </div>
                  </div>



                <div class="card mb-2 mt-3" id="tblCard">
                  <div class="card-body">
                    <ul class="nav nav-tabs my-3" id="myTab" role="tablist">
                      <!--  <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Scheme Registration</button>
                        </li> -->
                        <li class="nav-item mx-2" role="presentation">
                          <button class="nav-link active" id="upload-process-tab" data-bs-toggle="tab" data-bs-target="#payment-summary-tab-pane" type="button" role="tab" aria-controls="payment-summary-tab-pane" aria-selected="false" onclick="tabClickValue(0)">Payment Reports</button>
                        </li>
                      <li class="nav-item mx-2" role="presentation">
                        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false" onclick="tabClickValue(1)">Payment Failure Reports</button>
                      </li>
                      <li class="nav-item mx-2" role="presentation">
                        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#file-wise-summary-tab-pane" type="button" role="tab" aria-controls="file-wise-summary-tab-pane" aria-selected="false" onclick="tabClickValue(2)">File Wise Summary Reports</button>
                      </li>
                    </ul>

                    <!-- tbl payment report All Summary  -->
                    <div class="tab-content" id="myTabContent">
                      <div class="tab-pane fade show active" id="payment-summary-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                        <div class="col-lg-12">
                          <div class="card1">
                            <div class="card-body1">
                              <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i>  Payment Report</h5>
                              <label for="checkTaluk" id="checkTaluk_lable"><input type="checkbox" name="taluk" id="checkTaluk"> Taluk Wise Report</label>
                              <div class="clear-both"></div>
                              <div class="col-lg-12 mt-2 clear-both" style="    clear: both;">
                                <div class="table-responsive cus-grid">
                                  <div class="col-lg-3 mt-2 float-end mb-2">
                                    <a class="btn btn-primary cbtn" id="xlsx_btn" onclick="get_payment_report_xlsx()"><i class="bi bi-file-earmark-excel"></i> EXCEL</a>
                                    <a class="btn btn-primary mx-2 cbtn" id="csv_btn" onclick="get_payment_report_csv()"><i class="bi bi-file-earmark-pdf"></i> CSV</a>
                                  </div>
                                   <table class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentReportsList" aria-describedby="tblPaymentReportsList_info">
                                      <thead>
                                         <tr>
                                            <th class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentReportsList" aria-label="S.No: activate to sort column descending" aria-sort="ascending" rowspan="3">S.No</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentReportsList" aria-label="district: activate to sort column descending" aria-sort="ascending" rowspan="3">District</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentReportsList" aria-label="taluk: activate to sort column descending" aria-sort="ascending" rowspan="3" id="tblPaymentReportsList_taluk">Taluk</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentReportsList" aria-label="received: activate to sort column descending" aria-sort="ascending" rowspan="3">received date</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending" rowspan="3">payment initiated date  </th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentReportsList" aria-label="payment transfered date: activate to sort column descending" aria-sort="ascending" rowspan="3">payment transfered date</th>
                                            <th scope="col" colspan="8">APB</th>
                                            <th scope="col" colspan="8">ACH</th>
                                            <th scope="col" colspan="8">Total</th>
                                         </tr>
                                         <tr>
                                            <th scope="col" colspan="4" class="card-lg-blue-text">count</th>
                                            <th scope="col" colspan="4" class="card-lg-orange-text">Amount</th>
        
                                            <th scope="col" colspan="4" class="card-lg-blue-text">count</th>
                                            <th scope="col" colspan="4" class="card-lg-orange-text">Amount</th>
        
                                            <th scope="col" colspan="4" class="card-lg-blue-text">count</th>
                                            <th scope="col" colspan="4" class="card-lg-orange-text">Amount</th>
                                         </tr>
                                         <tr>
                                          <!-- apb Count and amount -->
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Beneficiaries</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">In-progress</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Success</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Failure</th>
        
        
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Beneficiaries</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">In-progress</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Success</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Failure</th>
        
                                      <!-- apb Count and amount -->
        
                                      <!-- ach Count and amount -->
        
        
                                      <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Beneficiaries</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">In-progress</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Success</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Failure</th>
        
        
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Beneficiaries</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">In-progress</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Success</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Failure</th>
        
                                      <!-- ach Count and amount -->
        
                                      <!-- total Count and amount -->
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Beneficiaries</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">In-progress</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Success</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-blue-text">Failure</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Beneficiaries</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">In-progress</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Success</th>
                                          <th scope="col" tabindex="0" aria-controls="tblPaymentReportsList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" aria-sort="ascending" class="card-lg-orange-text">Failure</th>
                                      <!-- total Count and amount -->
                                         </tr>
                                      </thead>
                                      <tbody>
                                        <tr class="odd">
                                            <td class="sorting_1">1</td>
                                            <td>Perambalur</td>
                                            <td>2023-12-29</td>
                                            <td></td>
                                            <td></td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>8095</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>9714000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>8095</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>9714000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
                                        <tr class="even">
                                            <td class="sorting_1">2</td>
                                            <td>Chennai</td>
                                            <td>2024-01-23</td>
                                            <td>2024-01-30</td>
                                            <td>2024-01-30</td>
                                            <td>350999</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>350999000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>189732</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>189732000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>540731</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>540731000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1">3</td>
                                            <td>Ariyalur</td>
                                            <td>2024-01-19</td>
                                            <td>2024-01-29</td>
                                            <td>2024-01-29</td>
                                            <td>50046</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>50046000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>27849</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>27849000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>77895</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>77895000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
                                        <tr class="even">
                                            <td class="sorting_1">4</td>
                                            <td>Perambalur</td>
                                            <td>2023-12-29</td>
                                            <td></td>
                                            <td></td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>4262</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>5114400</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>4262</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>5114400</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1">5</td>
                                            <td>Ariyalur</td>
                                            <td>2024-01-19</td>
                                            <td>2024-01-30</td>
                                            <td>2024-01-30</td>
                                            <td>51925</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>51925000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>27634</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>27634000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>79559</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>79559000</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
                                        <tr class="even">
                                            <td class="sorting_1">6</td>
                                            <td>Ariyalur</td>
                                            <td>2023-12-29</td>
                                            <td></td>
                                            <td></td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>10339</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>12406800</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>10339</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>12406800</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
        
                                      </tbody>
                                   </table>
                                </div>
                             </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- tbl payment report All Summary  -->
                 
                      <!-- tbl payment report Failur -->
                      <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <div class="col-lg-12">
                          <div class="card1">
                            <div class="card-body1">
                              <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i>  Payment Failure Report <small class="text-muted"> (Rejected Reason wise Summary)</small></h5>
                              <!-- <label for="checkTaluk_failed" id="checkTaluk_lable"><input type="checkbox" name="taluk" id="checkTaluk_failed"> Taluk Wise Report</label> -->
                              <div class="clear-both"></div>
                              <div class="col-lg-12 mt-2 clear-both" style="    clear: both;">
                                <div class="table-responsive cus-grid">
                                    <a class="btn btn-primary cbtn" id="xlsx_btn" onclick="get_payment_report_xlsx()"><i class="bi bi-file-earmark-excel"></i> EXCEL</a>
                                    <a class="btn btn-primary mx-2 cbtn" id="csv_btn" onclick="get_payment_report_csv()"><i class="bi bi-file-earmark-pdf"></i> CSV</a>
                                   <table class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentFailedReasonReportsList" aria-describedby="tblPaymentFailedReasonReportsList_info">
                                      <thead>
                                         <tr>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="S.No: activate to sort column descending" aria-sort="ascending">S.No</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment transfered date: activate to sort column descending" aria-sort="ascending">Reasoncode</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Remarks</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Beneficiaries</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Amount</th>
                                         </tr>
                                      </thead>
                                      <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>51</td>
                                            <td>KYC Documents Pending</td>
                                            <td>5234</td>
                                            <td>5234000</td>
                                        </tr>
                                        <tr>
                                          <td>2</td>
                                          <td>52</td>
                                          <td>Documents Pending for Account Holder turning Major</td>
                                          <td>2254</td>
                                          <td>2254000</td>
                                      </tr>
                                      <tr>
                                        <td>3</td>
                                        <td>60</td>
                                        <td>Account Holder Expired</td>
                                        <td>4034</td>
                                        <td>4034000</td>
                                    </tr>
                                    <tr>
                                      <td>4</td>
                                      <td>68</td>
                                      <td>A/c Blocked or Frozen</td>
                                      <td>1234</td>
                                      <td>1234000</td>
                                     </tr>
                                      </tbody>
                                   </table>
                                </div>
                             </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- tbl payment report Failur -->


                      <!-- file-wise-summary-tab-pane -->
                      <div class="tab-pane fade" id="file-wise-summary-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <div class="col-lg-12">
                          <div class="card1">
                            <div class="card-body1">
                              <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i>  Transfer File wise Summary </h5>
                              <div class="clear-both"></div>
                              <div class="col-lg-12 mt-2 clear-both" style="    clear: both;">
                                <div class="table-responsive cus-grid">
                                    <a class="btn btn-primary cbtn" id="xlsx_btn" onclick="get_payment_report_xlsx()"><i class="bi bi-file-earmark-excel"></i> EXCEL</a>
                                    <a class="btn btn-primary mx-2 cbtn" id="csv_btn" onclick="get_payment_report_csv()"><i class="bi bi-file-earmark-pdf"></i> CSV</a>
                                   <table class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentFailedReasonReportsList" aria-describedby="tblPaymentFailedReasonReportsList_info">
                                      <thead>
                                         <tr>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="S.No: activate to sort column descending" aria-sort="ascending">S.No</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="taluk: activate to sort column descending" aria-sort="ascending">File Name</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="taluk: activate to sort column descending" aria-sort="ascending">File Generated Date</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment transfered date: activate to sort column descending" aria-sort="ascending">File Transfered Date</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment transfered date: activate to sort column descending" aria-sort="ascending">Payment Date</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Total</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Payment Type</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Success</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Failed</th>
                                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedReasonReportsList" aria-label="payment initiated date: activate to sort column descending" aria-sort="ascending">Status</th>
                                         </tr>
                                      </thead>
                                      <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>ACH-CR-IDIB-H2HUSER1-29122023-TNEGA29122023000006-INP.txt</td>
                                            <td>01-02-2024</td>
                                            <td>06-02-2024</td>
                                            <td>09-02-2024</td>
                                            <td>1350</td>
                                            <td>ACH</td>
                                            <td>1300</td>
                                            <td>50</td>
                                            <td><span class="badge bg-success">Completed</span></td>
                                        </tr>
                                        <tr>
                                          <td>2</td>
                                          <td>APB-CR-IDIB-H2HUSER1-09012024-TNEGA09012024000012-INP.txt</td>
                                          <td>01-02-2024</td>
                                          <td>06-02-2024</td>
                                          <td>10-02-2024</td>
                                          <td>5300</td>
                                          <td>APB</td>
                                          <td>5000</td>
                                          <td>300</td>
                                          <td><span class="badge bg-success">Completed</span></td>
                                      </tr>
                                      <tr>
                                          <td>3</td>
                                          <td>ACH-CR-IDIB-H2HUSER1-29122023-TNEGA29122023000004-INP.txt</td>
                                          <td>04-02-2024</td>
                                          <td>08-02-2024</td>
                                          <td>13-02-2024</td>
                                          <td>10300</td>
                                          <td>ACH</td>
                                          <td>10000</td>
                                          <td>300</td>
                                          <td><span class="badge bg-success">Completed</span></td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>APB-CR-IDIB-H2HUSER1-09012024-TNEGA09012024000015-INP.txt</td>
                                        <td>10-02-2024</td>
                                        <td>16-02-2024</td>
                                        <td>19-02-2024</td>
                                        <td>11300</td>
                                        <td>APB</td>
                                        <td>11000</td>
                                        <td>300</td>
                                        <td><span class="badge bg-success">Completed</span></td>
                                     </tr>
                                     <tr>
                                      <td>4</td>
                                      <td>APB-CR-IDIB-H2HUSER1-09012024-TNEGA09012024000015-INP.txt</td>
                                      <td>17-02-2024</td>
                                      <td>00-00-0000</td>
                                      <td>22-03-2024</td>
                                      <td>12200</td>
                                      <td>APB</td>
                                      <td>---</td>
                                      <td>--</td>
                                      <td><span class="badge bg-warning">Pending</span></td>
                                   </tr>
                                   <tr>
                                    <td>4</td>
                                    <td>APB-CR-IDIB-H2HUSER1-09012024-TNEGA09012024000015-INP.txt</td>
                                    <td>27-02-2024</td>
                                    <td>28-02-2024</td>
                                    <td>29-02-2024</td>
                                    <td>11300</td>
                                    <td>APB</td>
                                    <td>---</td>
                                    <td>---</td>
                                    <td><span class="badge bg-info text-nowrap">In-progress</span></td>
                                 </tr>
                                      </tbody>
                                   </table>
                                </div>
                             </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- file-wise-summary-tab-pane -->

                    </div>
                  </div>
                </div>
               <!-- END: list card end here -->
               <!-- START: modal popup -->
               <!-- Button trigger modal -->
            </div>
         </section>
      </main>
      <!-- End #main -->
      <!-- ======= Footer ======= -->
      <footer id="footer" class="footer">
         <div class="copyright">
            &copy; Copyright <strong><span>TNeGA</span></strong>. All Rights Reserved
         </div>
         <div class="credits">
            Designed & Developed by <a href="https://tngis.tn.gov.in/" target="_blank">TNeGA</a>
         </div>
      </footer>
      <!-- End Footer -->
      <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
      <!-- Delete modal starts -->
      <!-- view crop info ends -->
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script type="text/javascript" src="assets/vendor/jquery-validate/js/jquery.validate.min.js"></script>


    <!-- data table -->
    <script src="assets/vendor/datatable/jquery.dataTables.min.js"></script>
    <script src="assets/vendor/datatable/dataTables.bootstrap5.min.js"></script>
    <script type="text/javascript" src="assets/vendor/datatable/js/dataTables.js"></script>
    <script type="text/javascript" src="assets/vendor/datatable/js/dataTables.bootstrap4.js"></script>
    <script src="assets/vendor/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/jszip.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/pdfmake.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/vfs_fonts.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.colVis.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert2.all.min.js"></script>
    <script src="assets/vendor/toggle/bootstrap-toggle.min.js"></script>
    <script src="assets/js/global.js"></script>
    <script src="assets/js/alpinejs_3_10_2.min.js" defer></script>
    <script src="assets/lang/reports.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js'></script>
    <script src="assets/scripts/xlsx.full.min.js"></script>
    <script src="assets/scripts/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js"></script>
    <!-- <script src="assets/scripts/jspdf.debug.js"></script> -->
    <!-- data table -->





    
    <!-- Main JS File -->
    
    <script src="assets/js/global.js"></script>
    <script src="assets/js/base64tojson.js"></script>
    <script src="assets/js/crypto-js.js"></script>
    <script src="assets/js/aes.js"></script>
  

    <script type="text/javascript" src="assets/vendor/toastr/toastr.min.js"></script>
    
    <!-- Crypto js -->
    <script src="assets/vendor/encryption/crypto-js.min.js"></script>
    <!-- Encryption js -->
    <script src="assets/vendor/encryption/Encryption.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert2.all.min.js"></script>
    
    
 
 <script type="text/javascript">
  



var url = window.location.href;
var page_url = url.split('/');
var page = page_url[4];

var userDataString = getCookie('payment_official');
userDataString = JSON.parse(userDataString);
$(document).ready(function () {
  $(document).on({
        //  ajaxStart: function () {
        //    $('#preloader').show();
        //   //  console.log('preloader is show');
        //  },
         ajaxStop: function () {
           $('#preloader').hide();
          //  console.log('preloader is show');
         }
       });

  $('.official').each(function (i, obj) {
    var href = obj.getAttribute("href");
    if (href == page) {
      obj.classList.add('active');
    } else {
      obj.classList.remove('active');
    }
  });
  // $('#preloader').hide();
 
  var userDataString = getCookie('payment_official');
  if (!userDataString) {
    $('#preloader').show();
    window.location.href = "login.html";
  }

  userDataString = JSON.parse(userDataString);
  $('#official_username').text(userDataString['first_name']);
  $('#UserID').val(userDataString['user_id']);
  window.loginUser_id = userDataString['user_id'];
  reloID = userDataString['role_id'];
    roleBasedPageAllow(loginUser_id,reloID);
  getSchemeCategory();
  getDistricts();

  $('#ddl_sub_scheme').on('change',function(){      
   $('#ddl_department').empty();
   $('#ddl_sub_department').empty();

   $('#ddl_department').append($('<option>', {value: "",text: "--ALL--"}));
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--ALL--"}));
    $('#preloader').show();
     $.ajax({
       url: APIURL +'schem_filter',
       type: "POST",
       headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
       data: {case: "get_department",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),sub_scheme_name:$('#ddl_sub_scheme').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
       success: function(response) {
        $('#preloader').hide();
          //  console.log("department:", response);
           var department_code = response.data[0];
          //  console.log(department_code.department);
           getDepartment(department_code.department);
       },
       error: function(xhr, status, error) {
        $('#preloader').hide();
           console.log("Error:", error);
       }
     });
  });

  $('#ddl_district').on('change', function () {
    var district_code = $('#ddl_district').val();
    $('#ddl_taluk').empty();
    $('#ddl_taluk').append('<option value="">--ALL--</option>');
    getTaluk(district_code);
  });


});

function getCookie(name) {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.startsWith(name + '=')) {
        return cookie.substring(name.length + 1);
      }
    }
    return null;
  }

/* filters */
function getSchemeCategory(){
    
    $('#ddl_scheme_name').empty();
    $('#ddl_sub_scheme').empty();
    $('#ddl_department').empty();
    $('#ddl_sub_department').empty();
 
    $('#ddl_scheme_name').append($('<option>', {value: "", text: "--All--"}));
    $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--All--"}));
    $('#ddl_department').append($('<option>', {value: "",text: "--All--"}));
    $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));
 
  $.ajax({
    url: APIURL +'schem_filter',
    type: "POST",
    headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
    data: {case: "get_scheme_category",get_column:"scheme_code",groupbycolumn:"scheme_code",user_id:loginUser_id},
    success: function(response) {
       //  console.log("Success:", response);
        var schemeCode = response.data;
       //  console.log('scheme code >>> ',schemeCode);
 
        $('#ddl_scheme_cate').empty();
        $('#ddl_scheme_cate').append($('<option>', {
              value: "",
              text: "--All--"
          }));

        $.each(schemeCode, function (index, scheme) {
            // console.log('scheem code lenthg >>> ', schemeCode.length);
            if(schemeCode.length >1){
              $('#ddl_scheme_cate').append($('<option>', {
                value: scheme.scheme_category,
                text: scheme.scheme_category
            }));
            }else{
              $('#ddl_scheme_cate').append($('<option>', {
                value: scheme.scheme_category,
                text: scheme.scheme_category
            }).prop('selected', true));
            $('#ddl_scheme_cate').trigger('change');
            }
         });
    },
    error: function(xhr, status, error) {
        console.log("Error:", error);
    }
  });
}


$('#ddl_scheme_cate').on('change',function(){
  
    $('#ddl_scheme_code').empty();
    $('#ddl_scheme_name').empty();
    $('#ddl_sub_scheme').empty();
    $('#ddl_department').empty();
    $('#ddl_sub_department').empty();

    $('#ddl_scheme_code').append($('<option>', {value: "", text: "--All--"}));
    $('#ddl_scheme_name').append($('<option>', {value: "", text: "--All--"}));
    $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--All--"}));
    $('#ddl_department').append($('<option>', {value: "",text: "--All--"}));
    $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));
  
   $.ajax({
     url: APIURL +'schem_filter',
     type: "POST",
     headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
     data: {case: "get_scheme_code",get_column:"scheme_code",groupbycolumn:"scheme_code",whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
     success: function(response) {
        //  console.log("Success:", response);
         var schemeCode = response.data;
        //  console.log('scheme code >>> ',schemeCode);
  
         $('#ddl_scheme_code').empty();
         $('#ddl_scheme_code').append($('<option>', {
               value: "",
               text: "--All--"
           }));  

        $.each(schemeCode, function (index, scheme) {
            // console.log('scheem code lenthg >>> ', schemeCode.length);
            if(schemeCode.length >1){
              $('#ddl_scheme_code').append($('<option>', {
                value: scheme.scheme_code,
                text: scheme.scheme_code
            }));
            }else{
              $('#ddl_scheme_code').append($('<option>', {
                value: scheme.scheme_code,
                text: scheme.scheme_code
            }).prop('selected', true));
            // $('#ddl_scheme_code').trigger('change');
            }
         });
         $('#ddl_scheme_code').trigger('change');
     },
     error: function(xhr, status, error) {
         console.log("Error:", error);
     }
   });
})



$('#ddl_scheme_code').on('change',function(){

     $('#ddl_sub_scheme').empty();
     $('#ddl_scheme_name').empty();
     $('#ddl_sub_scheme').empty();
     $('#ddl_department').empty();
     $('#ddl_sub_department').empty();

     $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--ALL--"}));
     $('#ddl_scheme_name').append($('<option>', {value: "", text: "--ALL--"}));
     $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--ALL--"}));
     $('#ddl_department').append($('<option>', {value: "",text: "--ALL--"}));
     $('#ddl_sub_department').append($('<option>', {value: "",text: "--ALL--"}));

      $('#preloader').show();
   $.ajax({
   url: APIURL +'schem_filter',
   type: "POST",
   headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
   data: {case: "get_scheme",scheme_code:$('#ddl_scheme_code').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
   success: function(response) {
    $('#preloader').hide();
      //  console.log("Success:", response);
       var schemeCode = response.data;
      //  console.log(schemeCode.scheme_code);
       $('#ddl_scheme_name').empty();
       $('#ddl_scheme_name').append($('<option>', {
             value: "",
             text: "--All--"
         }));
       // Iterate over the JSON object and append options
       $.each(schemeCode, function (index, scheme) {
        // console.log('scheem code lenthg >>> ', schemeCode.length);
        if(schemeCode.length >1){
          $('#ddl_scheme_name').append($('<option>', {
             value: scheme.scheme_name,
             text: scheme.scheme_name
         }));
        }else{
          $('#ddl_scheme_name').append($('<option>', {
             value: scheme.scheme_name,
             text: scheme.scheme_name
         }).prop('selected', true));
        //  $('#ddl_scheme_name').trigger('change');
        }
       });
       $('#ddl_scheme_name').trigger('change');
   },
   error: function(xhr, status, error) {
    $('#preloader').hide();
       console.log("Error:", error);
   }
 });

});

$('#ddl_scheme_name').on('change',function(){

   
   // $('#ddl_scheme_name').empty();
   $('#ddl_sub_scheme').empty();
   $('#ddl_department').empty();
   $('#ddl_sub_department').empty();

   
   // $('#ddl_scheme_name').append($('<option>', {value: "", text: "--ALL--"}));
   $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--All--"}));
   $('#ddl_department').append($('<option>', {value: "",text: "--All--"}));
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));


$('#preloader').show();
   $.ajax({
   url: APIURL +'schem_filter',
   type: "POST",
   headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
   data: {case: "get_sub_scheme",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
   success: function(response) {
    $('#preloader').hide();
      //  console.log("Success:", response);
       var schemeCode = response.data;
      //  console.log(schemeCode.scheme_code);
       $('#ddl_sub_scheme').empty();
       $('#ddl_sub_scheme').append($('<option>', {
             value: "",
             text: "--All--"
         }));
       // Iterate over the JSON object and append options
       $.each(schemeCode, function (index, scheme) {
        if(schemeCode.length > 1){
          $('#ddl_sub_scheme').append($('<option>', {
             value: scheme.subscheme_name,
             text: scheme.subscheme_name
         }));
        }else{
          $('#ddl_sub_scheme').append($('<option>', {
             value: scheme.subscheme_name,
             text: scheme.subscheme_name
         }).prop('selected', true));
        }
        // $('#ddl_sub_scheme').trigger('change');
       });
       $('#ddl_sub_scheme').trigger('change');
   },
   error: function(xhr, status, error) {
    $('#preloader').hide();
       console.log("Error:", error);
   }
 });

});

// get_scheme


/* filters */
function getDepartment(depID){
   $('#ddl_department').empty();
   $('#ddl_sub_department').empty();

   $('#ddl_department').append($('<option>', {value: "",text: "--ALL--"}));
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--All--"}));
    $('#preloader').show();
    let scheme_cate = $('#ddl_scheme_cate').val();

$.ajax({
   url: APIURL +'get_department',
   type: "POST",
   headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
   data: {type: "department"},
   success: function(response) {
       // console.log("Success:",JSON.parse(response)[0].data );
       var department = response[0].data;
       // Handle the successful response here
      //  $('#ddl_department').empty();
      //  $('#ddl_department').append($('<option>', {
      //        value: "",
      //        text: "--ALL--"
      //    }));
      if(scheme_cate == '' || scheme_cate === 0){
                  $('#ddl_department').empty();
                  $('#ddl_department').append($('<option>', {val: '', text: '--All--' }));
                  $('#ddl_payment_cycle').empty();
                  $('#ddl_payment_cycle').append($('<option>', {val: '', text: 'Scheme Based Payment Period' }));
              }
              else
              {
       // Iterate over the JSON object and append options
       $.each(department, function (index, dep) {
         if(dep.department_code==depID){
           $('#ddl_department').append($('<option>', {
             value: dep.department_code,
             text: dep.department_name
           }).attr('selected', 'selected'));
           // $('#ddl_department').trigger('change');

           $.ajax({
                 url: APIURL +'schem_filter',
                 type: "POST",
                 headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
                 data: {case: "get_sub_department",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),sub_scheme_name:$('#ddl_sub_scheme').val(),department:$('#ddl_department').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
                 success: function(response) {
                  $('#preloader').hide();
                    //  console.log("department:", response);
                     var subdepartment_code = response.data[0];
                    //  console.log(subdepartment_code.department);
                     get_sub_department(dep.department_code,subdepartment_code.subdepartment);
                 },
                 error: function(xhr, status, error) {
                  $('#preloader').hide();
                     console.log("Error:", error);
                 }
             });
           
         }
       });
      }
   },
   error: function(xhr, status, error) {
       console.log("Error:", error);
       // Handle the error here
   }
 });
}


// $('#ddl_department').on('change',function(){
 function get_sub_department(depID,subDepID){
   $('#ddl_sub_department').empty();
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--ALL--"}));
    $('#preloader').show();
     // var department = $('#ddl_department').val();
     $.ajax({
     url: APIURL +'get_department',
     type: "POST",
     headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
     data: {type: "sub_department",whereColumn:$('#ddl_scheme_cate').val(),department_code:depID},
     success: function(response) {
      $('#preloader').hide();
         // console.log("Success:",JSON.parse(response)[0].data );
         var department = response[0].data;
         // Handle the successful response here
         $('#ddl_sub_department').empty();
         $('#ddl_sub_department').append($('<option>', {
               value: "",
               text: "--All--"
           }));
         // Iterate over the JSON object and append options
         $.each(department, function (index, sub_dep) {
           if(sub_dep.sub_department_code==subDepID){
             $('#ddl_sub_department').append($('<option>', {
               value: sub_dep.sub_department_code,
               text: sub_dep.sub_department_name
           }).attr('selected', 'selected'));
           }
         });
     },
     error: function(xhr, status, error) {
      $('#preloader').hide();
         console.log("Error:", error);
         // Handle the error here
     }
   });
 }

  function getDistricts(){
      const userDataString = getCookie("payment_official");
      const userData = JSON.parse(userDataString);

      var districtID=0;
      var data=[];
      if(userData['district_code']!=0){
      districtID=userData['district_code'];
      data={ case: 'district',district_code: districtID,user_id:userData['user_id']};
      } else {
      data={ case: 'district',user_id:userData['user_id']};
      }

      $('#ddl_taluk').empty();
      $('#ddl_taluk').append('<option value="">--All--</option>');
      $('#preloader').show();
    $.ajax({
      url: userMasterAPIURL+'userMaster',
      method: 'POST',
      headers: {'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
      data: data,
      dataType: 'json',
      success: function (response) {
        $('#preloader').hide();
        //console.log(response);
        var district = response.district;
        var districtDropdown = $("#ddl_district");
        $('#ddl_district').empty();
        $('#ddl_district').append($('<option>', {value: "",text: "--All--"}));
          
        if(districtID==0 || districtID ==undefined){
        // populateDropdown('ddl_district', response.districts, 'district');              
        } else {
        districtDropdown.html('<option value="'+district['district_code']+'">'+district['district_name']+'</option>');
        $('#ddl_district').trigger('change');
        var district_code= district['district_code'];
          getTaluk(district_code);
        } 
      },
      error: function () {
        $('#preloader').hide();
        console.error('Error fetching district data');
      }
    });
  }


  

  /*START : Get Taluk list*/
  function getTaluk(districtID){
    $('#ddl_taluk').empty();
    $('#ddl_taluk').append('<option value="">--All--</option>');
    // var district=$("#ddl_district").val();
      const userDataString = getCookie("payment_official");
      const userData = JSON.parse(userDataString);

      // var district=district_code;
      var talukID=0;
      var data=[];
      if(userData['taluk_code']!=0){
      // districtID=userData['district_code'];
      talukID=userData['taluk_code'];
      data={ case: 'taluk',district_code: districtID,taluk_code: talukID,user_id:userData['user_id']};
      } else {
      data={ case: 'taluk',district_code: districtID,user_id:userData['user_id']};
      }
      $('#preloader').show();
    
    $.ajax({
      url: userMasterAPIURL+'userMaster', // Replace with your API endpoint
      method: 'POST',
      headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
      data: data,
      dataType: 'json',
      success: function (response) {
        $('#preloader').hide();
        /*$('#ddl_taluk').empty();
        $.each(response.taluk, function (index, value) 
        {
            $('#ddl_taluk').append('<option value="' + value.taluk_code + '">' + value.taluk_name + ' </option>');
        });*/
        var taluk = response.taluk
        var talukDropdown = $("#ddl_taluk");
      //  populateDropdown('ddl_taluk', response.taluk, 'taluk'); 
        if(talukID==0){
          populateDropdown('ddl_taluk', response.taluk, 'taluk');             
        } else {
          
          talukDropdown.html('<option value="'+taluk['taluk_code']+'">'+taluk['taluk_name']+'</option>');
        $('#ddl_taluk').trigger('change');
        }

      },
      error: function () {
        $('#preloader').hide();
        Swal.fire({
          icon: "error",
          title: "Service Error!",
          showConfirmButton: false,
          timer: 2000
        })
      }
    });
  }


$(document).ready(function() {
    // console.log('Script executed');
    $('#dayWeekMonthFilter').trigger('change');
    });

  $('#dayWeekMonthFilter').on('change',function(){
    // hide div
      $('#ddl_financialQuarterly_col').hide();
      $('#ddl_calendarQuarterly_col').hide();
      $('#ddl_half_yearly_col').hide();
      $('#ddl_month_col').hide();
    // deactive input
      $('#ddl_financialQuarterly').prop('disabled',true);
      $('#ddl_calendarQuarterly').prop('disabled',true);
      $('#ddl_half_yearly').prop('disabled',true);
      $('#ddl_month').prop('disabled',true);


        var payment_period = $('#dayWeekMonthFilter').val();
        // alert(payment_period);

        if(payment_period == 'mm'){
          $('#ddl_month_col').show();
          $('#ddl_month').prop('disabled',false);
          let currentMonthandyear = checkCurrentMonth();
          $('#ddl_month').val(currentMonthandyear.currentMonth);
          $('#ddl_year').val(currentMonthandyear.currentYear);

        }else if(payment_period == 'fq'){
          $('#ddl_financialQuarterly_col').show();
          $('#ddl_financialQuarterly').prop('disabled',false);

        }else if(payment_period == 'cq'){
            $('#ddl_calendarQuarterly_col').show();
            $('#ddl_calendarQuarterly').prop('disabled',false);

        }else if(payment_period == 'h'){
          $('#ddl_half_yearly_col').show();
          $('#ddl_half_yearly').prop('disabled',false);
        }
  });

  // $("#from_date").prop("disabled", true);
  //   $("#to_date").prop("disabled", true);

    // selectbox
    // $("#ddl_month_col").hide();
    // $("#ddl_year_col").hide();
    
    // $("#ddl_month_col").prop("disabled", true);
    // $("#ddl_year_col").prop("disabled", true);



    // $(document).ready(function() {
    // // console.log('Script executed');
    // $('#dayWeekMonthFilter').trigger('change');
    // });

    // $('#dayWeekMonthFilter').on('change',function(){
    //     propDisableEnable(false);
    //     $('#from_date').val('');
    //     $('#to_date').val('');
    //     $('#payment_schedule_from_date').val('');
    //     $('#payment_schedule_to_date').val('');

    //     var payment_period = $('#dayWeekMonthFilter').val();
    //     if(payment_period == 0){
    //     $("#from_date_col").show();
    //     $("#to_date_col").show();
    //     $("#from_date").prop("disabled", false);
    //     $("#to_date").prop("disabled", false);

    //     $("#ddl_month_col").hide();
    //     $("#ddl_year_col").hide();
    //     $("#ddl_month").prop("disabled", true);
    //     $("#ddl_year").prop("disabled", true);

    //     }else if(payment_period == 1){
    //     var currentDate = new Date();
    //     var formattedCurrentDate = currentDate.toISOString().split('T')[0];
    //     $("#from_date").val(formattedCurrentDate);
    //     $("#to_date").val(formattedCurrentDate);
    //     $("#from_date").prop("disabled", true);
    //     $("#to_date").prop("disabled", true);

    //         $("#from_date_col").show();
    //         $("#to_date_col").show();
    //         $("#ddl_month_col").hide();
    //         $("#ddl_year_col").hide();
    //         $("#ddl_month").prop("disabled", true);
    //         $("#ddl_year").prop("disabled", true);
    //     }else if(payment_period == 2){
    //     var currentDate = new Date();
    //     var previousSunday = new Date(currentDate);
    //     previousSunday.setDate(currentDate.getDate() - currentDate.getDay());
    //     var formattedPreviousSunday = previousSunday.toISOString().split('T')[0];
    //     var formattedCurrentDate = currentDate.toISOString().split('T')[0];

        
    //     $("#from_date").val(formattedPreviousSunday);
    //     $("#to_date").val(formattedCurrentDate);
    //     $("#from_date").prop("disabled", true);
    //     $("#to_date").prop("disabled", true);

    //     $("#from_date_col").show();
    //     $("#to_date_col").show();
    //     $("#ddl_month_col").hide();
    //     $("#ddl_year_col").hide();
    //     $("#ddl_month").prop("disabled", true);
    //     $("#ddl_year").prop("disabled", true);
    //     }else if(payment_period == 3){
    //         var currentDate = new Date();
    //         var firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 2);
    //         var formattedFirstDayOfMonth = firstDayOfMonth.toISOString().split('T')[0];
    //         var formattedCurrentDate = currentDate.toISOString().split('T')[0];
    //         $("#from_date").val(formattedFirstDayOfMonth);
    //         $("#to_date").val(formattedCurrentDate);
    //         $("#from_date").prop("disabled", true);
    //         $("#to_date").prop("disabled", true);

    //         $("#from_date_col").show();
    //         $("#to_date_col").show();
    //         $("#ddl_month_col").hide();
    //         $("#ddl_year_col").hide();
    //         $("#ddl_month").prop("disabled", true);
    //         $("#ddl_year").prop("disabled", true);
    //     }
    //     else if(payment_period == 4){
    //     $("#from_date_col").hide();
    //     $("#to_date_col").hide();
    //     $("#from_date").prop("disabled", false);
    //     $("#to_date").prop("disabled", false);

    //     $("#ddl_month_col").show();
    //     $("#ddl_year_col").show();
    //     $("#ddl_month").prop("disabled", false);
    //     $("#ddl_year").prop("disabled", false);

    //     }else if(payment_period == 5){

    //     $("#from_date_col").hide();
    //     $("#to_date_col").hide();
    //     $("#from_date").prop("disabled", false);
    //     $("#to_date").prop("disabled", false);
    //     $("#ddl_month_col").prop("disabled", false);
    //     $("#ddl_month_col").hide();
    //     $("#ddl_year_col").show();
    //     $("#ddl_month").prop("disabled", false);
    //     $("#ddl_year").prop("disabled", false);

    //     } else{
    //     $("#from_date").val('');
    //     $("#from_date").prop("disabled", true);
    //     $("#to_date").val('');
    //     $("#to_date").prop("disabled", true);

    //     $("#from_date_col").show();
    //     $("#to_date_col").show();
    //     $("#from_date").prop("disabled", true);
    //     $("#to_date").prop("disabled", true);

    //     $("#ddl_month_col").hide();
    //     $("#ddl_year_col").hide();
    //     $("#ddl_month").prop("disabled", true);
    //     $("#ddl_year").prop("disabled", true);
    //     }
    // });

    $('#from_date').on('change', function() {
    var selectedDate = new Date($(this).val());
    var currentDate = new Date();
    if (selectedDate > currentDate) {
        alert('Please select a date in the past or today.');
        $(this).val('');
        return;
    }
    $('#today').prop('checked', false);
    $('#thisweek').prop('checked', false);
    $('#thismonth').prop('checked', false);
    });



    $('#to_date').on('change', function() {
    // Clear checkbox selections
    $('#today').prop('checked', false);
    $('#thisweek').prop('checked', false);
    $('#thismonth').prop('checked', false);

    // Get the values of from_date and to_date
    var fromDate = $('#from_date').val();
    var toDate = $(this).val();

    // Create Date objects for current date and selected date
    var currentDate = new Date();
    var selectedDate = new Date($(this).val());

    // Check if from_date is selected
    if (fromDate !== '') {
        // Check if to_date is earlier than from_date or in the future
        console.log('from date ',fromDate);
        if (fromDate > toDate && selectedDate > currentDate) {
            alert('To Date should not be earlier than From Date or in the future.');
            // Reset the to_date value
            $(this).val('');
        }else if(fromDate > toDate){
            alert('To Date should not be earlier than From Date or in the future.');
            // Reset the to_date value
            $(this).val('');
        }else if(selectedDate > currentDate){
                alert('Please select a date in the past or today.');
                $(this).val('');
                return;
        }
    } else {
        // Alert user to select from_date if it's not selected
        alert('Please Select from Date');
        // Reset the to_date value
        $(this).val('');
    }
    });

    $('#payment_schedule_from_date').on('change',function(){
        let dayWeekMonthFilter =  $('#dayWeekMonthFilter').val();

        if((dayWeekMonthFilter=='4' )|| (dayWeekMonthFilter=='5')){
            if(($('#ddl_month').val() ==null && $('#ddl_year').val() ==null) || $('#ddl_month').val() ==null || $('#ddl_year').val() ==null){
                propDisableEnable(true);
                $("#formFilters").submit();
                $(this).val('');
            }else{

                propDisableEnable(false);
                let selectMonth = parseInt($('#ddl_month').val(), 10);
                let selectYear = parseInt($('#ddl_year').val());

                const { startDate, endDate } = getStartAndEndDate(selectYear, selectMonth);

                console.log(`${convertLengthtoDate(startDate)}` <= `${$('#payment_schedule_from_date').val()}`);
                if(convertLengthtoDate(startDate)<= $('#payment_schedule_from_date').val() && convertLengthtoDate(endDate) >= $('#payment_schedule_from_date').val()){

                  $('#payment_schedule_from_date').val($(this).val());
                }else{
                  alert('Please Select Payment Period Range');
                  $('#payment_schedule_from_date').val(convertLengthtoDate(startDate));
                }


                console.log('startDate ', convertLengthtoDate(startDate));
                console.log('endDate ', convertLengthtoDate(endDate));
                console.log('payment_schedule_from_date selected date ', $('#payment_schedule_from_date').val());


            }
        }else{
            if($('#from_date').val() <= $(this).val() && $('#to_date').val() >= $(this).val()){
                // alert(true);
            }else{
                alert(false);
                $(this).val('');
            }
        }
    });

    $('#payment_schedule_to_date').on('change',function(){
        if($('#payment_schedule_from_date').val()!= null && $('#payment_schedule_from_date').val()!= ''){
            if($('#payment_schedule_from_date').val() <= $(this).val()){
                // alert(true);
            }else{
                alert('Payment Transferred From Date is after date enter');
                $(this).val('');
            }
        }else{
            alert('Please Select Payment Schedule From Date');
            $(this).val('');
        }
    });

    $('#ddl_year').on('change',function(){
        propDisableEnable(false);
    });



    function propDisableEnable(boolean){
            $('#ddl_scheme_cate').prop('disabled', boolean);
            $('#ddl_scheme_code').prop('disabled', boolean);
            $('#ddl_scheme_name').prop('disabled', boolean);
            $('#ddl_sub_scheme').prop('disabled', boolean);
            $('#ddl_department').prop('disabled', boolean);
            $('#ddl_sub_department').prop('disabled', boolean);
    }
    


  $('#paymentDate').on('change', function() {
    var todayDate = new Date(); 
    todayDate.setDate(todayDate.getDate() - 1);
    var toDate = new Date($(this).val());
    if (toDate < todayDate) {
        alert('To Date should be a future date.');
        $(this).val('');
    }
    $('#paymentDate_error').hide();
  });



  $("#credited_from_date").prop("disabled", true);
  $("#credited_to_date").prop("disabled", true);

$('#crediteddayWeekMonthFilter').on('change',function(){
    var payment_period = $('#crediteddayWeekMonthFilter').val();
    if(payment_period == 0){
      // console.log(payment_period);
      $("#credited_from_date").prop("disabled", false);
      $("#credited_to_date").prop("disabled", false);
    }else{
      $("#credited_from_date").val('');
      $("#credited_from_date").prop("disabled", true);
      $("#credited_to_date").val('');
      $("#credited_to_date").prop("disabled", true);
    }
});


$('#credited_to_date').on('change', function() {
    $('#today').prop('checked', false);
    $('#thisweek').prop('checked', false);
    $('#thismonth').prop('checked', false);
    var fromDate = $('#credited_from_date').val();
    var toDate = $(this).val();
    // Check if "to_date" is earlier than "from_date"
    if (fromDate && toDate && fromDate > toDate) {
      alert('To Date should not be earlier than From Date.');
      // You can reset the "to_date" value or take other actions here
      $(this).val('');
    }
});

  /*END : Get Taluk list*/
// });
$('#tblCard').show();
$('#filter_based_info_card_div').show();

var formsFilter = [];
window.localStorage.removeItem('filters');
/*from submit*/
$(document).ready(function() {
  $("#formFilters").validate({
          rules: {
            ddl_scheme_cate: {required: true},
            ddl_scheme_code: {required: true},
            ddl_scheme_name: {required: true},
            ddl_sub_scheme: {required: true},
            ddl_department: {required: true},
            ddl_sub_department: {required: true},
            // ddl_district: {required: true},
            // ddl_taluk: {required: true},
            // ddl_jurisdiction: {required: true},
            dayWeekMonthFilter : {required: true},
            // from_date : {required: true},
            // to_date : {required: true},
            ddl_month : {required: true},
            ddl_year : {required: true},
            ddl_financialQuarterly : {required: true},
            ddl_calendarQuarterly : {required: true},
            ddl_half_yearly : {required: true},
          },
          messages: {
            ddl_scheme_cate: {required: "Select the Scheme Category"},
            ddl_scheme_code: {required: "Select the Scheme Code"},
            ddl_scheme_name: {required: "Select the scheme Name"},
            ddl_sub_scheme: {required: "Select the Sub Scheme Name"},
            ddl_department: {required: "Select the Deparment"},
            ddl_sub_department: {required: "Select the Sub Deparment"},
            dayWeekMonthFilter :{required: "Select the Payment Period"},
            // from_date : {required: "Select the From Date"},
            // to_date : {required: "Select the To Date"},
            ddl_month : {required: "Select the Month"},
            ddl_year : {required: "Select the Year"},
            ddl_financialQuarterly : {required: "Select the Financial Quarterly"},
            ddl_calendarQuarterly : {required: "Select the Calendar Quarterly"},
            ddl_half_yearly : {required: "Select the Half Year"},
          },
          errorClass: "help-inline text-danger",
          errorElement: "span",
          highlight: function(element, errorClass, validClass) {
              $(element).parents('.form-group').addClass('has-error');
          },
          unhighlight: function(element, errorClass, validClass) {
              $(element).parents('.form-group').removeClass('has-error');
              $(element).parents('.form-group').addClass('has-success');
          },
          submitHandler: function(form,e) {
              e.preventDefault();
              // console.log('Form submitted');
              formsFilter.length = 0;
              formsFilter = [];
              var formData = $(form).serialize();
              window.localStorage.removeItem('filters');
              window.localStorage.setItem('filters', JSON.stringify(formData));
              // window.localStorage.setItem('filters', formData);
              // var tabId = $('#approvelpayment').val();
              // if(tabId==''){tabId = 0;}
              // tabClickValue(tabId);

              
              
              $('#lable_text_scheme_cate').text($('#ddl_scheme_cate').val());
              $('#lable_text_scheme_code').text($('#ddl_scheme_code').val());
              $('#lable_text_scheme').text($('#ddl_scheme_name').val());
              $('#lable_text_sub_scheme').text($('#ddl_sub_scheme').val());

              $('#lable_text_Department').text($("#ddl_department option:selected").text());
              $('#lable_text_sub_department').text($("#ddl_sub_department option:selected").text());
              
              
              let paymentPrioedVal = $('#dayWeekMonthFilter').val();
              let yyyy = '';
              let mm = '';
              

              if(paymentPrioedVal == 'mm'){
                 mm= $('#ddl_month').val()+' - '+$('#ddl_month option:selected').text();
                 yyyy = $('#ddl_year').val();
              }else if(paymentPrioedVal == 'fq'){
                mm = $("#ddl_financialQuarterly option:selected").text();
                yyyy = $('#ddl_year').val();
              }else if(paymentPrioedVal == 'cq'){
                mm = $("#ddl_calendarQuarterly option:selected").text();
                yyyy = $('#ddl_year').val();
              }else if(paymentPrioedVal == 'h'){
                mm = $("#ddl_half_yearly option:selected").text();
                yyyy = $('#ddl_year').val();
              }

              $('#lable_text_payment_period').text($("#dayWeekMonthFilter option:selected").text());
              
              $('#lable_text_year').text(yyyy);
              $('#lable_text_month').text(mm);
            
              $('#filter_based_info_card_div').show();
              $('#tblCard').show();
              $('#btnfilter').click();

              let currentTabValue = $('#current_tab_value').val();

              tabClickValue(currentTabValue);

              // get_payment_report_list(0);
              
              
              // $("#tblCard").show();
              /*scroll function*/
              // $('html, body').animate({
              //   scrollTop: $("#tblCard").offset().top
              // }, 2000);

              return false;
          }
    });
});

$('#tblPaymentReportsList_taluk').hide();

function tabClickValue(tabID){
  $('#current_tab_value').val(tabID);
  let value = $('#current_tab_value').val();
  if(tabID==0){
    $('#tblPaymentReportsList_taluk').hide();
    $('#checkTaluk').prop('checked', false);
    get_payment_report_list(0);
  }else if(tabID==1){
    $('#tblPaymentFailedReasonReportsList_failed_taluk').hide();
    $('#checkTaluk_failed').prop('checked', false);
    // get_file_based_failur_response(0);
  }
}




$('#checkTaluk').on('change', function() {
  var input_schemCode = $('#ddl_scheme_code').val();
  var input_schemName = $('#ddl_scheme_name').val();
  var input_subScheme = $('#ddl_sub_scheme').val();
  var input_dep = $('#ddl_department').val();
  var input_subDep = $('#ddl_sub_department').val();
  var input_dateMonthYear = $('#dayWeekMonthFilter').val();
  
      if (input_schemCode !== '' && input_schemName !== '' && input_subScheme !== null && input_dep !== '' && input_subDep !== '' && input_dateMonthYear !== '') {
          if ($(this).prop('checked')) {
          get_payment_report_list(1);
          } else {
          get_payment_report_list(0);
          }
      }else{
        Swal.fire({
        icon: "error",
        title: 'Please Select Schemes And Payment Period',
        showConfirmButton: false,
        timer: 2000
        });
      }
});



// $('#checkTaluk_failed').on('change', function() {
//   var input_schemCode = $('#ddl_scheme_code').val();
//   var input_schemName = $('#ddl_scheme_name').val();
//   var input_subScheme = $('#ddl_sub_scheme').val();
//   var input_dep = $('#ddl_department').val();
//   var input_subDep = $('#ddl_sub_department').val();
//   var input_dateMonthYear = $('#dayWeekMonthFilter').val();
  
//       if (input_schemCode !== '' && input_schemName !== '' && input_subScheme !== null && input_dep !== '' && input_subDep !== '' && input_dateMonthYear !== '') {
//           if ($(this).prop('checked')) {
//           get_file_based_failur_response(1);
//           } else {
//           get_file_based_failur_response(0);
//           }
//       }else{
//         Swal.fire({
//         icon: "error",
//         title: 'Please Select Schemes And Payment Period',
//         showConfirmButton: false,
//         timer: 2000
//         });
//       }
// });






let totalgetReportRecords;


function get_payment_report_list(taluk_enable){
  var dataFilters = window.localStorage.getItem('filters');
  $('#preloader').show();
  let districtOrtalukWise;
  if(taluk_enable===1){
    $('#tblPaymentReportsList_taluk').show();
     districtOrtalukWise = [
            { "data": "S.No", render: function (data, type, row, meta) {
                return meta.row + meta.settings._iDisplayStart + 1;
                }
            },
            { "data": "district_name" },
            { "data": "taluk_name" },
            { "data": "received_dt"},
            { "data": "approved_dt"},
            { "data": "approved_dt"},

            { "data": "apb_beificiaries_count"},
            { "data": "apb_inprogress_count"},
            { "data": "apb_success_count"},
            { "data": "apb_failure_count"},

            { "data": "apb_beificiaries_amount"},
            { "data": "apb_inprogress_amount"},
            { "data": "apb_success_amount"},
            { "data": "apb_failure_amount"},

            { "data": "ach_beificiaries_count"},
            { "data": "ach_inprogress_count"},
            { "data": "ach_success_count"},
            { "data": "ach_failure_count"},

            { "data": "ach_beificiaries_amount"},
            { "data": "ach_inprogress_amount"},
            { "data": "ach_success_amount"},
            { "data": "ach_failure_amount"},

            { "data": "total_beificiaries_count" },
            { "data": "total_inprogress_count" },
            { "data": "total_success_count" },
            { "data": "total_failure_count" },

            { "data": "total_beificiaries_amount" },
            { "data": "total_inprogress_amount" },
            { "data": "total_success_amount" },
            { "data": "total_failure_amount" },
        ]
  }else{
    $('#tblPaymentReportsList_taluk').hide();
    districtOrtalukWise = [
            { "data": "S.No", render: function (data, type, row, meta) {
                return meta.row + meta.settings._iDisplayStart + 1;
                }
            },
            { "data": "district_name"},
            { "data": "received_dt"},
            { "data": "approved_dt"},
            { "data": "approved_dt"},

            { "data": "apb_beificiaries_count"},
            { "data": "apb_inprogress_count"},
            { "data": "apb_success_count"},
            { "data": "apb_failure_count"},

            { "data": "apb_beificiaries_amount"},
            { "data": "apb_inprogress_amount"},
            { "data": "apb_success_amount"},
            { "data": "apb_failure_amount"},

            { "data": "ach_beificiaries_count"},
            { "data": "ach_inprogress_count"},
            { "data": "ach_success_count"},
            { "data": "ach_failure_count"},

            { "data": "ach_beificiaries_amount"},
            { "data": "ach_inprogress_amount"},
            { "data": "ach_success_amount"},
            { "data": "ach_failure_amount"},

            { "data": "total_beificiaries_count" },
            { "data": "total_inprogress_count" },
            { "data": "total_success_count" },
            { "data": "total_failure_count" },

            { "data": "total_beificiaries_amount" },
            { "data": "total_inprogress_amount" },
            { "data": "total_success_amount" },
            { "data": "total_failure_amount" },
        ]
        
  }

    $('#tblPaymentReportsList').DataTable().clear().destroy();
    $('#tblPaymentReportsList').DataTable({
        "aLengthMenu": [10, 25, 50,100],
        "pageLength": -1,
        "footer": true,
        "dom": 'Bfrtip',
        "buttons": [
              {
                    extend: 'csv',
                    text: 'CSV',
                    filename: 'Payment Lists',
                    exportOptions: {
                        rows: ':visible', // Export visible rows
                        modifier: {
                            selected: null // Export all rows, not just selected
                        }
                    }
                },
                {
                    extend: 'excel',
                    text: 'Excel',
                    filename: 'Payment Lists' // Set custom filename for Excel
                }
        ],
        "searching": true,
        "processing": true,
        "serverSide": true,
        "ajax": {
            "url": APIURL + 'get_payment_report_list',
            "type": "POST",
            "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
            "dataType": "JSON",
            data: {
              fileters:dataFilters,
              user_id:loginUser_id,
              taluk_enable:taluk_enable
            },
          "beforeSend": function () {
            // $('#preloader').show();
            tblPreloaderEnable('tblPaymentReportsList');
          },
          "error": function (xhr, error, thrown) {
                Swal.fire({
                    icon: "error",
                    title: 'Service Error !',
                    showConfirmButton: false,
                    timer: 2000
                });
            },
            "dataSrc": 'data',
          },
        "columns": districtOrtalukWise,
        "drawCallback": function (settings) {
            // Your drawCallback logic goes here
            // For example, updating dropdowns or other elements after the table is drawn
        },
        "initComplete": function (settings, json) {
         $('#preloader').hide();
            totalgetReportRecords = json.recordsTotal;
          $('#accordionExample .accordion-collapse').collapse('show');
        }
    });  
}


                      
// function get_file_based_failur_response(taluk_enable){
//   var dataFilters = window.localStorage.getItem('filters');
//   $('#preloader').show();
//   let districtOrtalukWise;
//   if(taluk_enable===1){
//     $('#tblPaymentFailedReasonReportsList_failed_taluk').show();
//      districtOrtalukWise = [
//             { "data": "S.No", render: function (data, type, row, meta) {
//                 return meta.row + meta.settings._iDisplayStart + 1;
//                 }
//             },
//             { "data": "district_name"},
//             { "data": "taluk_name"},
//             { "data": "payment_mode"},
//             { "data": "status"},
//             { "data": "reasoncode"},
//             { "data": "remarks"},
//             { "data": "beneficiaries"},
//             { "data": "amount"}
//         ]
//   }else{
//     $('#tblPaymentFailedReasonReportsList_failed_taluk').hide();
//     districtOrtalukWise = [
//             { "data": "S.No", render: function (data, type, row, meta) {
//                 return meta.row + meta.settings._iDisplayStart + 1;
//                 }
//             },
//             { "data": "district_code"},
//             { "data": "district_name"},
//             { "data": "payment_mode"},
//             { "data": "status"},
//             { "data": "reasoncode"},
//             { "data": "remarks"},
//             { "data": "beneficiaries"},
//             { "data": "amount"}
//         ]
        
//   }

//     $('#tblPaymentFailedReasonReportsList').DataTable().clear().destroy();
//     $('#tblPaymentFailedReasonReportsList').DataTable({
//         "aLengthMenu": [10, 25, 50,100],
//         "pageLength": -1,
//         "footer": true,
//         "dom": 'Bfrtip',
//         "buttons": [{
//                 extend: 'csv',
//                 text: 'CSV',
//                 filename: 'Payment Lists',
//                 exportOptions: {
//                     rows: ':visible', // Export visible rows
//                     modifier: {
//                         selected: null // Export all rows, not just selected
//                     }
//                 }
//             },
//             {
//                 extend: 'excel',
//                 text: 'Excel',
//                 filename: 'Payment Lists' // Set custom filename for Excel
//             }],
//         "searching": true,
//         "processing": true,
//         "serverSide": true,
//         "ajax": {
//             "url": APIURL + 'get_file_based_failur_summary',
//             "type": "POST",
//             "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
//             "dataType": "JSON",
//             data: {
//               fileters:dataFilters,
//               user_id:loginUser_id,
//               taluk_enable:taluk_enable
//             },
//           "beforeSend": function () {
//             // $('#preloader').show();
//             tblPreloaderEnable('tblPaymentFailedReasonReportsList');
//           },
//           "error": function (xhr, error, thrown) {
//                 Swal.fire({
//                     icon: "error",
//                     title: 'Service Error !',
//                     showConfirmButton: false,
//                     timer: 2000
//                 });
//             },
//             "dataSrc": 'data',
//           },
//         "columns": districtOrtalukWise,
//         "drawCallback": function (settings) {
//             // Your drawCallback logic goes here
//             // For example, updating dropdowns or other elements after the table is drawn
//         },
//         "initComplete": function (settings, json) {
//          $('#preloader').hide(); 
//             totalgetReportRecords = json.recordsTotal;
//           $('#accordionExample .accordion-collapse').collapse('show');
//         }
//     });  
// }


function populateDropdown(dropdownId, data, fieldName) {
    const dropdown = document.getElementById(dropdownId);

    data.forEach(item => {
      const option = document.createElement('option');
      option.value = item[fieldName + '_code'];
      option.textContent = item[fieldName + '_name'];
      dropdown.appendChild(option);
    });
  }



  $('#selectAllCheckbox').on('change', function () {
    // console.log($(this).prop('checked'));
      $('tbody :checkbox').prop('checked', $(this).prop('checked'));
  });
  
  $('#selectAllCheckbox2').on('change', function () {
    // console.log($(this).prop('checked'));
      $('tbody :checkbox').prop('checked', $(this).prop('checked'));
  });

  $('#selectAllCheckbox3').on('change', function () {
    // console.log($(this).prop('checked'));
      $('tbody :checkbox').prop('checked', $(this).prop('checked'));
  });



function viewScheme(listID){
  $('#preloader').show();
  $.ajax({
    url: APIURL + 'viewpopupData', // Replace with your API endpoint
    method: 'POST', // Change the method to GET
    headers: {
        'X-APP-KEY': config.app_key,
        'X-APP-NAME': config.app_name
    },
    data: {
      list_id: listID
    },
    dataType: 'json',
    success: function (response) {
      $('#preloader').hide();
        if (response.success == 1) {
            output = response.data[0];
            $('#popup_head').text(output.beneficiary_name);
            $('#popup_scheme').text(output.scheme_name);
            $('#popup_year').text(output.year_part);
            $('#popup_month').text(output.Month);
            $('#popup_beneficiary_name').text(output.beneficiary_name);
            $('#popup_beneficiary_mobile').text(output.beneficiary_mobile_no);
            $('#popup_account_type').text(output.payment_mode);
            $('#popup_installment').text(output.installment_id);
            $('#popup_amount').text(output.amount);
            $('#popup_transcation').text(output.created_ts);

            // console.log();
              var activeColStart = `<div class="col-lg-6">`;
              var activeColStart = `</div>`;
              var activeTitleOne = `<h5 class="card-title mb-2 px-2"><i class="bi bi-check2-circle"></i> Activity</h5>`;
              var activeTitletwo = `<h5 class="card-title mb-2 px-2"><i class="bi bi-check2-circle"></i> Re-Initiate Activity</h5>`;

              var transcation = `<div class="activity">${activeTitleOne}
                  <div class="activity-item d-flex">
                    <div class="activite-label">01</div>
                    <i class="bi bi-circle-fill activity-badge text-success align-self-start"></i>
                    <div class="activity-content">
                      Transcation by <span class="text-danger">Jayachandran</span>, <small>${output.created_ts}</small> <span class="badge text-bg-primary">Pending</span>
                    </div>
                  </div>

                  <div class="activity-item d-flex">
                    <div class="activite-label">02</div>
                    <i class="bi bi-circle-fill activity-badge text-success align-self-start"></i>
                    <div class="activity-content">
                      Transcation by <span class="text-danger">Jayachandran</span>, <small>${output.approved_ts}</small> <span class="badge text-bg-primary">Approved</span>
                    </div>
                  </div>
              </div>`;

              $('#check_activity').html(transcation);

        } else if (response.success == 0) {
            Swal.fire({
                icon: "error",
                title: response.message,
                showConfirmButton: false,
                timer: 2000
            })
        }
    },
    error: function () {
      $('#preloader').hide();
      Swal.fire({
          icon: "error",
          title: "Service Error!",
          showConfirmButton: false,
          timer: 2000
      })
    }
  });
}

function generateUniqueId() {
  const timestamp = new Date().getTime();
  // const random = Math.floor(Math.random() * 1000); // Adjust the range as needed
  return `${timestamp}`;//${random}
}


function tblPreloaderEnable(tableName){
      var processingDiv = document.getElementById(tableName+'_processing');
      var displayStatus = window.getComputedStyle(processingDiv).display;
      if (displayStatus === 'block') {
      $('#'+tableName+'_processing').html(`<div id="preloader"></div>`);
      } else {
        $('#'+tableName+'_processing').text(`<div id="preloader"></div>`);
      }
}



var generate_payment_enable = window.localStorage.getItem('generate_payment_enable');
var transfer_payment_enable = window.localStorage.getItem('transfer_payment_enable');

if(generate_payment_enable === 'true'){
  // triggerScript('generate_payment_file_cnrt');
  $('#generate_payment_real_btn').hide();
  $('#generate_payment_status').addClass('d-inline');
  $('#generate_payment_status').show();
  $('#generate_payment_disable_btn').show();
}

if(transfer_payment_enable === 'true'){
  // triggerScript2('transfer_payment_file')
    $('#transfer_payment_status').addClass('d-inline');
    $('#transfer_payment_status').show();
    $('#transfer_payment_disable_btn').show();
    $('#transfer_payment_enable').hide();
}


// function get_payment_report_xlsx(){
  
//   var totalRecords = totalgetReportRecords;
//   var dataFilters = window.localStorage.getItem('filters');
//   let checkboxtaluk = $('#checkTaluk').prop('checked');
//   let talukCheckbocStatus;

//   if(checkboxtaluk){
//     talukCheckbocStatus = 1;
//   }else{
//     talukCheckbocStatus = 0;
//   }
  
//   if(totalRecords == 0 || totalRecords == undefined || totalRecords == null){
//     Swal.fire({
//           icon: "error",
//           title: "Report Data is Empty",
//           showConfirmButton: false,
//           timer: 2000
//       })
//       return false;
//   }
  
//   $('#preloader').show();

//   $.ajax({
//        url: APIURL +'get_all_payment_report_list',
//        type: "POST",
//        headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
//        data: {total_list_count:totalRecords,fileters:dataFilters,user_id:loginUser_id,taluk_enable:talukCheckbocStatus},
//        success: function(response) {
//         if(response.success ==1){
//             // console.log('get Report Record all', response.data);
//             exportJsonToExcel(response.data,'payment report');
//         }else{
//             Swal.fire({
//             icon: "error",
//             title: "Data Not Found !",
//             showConfirmButton: false,
//             timer: 2000
//           })
//             console.log('get report is data not found');
//         }
//        },
//        error: function(xhr, status, error) {
//         $('#preloader').hide();
//            console.log("Error:", error);
//        }
//      });
// }


// function get_payment_report_csv(){
//   console.log(totalgetReportRecords);
//   var totalRecords = totalgetReportRecords;
//   var dataFilters = window.localStorage.getItem('filters');
//   let checkboxtaluk = $('#checkTaluk').prop('checked');
//   let talukCheckbocStatus;

//   if(checkboxtaluk){
//     talukCheckbocStatus = 1;
//   }else{
//     talukCheckbocStatus = 0;
//   }
  
//   if(totalRecords == 0 || totalRecords == undefined || totalRecords == null){
//     Swal.fire({
//           icon: "error",
//           title: "Report Data is Empty",
//           showConfirmButton: false,
//           timer: 2000
//       })
//       return false;
//   }
  
//   $('#preloader').show();
  
//   $.ajax({
//        url: APIURL +'get_all_payment_report_list',
//        type: "POST",
//        headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
//        data: {total_list_count:totalRecords,fileters:dataFilters,user_id:loginUser_id,taluk_enable:talukCheckbocStatus},
//        success: function(response) {
//         if(response.success ==1){
//             convertJsonToCsv(response.data,'payment report');
//         }else{
//           Swal.fire({
//           icon: "error",
//           title: "Data Not Found !",
//           showConfirmButton: false,
//           timer: 2000
//         })
//             console.log('get report is data not found');
//         }
//        },
//        error: function(xhr, status, error) {
//         $('#preloader').hide();
//            console.log("Error:", error);
//        }
//      });

// }
// $('#csv_btn').on('click',function(){
  // alert('click pdf btn');
  $('#preloader').show();
  
// });





window.jsPDF = window.jspdf.jsPDF;

// function exportJsonToPdf(jsonData, file_name) {
//     var columns = Object.keys(jsonData[0]);
//     var rows = jsonData.map(obj => columns.map(key => obj[key]));

   
//     var pdf = new jsPDF({
//         orientation: 'landscape'
//     });

//     console.log('bind column row');
//     console.log(columns);
//     console.log(rows);

   
//     // pdf.setFontSize(18);
//     // pdf.text(30, 20, 'Table');

   
//     pdf.setFontSize(2);
//     pdf.setFont('helvetica', 'normal');

   
//       pdf.autoTable({
//       startY: 20, // Adjust starting Y position
//       head: [columns], // Header row
//       body: rows, // Body rows
//       styles: {  // Styling options
//         fontSize: 10,
//         cellPadding: 5,
//         cellHeight: 20,
//       },
//       columnStyles: { // Column-specific styles
//         // Example:
//         0: { cellWidth: 50 }
//       },
//       headStyles: { // Header styles
//         fillColor: [200, 200, 200],
//       }
//       });

//         // pdf.setFontSize(18);
//         // pdf.text(20, 10, 'Table Title');
//     pdf.save(file_name + '.pdf');

   
//     $('#preloader').hide();
// }


function exportJsonToExcel(jsonData, file_name) {
  var data = jsonData.map(obj => Object.values(obj));
  var ws = XLSX.utils.aoa_to_sheet([Object.keys(jsonData[0])].concat(data));
  var wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');
  var binaryData = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'binary' });
  var blob = new Blob([s2ab(binaryData)], { type: 'application/octet-stream' });
  saveAs(blob, file_name + '.xlsx');
  $('#preloader').hide();
}

function s2ab(s) {
  var buf = new ArrayBuffer(s.length);
  var view = new Uint8Array(buf);
  for (var i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;
  return buf;
}

function convertJsonToCsv(jsonData,filename) {
    // Extract column headers from the first object
    let columns = Object.keys(jsonData[0]);

    // Create CSV content
    let csvContent = [
        columns.join(','), // Header row
        ...jsonData.map(obj => columns.map(col => obj[col]).join(',')) // Data rows
    ].join('\n');

    // return csvContent;

    let blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    let link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.setAttribute('download', filename+'.csv');
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

function getYearMonth(dateStr) {
    // Parse the date string into a Date object
    var dateObj = new Date(dateStr);

    // Extract the year and month from the Date object
    var year = dateObj.getFullYear();
    // JavaScript months are zero-based, so add 1 to get the correct month
    var month = dateObj.getMonth() + 1;

    // Add leading zero if month is a single digit
    var monthStr = month < 10 ? '0' + month : month.toString();

    return { year: year, month: monthStr };
}

// Function to process both from and to dates
function processDates(fromDateStr, toDateStr) {
    var fromDate = getYearMonth(fromDateStr);
    var toDate = getYearMonth(toDateStr);

    return {
        from: fromDate,
        to: toDate
    };
}


function getStartAndEndDate(year, month) {
  if (isNaN(year) || isNaN(month) || month < 1 || month > 12) {
    return "Invalid input";
  }
  const startDate = new Date(year, month - 1, 1);
  const endDate = new Date(year, month, 0);
  
  return { startDate, endDate };
  
}

function convertLengthtoDate(startDate){

var day = startDate.getDate();
var month = startDate.getMonth() + 1; 
var year = startDate.getFullYear();

var dayFormatted = (day < 10) ? "0" + day : day;
var monthFormatted = (month < 10) ? "0" + month : month;

var formattedDate = year + "-" + monthFormatted + "-" + dayFormatted;
return formattedDate;

}


$("#ddl_month, #ddl_year").on('change', function(){
  var currentMonthAndYear = checkCurrentMonth();
  var selectedMonth = $("#ddl_month").val();
  var selectedYear = $("#ddl_year").val();

  if(selectedYear && selectedMonth){
    if(currentMonthAndYear.currentYear > selectedYear || 
      (currentMonthAndYear.currentYear == selectedYear && currentMonthAndYear.currentMonth >= selectedMonth)) {
      // alert('This is correct');
    } else {
      alert('Default selection is set to the previous and current month of the current year');
        $('#ddl_month').val(currentMonthAndYear.currentMonth);
        $('#ddl_year').val(currentMonthAndYear.currentYear);
    }
  }

});

function checkCurrentMonth() {
  var currentDate = new Date();
  var currentMonth = currentDate.getMonth() + 1; 
  var currentYear = currentDate.getFullYear().toString();

  return {
    'currentMonth': currentMonth < 10 ? '0' + currentMonth : currentMonth.toString(),
    'currentYear': currentYear
  };
}




</script>
</body>
</html>