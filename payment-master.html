<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Payment Automation Dashboard</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    <!-- Favicons -->
    <link href="assets/img/tn_logo.png" rel="icon">
    <link href="assets/img/tn_logo.png" rel="apple-touch-icon">
    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
    
   
    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css'>
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> -->
    <link rel="stylesheet" href="assets/vendor/sweetalert2/css/sweetalert.min.css" />
    <link rel="stylesheet" href="assets/vendor/sweetalert2/css/sweetalert2.min.css" />
    <!-- <link rel="stylesheet" href="assets/vendor/toggle/bootstrap-toggle.min.css" /> -->
    <!-- CSS File --> 
    <link href="assets/css/style.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css"> -->
    <script src="assets/components/official_header.js" type="text/javascript" defer></script>
  </head>
  <body>
    <style>
      .bootstrap-select:not([class*=col-]):not([class*=form-control]):not(.input-group-btn){
          width: 100%!important;
          border: 1px solid #ced4da;
          padding: 0.09rem;
          border-radius: 5px;
      }
      .bi-diagram-3::before {
    content: "\f2ee";
    transform: rotate(270deg);
    font-size: 1.2rem;
}
    </style>
    <!-- ======= Header & sidemenu ======= -->
    <official-header-component></official-header-component>
    <div id="preloader"></div>
    <!-- ======= Header & sidemenu ======= -->

    <main id="main" class="main">

      <!-- Dashboard view starts -->
      <section>
        <div class="container-fluid">
       
          <!-- END: Dropdown card end here -->
          <div class="card1 mb-2 mt-3">
            <div class="card-body1">
              <form id="schemeRegister" method="post">
                <div class="card mb-2 mt-3">
                  <div class="card-body">
                    <div class="row mb-2">
                      <h5 class="card-title pb- mb-0"><i class="bi bi-check2-circle"></i>  Payment Master </h5>
                      <div class="col-md-4 mb-2">
                        <label for="scheme_cate_list" class="form-label fw-bold">Scheme category</label>
                        <select name="scheme_cate_list" id="scheme_cate_list" class="form-select">
                        </select>
                      </div>
                      <div class="col-md-4 mb-2">
                        <label for="scheme_code_list" class="form-label fw-bold">Scheme Code</label>
                        <select name="scheme_code_list[]" id="scheme_code_list" class="selectpicker" multiple aria-label="Default select example" data-live-search="true">
                          <option disabled selected>select Scheme Code</option>
                        </select>
                      </div>
                      <div class="col-md-4 mb-2">
                        <label for="sub_scheme_list" class="form-label fw-bold">Sub Scheme</label>
                        <select name="sub_scheme_list[]" id="sub_scheme_list" class="selectpicker" multiple aria-label="Default select example" data-live-search="true">
                          <option disabled selected>select Sub Scheme</option>
                        </select>
                      </div>
                      <hr>
                      <div class="col-md-4 mb-2">
                        <label for="payment_cycle" class="form-label fw-bold">Payment Cycle</label>
                        <select name="payment_cycle" id="payment_cycle" class="form-select">
                          <option disabled selected>select payment cycle</option>
                        </select>
                      </div>
                      <div class="col-md-4 mb-2">
                        <label for="month_list" class="form-label fw-bold">Select Strat Month</label>
                        <select name="month_list" id="month_list" class="form-select">
                          <option disabled selected>select Month</option>
                        </select>
                      </div>
                      <div class="col-md-4 mb-2">
                        <label for="year_list" class="form-label fw-bold">Select Year</label>
                        <select name="year_list" id="year_list" class="form-select">
                          <option disabled selected>select Year</option>
                          <option vlaue="2023">2023</option>
                          <option vlaue="2024">2024</option>
                        </select>
                      </div>
                      <hr>
                      <div class="col-md-6 mb-2">
                        <label for="installment_list" class="form-label fw-bold">Select Installment</label>
                        <select name="installment_list" id="installment_list" class="form-select">
                          <option disabled selected>select installment</option>
                        </select>
                      </div>
                      <div class="col-md-6 mb-2">
                        <label for="payment_mode_list" class="form-label fw-bold">Payment Method</label>
                        <select name="payment_mode_list" id="payment_mode_list" class="form-select">
                          <option disabled selected>select Payment Mode</option>
                        </select>
                      </div>
                    </div>
                  
                  </div>
                </div>
                <div class="col-md-12 text-center mt-3 mb-5">
                    <!-- <a class="btn btn-success cbtn"><i class="bi bi-pencil-square"></i> Create</a> -->
                    <button class="btn btn-success cbtn" type="submit"><i class="bi bi-diagram-3"></i> Created Mapping</button>
                </div>
                <input type="hidden" name="UserID" id="UserID">
                <input type="hidden" name="department_text" id="department_text">
                <input type="hidden" name="sub_department_text" id="sub_department_text">
              </form>
              </div>
            </div>
          <!-- END: list card end here -->
          <!-- START: modal popup -->
          <!-- Button trigger modal -->
        </div>
      </section>
    </main>
    <!-- End #main -->
    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
      <div class="copyright">
        &copy; Copyright <strong><span>TNeGA</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Designed & Developed by <a href="https://tngis.tn.gov.in/" target="_blank">TNeGA</a>
      </div>
    </footer>
    <!-- End Footer -->
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <!-- Delete modal starts -->
    <!-- view crop info ends -->
    <!-- Vendor JS Files -->
    
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script> -->

    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js'></script>

    <script src="assets/js/main.js"></script>
    <!-- <script src="assets/vendor/multiselect/js/multiselect.js"></script> -->
     
      <script type="text/javascript" src="assets/vendor/jquery-validate/js/jquery.validate.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert2.all.min.js"></script>
    <script type="text/javascript" src="assets/vendor/toastr/toastr.min.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/global.js"></script>
    <script src="assets/js/base64tojson.js"></script>
    <script src="assets/js/crypto-js.js"></script>
    <script src="assets/js/aes.js"></script>
  
    <!-- Crypto js -->
    <script src="assets/vendor/encryption/crypto-js.min.js"></script>
    <!-- Encryption js -->
    <script src="assets/vendor/encryption/Encryption.js"></script>
   


    
    <script type="text/javascript">
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>

<script type="text/javascript">
    $(document).on({
           ajaxStart: function () {
             $('#preloader').show();
            //  console.log('preloader is show');
           },
           ajaxStop: function () {
             $('#preloader').hide();
            //  console.log('preloader is show');
           }
         });
  var url = window.location.href;
  var page_url = url.split('/');
  var page = page_url[4];

  var userDataString = getCookie('payment_official');
  userDataString = JSON.parse(userDataString);
  window.loginUser_id = userDataString['user_id'];
  
  reloID = userDataString['role_id'];
  roleBasedPageAllow(loginUser_id,reloID);
  
  $(document).ready(function () {
    $('.official').each(function (i, obj) {
      var href = obj.getAttribute("href");
      if (href == page) {
        obj.classList.add('active');
      } else {
        obj.classList.remove('active');
      }
    });
    $('#preloader').hide();
    
    var userDataString = getCookie('payment_official');
    if (!userDataString) {
      $('#preloader').show();
      window.location.href = "login.html";
    }

    userDataString = JSON.parse(userDataString);
    $('#official_username').text(userDataString['first_name']);
    $('#UserID').val(userDataString['user_id']);
  });

  function getCookie(name) {
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        if (cookie.startsWith(name + '=')) {
          return cookie.substring(name.length + 1);
        }
      }
      return null;
    }
</script>
<script>
$(document).ready(function() {
  
  setTimeout(() => {
    $('#schemeRegister').trigger("reset");
  },500);



  $("#schemeRegister").validate({
        rules: {
            
        },
        messages: {
          
        },
        errorClass: "help-inline text-danger",
        errorElement: "span",
        highlight: function(element, errorClass, validClass) {
            $(element).parents('.form-group').addClass('has-error');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).parents('.form-group').removeClass('has-error');
            $(element).parents('.form-group').addClass('has-success');
        },
        submitHandler: function(form,e) {
            e.preventDefault();
            // console.log('Form submitted');
            // $.ajax({
            //     type: 'POST',
            //     headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
            //     url: APIURL +'create_scheme',
            //     dataType: "html",
            //     data: $('form').serialize(),
            //     success: function(response) {
            //        var result = JSON.parse(response);
            //         if(result.success==1){
            //           console.log('success');
            //           console.log(result);
            //           Swal.fire({
            //             icon: "success",
            //             title: result.message,
            //             showConfirmButton: false,
            //             timer: 2000
            //           });
            //           window.location.href = "scheme-list.html";
            //         }else{
            //           console.log('Error');
            //           console.log(result);
            //           Swal.fire({
            //             icon: "error",
            //             title: result.message,
            //             showConfirmButton: false,
            //             timer: 2000
            //           });
            //         }
            //     },
            //     error : function(error) {
            //       Swal.fire({
            //             icon: "error",
            //             title: error,
            //             showConfirmButton: false,
            //             timer: 2000
            //           })
            //     }
            // });
            return false;
        }
  });
});



let scheme_cate = [
  {"id":1,"scheme_cate":"cate 1"},
  {"id":2,"scheme_cate":"cate 2"},
  {"id":3,"scheme_cate":"cate 3"},
  {"id":4,"scheme_cate":"cate 4"},
  {"id":5,"scheme_cate":"cate 5"},
  ];


let scheme_code = [
  {"scheme_cate_id":1,"id":1,"scheme_code":"2033211"},
  {"scheme_cate_id":1,"id":2,"scheme_code":"2033212"},
  {"scheme_cate_id":1,"id":3,"scheme_code":"2033213"},
  {"scheme_cate_id":1,"id":4,"scheme_code":"2033214"},
  {"scheme_cate_id":1,"id":5,"scheme_code":"2033215"},
  {"scheme_cate_id":1,"id":6,"scheme_code":"2033216"},
  {"scheme_cate_id":2,"id":7,"scheme_code":"2033217"},
  {"scheme_cate_id":2,"id":8,"scheme_code":"2033218"},
  {"scheme_cate_id":3,"id":9,"scheme_code":"2033219"},
  {"scheme_cate_id":3,"id":10,"scheme_code":"20332110"},
  {"scheme_cate_id":3,"id":11,"scheme_code":"20332111"},
  {"scheme_cate_id":4,"id":12,"scheme_code":"20332112"},
  {"scheme_cate_id":4,"id":13,"scheme_code":"20332113"},
  {"scheme_cate_id":4,"id":14,"scheme_code":"20332114"},
  {"scheme_cate_id":5,"id":15,"scheme_code":"20332115"},
];

let subScheme = [
  {scheme_code_id:1,text:"sub_scheme 1",id:1},
  {scheme_code_id:1,text:"sub_scheme 2",id:2},
  {scheme_code_id:1,text:"sub_scheme 3",id:3},
  {scheme_code_id:2,text:"sub_scheme 4",id:4},
  {scheme_code_id:2,text:"sub_scheme 5",id:5},
  {scheme_code_id:2,text:"sub_scheme 6",id:6},
  {scheme_code_id:3,text:"sub_scheme 7",id:7},
  {scheme_code_id:3,text:"sub_scheme 8",id:8},
  {scheme_code_id:3,text:"sub_scheme 9",id:9},
  {scheme_code_id:4,text:"sub_scheme 10",id:10},
  {scheme_code_id:4,text:"sub_scheme 11",id:11},
  {scheme_code_id:5,text:"sub_scheme 12",id:12},
];


let months = [
  { text: "Jan", value: 1 },{ text: "Feb", value: 2 },{ text: "Mar", value: 3 },{ text: "Apr", value: 4 },{ text: "May", value: 5 },{ text: "Jun", value: 6 },{ text: "Jul", value: 7 },{ text: "Aug", value: 8 },{ text: "Sep", value: 9 },{ text: "Oct", value: 10 },{ text: "Nov", value: 11 },{ text: "Dec", value: 12 }
];



let paymentCycle = [
{text:"Monthly","id":1},{text:"Quaterly","id":2},{text:"Half-Yearly","id":3},{text:"Yearly","id":4},{text:"one time","id":5},
];

let installment = [
  {text:"1",id:1},{text:"2",id:2},{text:"3",id:3}
];
let paymentMethod = [
  {text:"APB",id:1},{text:"ACH",id:2},{text:"Hybrid",id:3}
];

getMonthList(months);
getSchemeCateList(scheme_cate);
getPaymentCycleList(paymentCycle);
getinstallmentList(installment);
getpaymentmethod(paymentMethod);


$('#scheme_code_list').selectpicker('refresh');

function getSchemeCateList(list){
  autoSelecteValues(list,'#scheme_cate_list','id','scheme_cate','select the Scheme Cate',true);
}

function getMonthList(list){
  autoSelecteValues(list,'#month_list','value','text','select the month',true);
}

function getPaymentCycleList(list){
  autoSelecteValues(list,'#payment_cycle','id','text','select the Pament cycle',true);
}

function getinstallmentList(list){
  autoSelecteValues(list,'#installment_list','id','text','select the Pament cycle',true);
}

function getpaymentmethod(list){
  autoSelecteValues(list,'#payment_mode_list','id','text','select the Pament cycle',true);
}

// function get_sub_scheme(list){
  
//   $('#scheme_code_list').selectpicker('refresh');
// }


$('#scheme_cate_list').on('change',function(){
  let selected_id = parseInt($(this).val());

  autoSelecteValues(subScheme,'#sub_scheme_list','id','text','select the Sub Scheme',false,'scheme_cate_id', selected_id);

  $('#scheme_code_list').selectpicker('refresh');
});

$('#scheme_cate_list').on('change',function(){
  let selected_id = parseInt($(this).val());
  autoSelecteValues(scheme_code,'#scheme_code_list','id','scheme_code','select the Scheme Code',false,'scheme_cate_id', selected_id);
  $('#scheme_code_list').selectpicker('refresh');
});



function autoSelecteValues(datas,elementid,bindValue,bindtext,defultOption, firstOption,filterKey = null, filtervalue = null){
  let dataArr=[];
  $(elementid).empty();

  if(firstOption){
    $(elementid).append($('<option>', {value: "",text: defultOption}).attr('disabled','true').attr('selected','selected'));
  }
  
      // Iterate over the JSON object and append options
      if (filterKey !== null && filtervalue !== null) {
        dataArr = datas.filter(item => item[filterKey] === filtervalue);
      }else{
        dataArr =datas;
      }
    $.each(dataArr, function (index, data) {
          if(dataArr.length==1){
            $(elementid).append($('<option>', {value: data[bindValue], text: data[bindtext]})
            .attr('selected','selected'));
            $(elementid).change();
          }else{
                $(elementid).append($('<option>', {value: data[bindValue],text: data[bindtext]}));
          }
    });
}


</script>
  </body>
</html>