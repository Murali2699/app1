<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Payment Automation Dashboard</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    
    <link href="assets/img/tn_logo.png" rel="icon">
    <link href="assets/img/tn_logo.png" rel="apple-touch-icon">
    <link href="https:
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
     
    <link href="assets/css/style.css" rel="stylesheet">
    <official-header-component></official-header-component>
    <div id="preloader"></div> 
    <main id="main" class="main">
      
      <section>
        <div class="container-fluid">
          <div class="card mb-1">
            

            <form id="formFilters" method="post">
              <div class="card-body pb-0 pt-2">
                 <div class="accordion" id="accordionExample">
                    <div class="accordion-item">
                       <h2 class="accordion-header">
                          <button id="btnfilter" style="    background: linear-gradient(to right, rgb(44 43 88), rgb(34 25 111)) !important;
                             color: #fff !important;" class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                          <i class="bi bi-funnel"></i>  <span class="px-2">Apply Filter</span>
                          </button>
                       </h2>
                       <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                          <div class="accordion-body w-100">
                             <div class="row mb-2 boxflex">
                                <div class="col-md-3">
                                   <label for="ddl_scheme_cate" class="form-label fw-bold">Scheme category</label>
                                   <select class="form-select" id="ddl_scheme_cate" name="ddl_scheme_cate">
                                      <option value="">--Select--</option>
                                   </select>
                                </div>
                                   <label for="ddl_scheme_code" class="form-label fw-bold">Scheme Code</label>
                                   <select class="form-select" id="ddl_scheme_code" name="ddl_scheme_code"><option value="">--Select--</option></select>
                                   <label for="ddl_scheme_name" class="form-label fw-bold">Scheme Name</label>
                                   <select class="form-select" id="ddl_scheme_name" name="ddl_scheme_name">
                                   <label for="ddl_sub_scheme" class="form-label fw-bold">Sub Scheme Name</label>
                                   <select class="form-select" id="ddl_sub_scheme" name="ddl_sub_scheme">
                                   <label for="ddl_department" class="form-label fw-bold">Department</label>
                                   <select class="form-select" id="ddl_department" name="ddl_department">
                                   <label for="ddl_sub_department" class="form-label fw-bold">Sub Department</label>
                                   <select class="form-select" id="ddl_sub_department" name="ddl_sub_department">
                             </div>
                             <hr>
                               <div class="row mb-2 boxflex">
                                <div class="col-md" id="ddl_payment_cycle_col">
                                  <label for="from_date" class="form-label fw-bold mt-3">Payment Cycle</label>
                                  <p id="ddl_payment_cycle">Scheme Based Payment Period</p>
                                <div class="col-md" id="ddl_payment_period_col">
                                  <label for="from_date" class="form-label fw-bold">Select Payment Period</label>
                                  <select name="ddl_payment_period" id="ddl_payment_period" class="form-select">
                                    <option value="" disabled selected>Select Payment Period</option>
                                  </select>
                                <div class="col-md" id="ddl_payment_installment_col">
                                  <label for="from_date" class="form-label fw-bold">Select Installment</label>
                                  <select name="ddl_payment_installment" id="ddl_payment_installment" class="form-select">
                                    <option value="" disabled selected>Select Installment</option>
                                <div class="col-md" id="ddl_year_col">
                                  <label for="to_date" class="form-label fw-bold">Select Year - Month</label>
                                  <select name="ddl_year" id="ddl_year" class="form-select" data-live-search="true">
                                    <option value="" disabled selected>Select Year and month</option>
                              </div>
                               <hr>
                               <div class="row boxflex mb-3">
                                 <div class="col">
                                   <label for="ddl_district" class="form-label fw-bold">District</label>
                                   <select class="form-select" id="ddl_district" name="ddl_district" data-live-search="true"><option value="">--All--</option></select>
                                 </div>
                                   <label for="ddl_taluk" class="form-label fw-bold">Taluk</label>
                                   <select class="form-select" id="ddl_taluk" name="ddl_taluk" data-live-search="true"><option value="">--All--</option></select>
                                 </div>                                  
                               </div>
                                <button class="btn btn-success float-end cbtn col-md-2" type="submit"><i class="bi bi-pencil-square"></i> Submit</button>
                          </div>
                          
                       </div>
                    </div>
                 </div>
              </div>
              <input type="hidden" name="current_tab_value" id="current_tab_value" value="0">
              <input type="hidden" name="approvelpayment" id="approvelpayment">
              
            <input type="hidden" name="payment_cycle_hidden" id="payment_cycle_hidden">
            <input type="hidden" name="installment_txt_value" id="installment_txt_value">
           </form>
          </div>
          <div class="card mb-1 mt-2" id="filter_based_info_card_div">
            <div class="card-body pb-0 pt-2 bg-info-light">
              <div class="row">
                <div class="col">
                  <label class="form-label fw-bold font-custom-lable">Scheme Category</label>
                  <p id="lable_text_scheme_cate" class="text-left font-custom-text">KMUT</p>
                </div>
                  <label class="form-label fw-bold font-custom-lable">Scheme Code</label>
                  <p id="lable_text_scheme_code" class="text-left font-custom-text">CD94U</p>
                
                  <label class="form-label fw-bold font-custom-lable">Scheme Name</label>
                  <p id="lable_text_scheme" class="text-left font-custom-text">KALAINGAR MAHALIR URIMAI THITTAM</p>
                  <label class="form-label fw-bold font-custom-lable">Sub Scheme Name</label>
                  <p id="lable_text_sub_scheme" class="text-left font-custom-text">kmut</p>
                  <label class="form-label fw-bold font-custom-lable">Department</label>
                  <p id="lable_text_Department" class="text-left font-custom-text">Revenue And Disaster Management Department</p>
                  <label class="form-label fw-bold font-custom-lable">Sub Department</label>
                  <p id="lable_text_sub_department" class="text-left font-custom-text">Revenue Administration</p>
                  <label class="form-label fw-bold font-custom-lable">Payment Year-month</label>
                  <p id="lable_text_year_month" class="text-left font-custom-text"></p>
                  <label class="form-label fw-bold font-custom-lable">Payment Period</label>
                  <p id="lable_text_payment_period" class="text-left font-custom-text"></p>
                  <label class="form-label fw-bold font-custom-lable">installment</label>
                  <p id="lable_text_installment" class="text-left font-custom-text"></p>
                <div class="col"></div>
              </div>                   
            </div>
          <div class="card mb-2 mt-3" id="tblCard">
            <div class="card-body">
              <ul class="nav nav-tabs my-3" id="myTab" role="tablist">
                  <li class="nav-item mx-2" role="presentation">
                    <button class="nav-link active" id="upload-process-tab" data-bs-toggle="tab" data-bs-target="#upload-process-tab-pane" type="button" role="tab" aria-controls="upload-process-tab-pane" aria-selected="false" onclick="tabClickValue(7)">Pending for Validation</button>
                  </li>
                <li class="nav-item mx-2" role="presentation">
                  <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false" onclick="tabClickValue(0)">Pending for Approval</button>
                </li>
                  <button class="nav-link" id="disabled-tab1" data-bs-toggle="tab" data-bs-target="#disabled-tab-pane2" type="button" role="tab" aria-controls="disabled-tab-pane2" aria-selected="false" value="3" onclick="tabClickValue(4)"> Generate Payment File </button>
                  <button class="nav-link" id="disabled-tab1" data-bs-toggle="tab" data-bs-target="#disabled-tab-pane3" type="button" role="tab" aria-controls="disabled-tab-pane3" aria-selected="false" value="3" onclick="tabClickValue(5)"> Transfer Payment File to Bank </button>
                <li class="nav-item" role="presentation">
                  <button class="nav-link mx-2" id="disabled-tab" data-bs-toggle="tab" data-bs-target="#disabled-tab-pane" type="button" role="tab" aria-controls="disabled-tab-pane" aria-selected="false" value="2" onclick="tabClickValue(2)">Payment Failed</button>
              </ul>
              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="upload-process-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                  <div class="col-lg-12">
                    <div class="card1">
                      <div class="card-body1">
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i> Pending for Validation</h5>
                        <div class="row p-2">
                          <div class="col text-end">
                            <button class="btn btn-success" onclick="deduplicateValidate();" type="button">Validate Beneficiaries</button>
                          <div class="clear-both"></div>
                        <div class="col-lg-12 mt-2 clear-both" style="    clear: both;">
                          <div class="table-responsive">
                            <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="uploadDataList" aria-describedby="uploadDataList_info">
                              <thead>
                                <tr>
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">District</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Taluk </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year and Month</th>
                                  
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">APB </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total</th>
                                </tr>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Count</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>                    
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="uploadDataList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                              </thead>
                              <tbody>
                                
                              </tbody>
                              <tfoot id="uploadDataList_tfoot">
                              </tfoot>
                            </table>
                        </div>
                          <div class="col"></div>
                      </div>
                  </div>
                <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i>  Pending for Approve
                          <span class="badge text-bg-danger c-pointer pulse" id="pending_approval_processing" style="margin-left: 5rem;">
                            <i class="bi bi-pencil-square"></i> Approving beneficiaries in progress: <span class="text-white" id="pending_approval_processing_count"></span> out of <span class="text-white" id="pending_approval_processing_total_count"></span> completed 
                          </span>
                          <span class="badge text-bg-info c-pointer pulse" id="progress_strat" style="margin-left: 5rem;">
                            <i class="bi bi-pencil-square"></i> Data collection is ongoing
                          <form  id="paymentDateForm" method="post">
                            <div class="input-group pamentDateGroup">
                              <label for="paymentDate" class="form-label fw-bold">payment Date</label>
                                <input class="form-control form-control-sm mx-auto" type="date" name="paymentDate" id="paymentDate" style="width: 220px;">
                              <span class="paymentDate_error text-danger" id="paymentDate_error">Select Paymet Date</span>
                            </div>
                          </form>
                          <a class="btn btn-success float-end cbtn" id="selectApproval" style="margin-left:3px;" onclick="selectApprove();"><i class="bi bi-check2-circle"></i> Approve</a>
                          <a class="btn btn-success float-end cbtn" id="bulkApproval" onclick="allApprove();"><i class="bi bi-check2-circle"></i> Bulk Approve</a>
                          <button class="btn btn-success float-end cbtn" id="selectApprovalBtn" disabled style="margin-left:3px;"><i class="bi bi-check2-circle" ></i> Approve</button>
                          <button class="btn btn-success float-end cbtn" id="bulkApprovalBtn" disabled><i class="bi bi-check2-circle"></i> Bulk Approve</button>
                        </h5>
                        <div class="clear-both"></div>
                            <table class="table mt-3" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentPendingList" aria-describedby="tblPaymentPendingList_info">
                                  <th><input class="form-check-input" type="checkbox" id="selectAllCheckbox" name="selectAllCheckbox"></th>
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Month </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Name</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Mobile No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Installment</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Transcation Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentPendingList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Action</th>
                <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i>  Payment Success 
                            
                            <table class="table" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentSuccessList" aria-describedby="tblPaymentSuccessList_info">
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Month </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Name</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Mobile No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Installment ID</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Transcation Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentSuccessList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Action</th>
             
                 
                 <div class="tab-pane fade" id="disabled-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i>  Payment Failed 
                          <lable class="failure_reason_lable" for="failur_reason_filter"> Rejected Reasons:<select id="failur_reason_filter" class="form-control form-control-sm" placeholder="" aria-controls="tblPaymentFailedList"><option value="">All</option></select>
                          </lable>
                          <form  id="reinitiatePaymentDateForm" method="post">
                            <div class="input-group reinitiatePamentDateGroup" style="width: 200px;position: absolute;right: 21rem;top: 5.2rem;">
                              <label for="reinitiatePaymentDate" class="form-label fw-bold">payment Date</label>
                                <input class="form-control form-control-sm mx-auto" type="date" name="reinitiatePaymentDate" id="reinitiatePaymentDate" style="width: 220px;">
                              <span class="reinitiatePaymentDate_error text-danger" id="reinitiatePaymentDate_error">Select Paymet Date</span>
                          <div class="dropdown float-end cbtn">
                            <button class="btn btn-danger btn-sm dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                              Re-Initiate
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                              <a class="dropdown-item" onclick="reInitiateApprove();">Selected</a>
                              <a class="dropdown-item" onclick="bulkReInitiateApprove();">All</a>
                            <button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                              Transfer to EMO
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                              <a class="dropdown-item" onclick="failureToEmoSelectApprove();">Selected</a>
                              <a class="dropdown-item" onclick="failureToEmoBulkApprove();">All</a>
                            <table class="table" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentFailedList" aria-describedby="tblPaymentFailedList_info">
                                  <th><input class="form-check-input" type="checkbox" id="selectAllCheckbox2" name="selectAllCheckbox2"></th>
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Month </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Name</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Mobile No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Installment</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Payment Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Remarks</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFailedList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Action</th>
                           
                <div class="tab-pane fade" id="disabled-tab-pane1" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <div id="dynamic_heading"></div>
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i> 
                          Payment In-Progress
                            <table class="table" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentInprogressList" aria-describedby="tblPaymentInprogressList_info">
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Month </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Name</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Mobile No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Installment</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Transcation Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentInprogressList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Action</th>
                <div class="tab-pane fade" id="disabled-tab-pane2" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                          Generate Payment File
                          <span class="badge text-bg-info c-pointer pulse" id="generate_payment_status"><i class="bi bi-pencil-square"></i> Payment File Generation is In-progress ...</span>
                              <div class="row mt-4" id="generate_file_status_cards"></div>
                       
                        <a class="btn btn-success float-end cbtn" style="margin-left:3px;" onclick="triggerScript('generate_payment_file_cnrt')" id="generate_payment_real_btn"><i class="bi bi-check2-circle"></i> Generate Payment File</a>
                        <button class="btn btn-success float-end cbtn" style="margin-left:3px;" id="generate_payment_disable_btn" disabled>
                          <i class="bi bi-check2-circle"></i> Generate Payment File
                        </button>
                            <table class="table" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentFilePreGenerateList" aria-describedby="tblPaymentFilePreGenerateList_info">
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Month </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Name</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Mobile No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Installment</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Transcation Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentFilePreGenerateList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Action</th>
                 <div class="tab-pane fade" id="disabled-tab-pane3" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i> Transfer Payment File to Bank
                          <span class="badge text-bg-info c-pointer pulse" id="transfer_payment_status"><i class="bi bi-pencil-square"></i> Payment File Transfer to Bank is In-progress...</span>
                          <div class="row mt-4" id="tranfer_to_bank_file_status_cards"></div>
                        </h5>                        
                        <a class="btn btn-success float-end cbtn" onclick="triggerScript2('transfer_payment_file')" id="transfer_payment_enable">
                          <i class="bi bi-check2-circle"></i> Transfer Payment File to Bank
                        </a>
                        <button class="btn btn-success float-end cbtn" style="margin-left:3px;" id="transfer_payment_disable_btn" disabled>
                             <a class="btn btn-primary cbtn float-end mt-2" id="xlsx_btn" onclick="downloadTransferToBankPreExcel()"><i class="bi bi-file-earmark-excel"></i> EXCEL</a>
                              <a class="btn btn-primary mx-2 cbtn float-end mt-2" id="csv_btn" onclick="downloadTransferToBankPreCsv()"><i class="bi bi-file-earmark-pdf"></i> CSV</a>
                            <table class="table" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymenTransferList" aria-describedby="tblPaymenTransferList_info">
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Count</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total Amount</th>
                        
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">File Generate Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymenTransferList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">File Name</th>
                              <tfoot id="tblPaymenTransferList_tfoot"></tfoot>
                <div class="tab-pane fade" id="payment-emo-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <h5 class="card-title mt-3 mb-0"><i class="bi bi-check2-circle"></i> Payment for EMO </h5>
                            <table class="table" class="table table-striped w-100 no-footer dataTable mt-3" id="tblPaymentEmoList" aria-describedby="tblPaymentEmoList_info">
                                  <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Month </th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Beneficiary Name</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Mobile No</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH / ABP</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Installment</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Transcation Date</th>
                                  <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblPaymentEmoList" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Action</th>
                              <tbody></tbody>
          
        </div>
      </section>
    </main>
    <footer id="footer" class="footer">
      <div class="copyright">
        &copy; Copyright <strong><span>TNeGA</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Designed & Developed by <a href="https:
    </footer>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <div class="modal fade viewdatainfo" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
        <div class="modal-content">
          <div class="modal-header py-2">
            <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-file-earmark-person"></i>
              <span>Beneficiaries Payment Details</span>
            </h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          <div class="modal-body py-2">
            <div class="row scheme-data mb-2">
              <div class="col-md-4">
                <label for="" class="form-label fw-bold">Scheme</label>
                <label for="" class="form-label"><span id="popup_scheme"></span></label>
                <label for="" class="form-label fw-bold">Year</label>
                <label for="" class="form-label"><span id="popup_year"></span></label>
                <label for="" class="form-label fw-bold">Month</label>
                <label for="" class="form-label"><span id="popup_month"></span></label>
                <label for="" class="form-label fw-bold">Beneficiary Name</label>
                <label for="" class="form-label"><span id="popup_beneficiary_name"></span></label>
                <label for="" class="form-label fw-bold">Mobile No</label>
                <label for="" class="form-label"><span id="popup_beneficiary_mobile"></span></label>
                <label for="" class="form-label fw-bold">ACH / ABP</label>
                <label for="" class="form-label"><span id="popup_account_type"></span></label>
                <label for="" class="form-label fw-bold">Installment</label>
                <label for="" class="form-label"><span id="popup_installment"></span> </label>
                <label for="" class="form-label fw-bold">Amount</label>
                <label for="" class="form-label"><span id="popup_amount"></span> </label>
              <div class="col-md-4" style="display: none;">
                <label for="" class="form-label fw-bold">Transcation Date </label>
                <label for="" class="form-label"><span id="popup_transcation"></span></label>
            <div class="row mb-2 dashboard">
              <div class="row" id="check_activity"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
    </div>
    <div class="modal fade blulkapproveSummary" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-file-earmark-person"></i> Bulk Approval Summary</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" id="pendingBulkApproveClose" aria-label="Close"></button>
              <div class="table-responsive">
                <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="tblBulkApproveSummary" aria-describedby="tblBulkApproveSummary_info">
                  <thead>
                    <tr>
                      <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">District</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Taluk </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year Month</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Bulk Approve Status</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">APB </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total</th>
                    </tr>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Count</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>                    
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                  </thead>
                  <tbody>
                    
                  </tbody>
                  <tfoot id="tblBulkApproveSummary_tfoot"></tfoot>
                </table>
            <p id="tblBulkApproveSummary_action_status" class="left-container1 text-nowrap">
              <span class="ml-2 badge badge-primary bg-primary">Total - <span id="tblBulkApproveSummary_action_total">0</span></span>
              <span class="ml-2  badge badge-success bg-success">Success - <span id="tblBulkApproveSummary_action_success">0</span></span>
              <span class="ml-2 badge badge-danger bg-danger">Failed - <span id="tblBulkApproveSummary_action_failed">0</span></span>
            </p>
            <button type="button" class="btn btn-success" onclick="allApprovalPermissionEnable()" id="allApprovalPermissionEnable">Approve</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="bulkApproveCloseBtn">Close</button>
    <div class="modal fade reinitiateBlulkapproveSummary" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-file-earmark-person"></i> Bulk Reinitiate Summary</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" id="reinitiateBlulkapproveSummaryCloseTop" aria-label="Close"></button>
                <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="tblReinitiateBulkApproveSummary" aria-describedby="tblReinitiateBulkApproveSummary_info">
                      <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">District</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Taluk </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year Month</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Bulk Approve Status</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">APB </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Count</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>                    
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblReinitiateBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                  <tfoot id="tblReinitiateBulkApproveSummary_tfoot"></tfoot>
            <p id="tblReinitiateBulkApproveSummary_action_status" class="left-container1 text-nowrap">
                <span class="ml-2 badge badge-primary bg-primary">Total - <span id="tblReinitiateBulkApproveSummary_action_total">0</span></span>
                <span class="ml-2  badge badge-success bg-success">Success - <span id="tblReinitiateBulkApproveSummary_action_success">0</span></span>
                <span class="ml-2 badge badge-danger bg-danger">Failed - <span id="tblReinitiateBulkApproveSummary_action_failed">0</span></span>
              </p>
            <input type="hidden" name="select_reason_code" id="select_reason_code">
            <button type="button" class="btn btn-success" onclick="allApprovalReinitiate()" id="allApprovalReinitiate">Re-Initiate</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="allApprovalReinitiateCloseBtn">Close</button>
     <div class="modal fade emoBlulkapproveSummary" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-file-earmark-person"></i>Bulk EMO Transfer Summary</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" id="emoBlulkapproveSummaryCloseTop" aria-label="Close"></button>
                <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="tblEmoBulkApproveSummary" aria-describedby="tblEmoBulkApproveSummary_info">
                      <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">District</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Taluk </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year Month</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Bulk Approve Status</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">APB </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH </th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Count</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>                    
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="tblEmoBulkApproveSummary" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                  <tfoot id="tblEmoBulkApproveSummary_tfoot"></tfoot>
            <p id="tblEmoBulkApproveSummary_action_status" class="left-container1 text-nowrap">
              <span class="ml-2 badge badge-primary bg-primary">Total - <span id="tblEmoBulkApproveSummary_action_total">0</span></span>
              <span class="ml-2  badge badge-success bg-success">Success - <span id="tblEmoBulkApproveSummary_action_success">0</span></span>
              <span class="ml-2 badge badge-danger bg-danger">Failed - <span id="tblEmoBulkApproveSummary_action_failed">0</span></span>
            <input type="hidden" name="emo_reason_code" id="emo_reason_code">
            <button type="button" class="btn btn-success" onclick="allApprovalEmo()" id="allApprovalEmo">EMO Transfer</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="allApproveCloseBtn">Close</button>
    <div class="modal fade deduplicationValidateFunctionsList" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-file-earmark-person"></i> Validation Status</h1>
            <button type="button" class="btn-close" id="deduplicationValidateFunctionsListClose" data-bs-dismiss="modal" aria-label="Close"></button>
                <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="deduplicationValidateFunctionsList" aria-describedby="deduplicationValidateFunctionsList_info">
                      <th scope="col" class="sorting sorting_asc">Validation Type</th>
                      <th scope="col" class="sorting sorting_asc">Validation Status</th>
                      <td>
                        <h4 style="font-size: 1.2rem;font-weight: 600;">Aadhaar Validation</h4>
                        <span>
                          <ul>
                            <li>Blank validation</li>
                            <li>Aadhaar length validation</li>
                            <li>Validity based on <b>Verhoeff</b> algorithm</li>
                            <li>Duplicate Validation Within Received Payload(<i>Scheme +  Year Month of Payment + Installment Id + Aadhaar</i>)</li>
                          </ul>
                        </span>
                      </td>
                      <td class="function_1_td"> <span id="function_1"></span></td>
                        <h4  style="font-size: 1.2rem;font-weight: 600;">Bank account validation (<small>ACH Payment</small>)</h4>
                            <li>Account no blank validation, Account no numeric validation</li>
                            <li>IFSC code length validation(<i>11 Characters</i>)</li>
                            <li>IIN No validation (<i>6 Digits</i>), IIN No numeric validation</li>
                            <li>Duplicate Account Validation Within Received Payload(<i>Scheme +  Year Month of Payment + Installment Id + Account no</i>)</li>
                      <td class="function_2_td"><span id="function_2"></span></td>
                        <h4  style="font-size: 1.2rem;font-weight: 600;">Duplicate Beneficiaries (<small>Against Previous Payment</small>)</h4>
                            <li>Duplicate APB Benificaries (<i>Scheme + Year Month of Payment + Installment Id +Aadhaar + Payment status [In progress / Success]</i>)</li>
                            <li>Duplicate ACH Benificaries (<i>Scheme + Year Month of Payment + Installment Id + Account No + Payment status [In progress / Success]</i>)</li>
                      <td class="function_3_td"><span id="function_3"></span></td>
                        <h4  style="font-size: 1.2rem;font-weight: 600;">Obsolete Beneficiaries</h4>
                            <li>Validate Obsolete Beneficiaries (<i>Scheme + Year Month of Payment + Installment Id +Aadhaar + Payment status [In progress / Success]</i>)</li>
                      <td class="function_4_td"><span id="function_4"></span></td>
            <button type="button" class="btn btn-primary" onclick="viewSummary()" data-bs-dismiss="modal" id="deduplicationBtn">View Validation Summary</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="deduplicationvalidationCloseBtn">Close</button>
   
    <div class="modal fade deduplicationValidateSummary" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-card-list"></i> Validation Summary</h1>
            <button type="button" class="btn-close" id="validateSummaryClose" data-bs-dismiss="modal" aria-label="Close"></button>
                <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="deduplicationValidateSummary" aria-describedby="deduplicationValidateSummary_info">
                      <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Scheme Name</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Subscheme Name</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">District Name</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Taluk Name</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Year Month</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total Count</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Valid Count</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Error Count</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Duplicate Benificiary</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Duplicate Aadhaar</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Duplicate Account</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Invalid Beneficiary Name</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Invalid IIN (or) IFSC</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Invalid Aadhaar</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Invalid Account</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Obsolete Beneficiary</th>
                      <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="deduplicationValidateSummary" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Download</th>
                  <tfoot id="deduplicationValidateSummary_tfoot"></tfoot>
            <div class="container-fluid">
                <div class="col-md-7"><span class="align-self-start text-warning" id="valid_records_not_found_info"></span></div>
                <div class="col-md-4">
                  <button type="button" class="btn btn-success" onclick="transferToPending()" data-bs-dismiss="modal" id="transFerToValidBtn">Transfer valid beneficiaries for approval</button>
                <div class="col-md-1">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
        
        <div class="modal fade transferPaymentProcess" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
              <div class="modal-content">
                <div class="modal-header py-2">
                  <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-file-earmark-person"></i> Transfer to Payment Process</h1>
                  <button type="button" class="btn-close" id="transferPaymentProcessCloseOne" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="modal-body py-2">
                  <div class="row scheme-data mb-2">
                    <div class="table-responsive">
                      <table class="table mt-3 w-100" class="table table-striped w-100 no-footer dataTable mt-3" id="transferPaymentProcess" aria-describedby="transferPaymentProcess_info">
                        <thead>
                          <tr>
                            <th scope="col"  class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">S.No</th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">District</th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Taluk </th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="2" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Transfer Payment Process Status</th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">APB </th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">ACH </th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="1" colspan="2" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Total</th>
                          </tr>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Count</th>
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>                    
                            <th scope="col" class="sorting sorting_asc" tabindex="0" aria-controls="transferPaymentProcess" rowspan="1" colspan="1" aria-label="S.No: activate to sort column descending" style="width: 37px;" aria-sort="ascending">Amount</th>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot id="transferPaymentProcess_tfoot"></tfoot>
                      </table>
                  <div class="row mb-2 dashboard">
                <div class="modal-footer">
                  <p id="transferPaymentProcess_action_status" class="left-container1 text-nowrap">
                  <span class="ml-2 badge badge-primary bg-primary">Total - <span id="transferPaymentProcess_action_total">0</span></span>
                  <span class="ml-2  badge badge-success bg-success">Success - <span id="transferPaymentProcess_action_success">0</span></span>
                  <span class="ml-2 badge badge-danger bg-danger">Failed - <span id="transferPaymentProcess_action_failed">0</span></span>
                  </p>
                  <button type="button" class="btn btn-success" onclick="TransferPaymentProcessInziated();" id="transferBtn">Transfer</button>
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="TransferPaymentProcessCloseBtn">Close</button>
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script type="text/javascript" src="assets/vendor/jquery-validate/js/jquery.validate.min.js"></script>
    <script src="assets/vendor/datatable/jquery.dataTables.min.js"></script>
    <script src="assets/vendor/datatable/dataTables.bootstrap5.min.js"></script>
    <script type="text/javascript" src="assets/vendor/datatable/js/dataTables.js"></script>
    <script type="text/javascript" src="assets/vendor/datatable/js/dataTables.bootstrap4.js"></script>
    <script src="assets/vendor/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/jszip.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/pdfmake.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/vfs_fonts.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="assets/vendor/datatables-buttons/js/buttons.colVis.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert.min.js"></script>
    <script src="assets/vendor/sweetalert2/js/sweetalert2.all.min.js"></script>
    <script src="assets/vendor/toggle/bootstrap-toggle.min.js"></script>
    <script src="assets/js/global.js"></script>
    <script src="assets/js/alpinejs_3_10_2.min.js" defer></script>
    <script src="assets/lang/reports.js"></script>
    <script src='https:
    <script src="assets/scripts/xlsx.full.min.js"></script>
    <script src="assets/js/base64tojson.js"></script>
    <script src="assets/js/crypto-js.js"></script>
    <script src="assets/js/aes.js"></script>
  
    <script type="text/javascript" src="assets/vendor/toastr/toastr.min.js"></script>
    <script src="assets/vendor/encryption/crypto-js.min.js"></script>
    <script src="assets/vendor/encryption/Encryption.js"></script>
 
<script type="text/javascript">
  var url = window.location.href;
  var page_url = url.split('/');
  var page = page_url[4];
  var userDataString = getCookie('payment_official');
  userDataString = JSON.parse(userDataString);
  $(document).ready(function () {
    $(document).on({
          ajaxStop: function () {
            $('#preloader').hide();
          }
        });
    $('.official').each(function (i, obj) {
      var href = obj.getAttribute("href");
      if (href == page) {
        obj.classList.add('active');
      } else {
        obj.classList.remove('active');
      }
    });
    var userDataString = getCookie('payment_official');
    if (!userDataString) {
      $('#preloader').show();
      window.location.href = "login.html";
    }
    userDataString = JSON.parse(userDataString);
    $('#official_username').text(userDataString['first_name']);
    $('#UserID').val(userDataString['user_id']);
    window.loginUser_id = userDataString['user_id'];
    reloID = userDataString['role_id'];
      roleBasedPageAllow(loginUser_id,reloID);
    getSchemeCategory();
    getDistricts();
    $('#ddl_sub_scheme').on('change',function(){
    $('#ddl_department').empty();
    $('#ddl_sub_department').empty();
    $('#ddl_department').append($('<option>', {value: "",text: "--Select--"}));
    $('#ddl_sub_department').append($('<option>', {value: "",text: "--Select--"}));
      $.ajax({
        url: APIURL +'schem_filter',
        type: "POST",
        headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
        data: {case: "get_department",scheme_cate:$('#ddl_scheme_cate').val(),scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),sub_scheme_name:$
        ('#ddl_sub_scheme').val(),
        whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
       
        success: function(response) {
          $('#preloader').hide();
            var department_code = response.data[0];
            console.log('response',response);
            getDepartment(department_code.department);
        },
        error: function(xhr, status, error) {
            console.log("Error:", error);
        }
      });
    $('#ddl_district').on('change', function () {
      var district_code = $('#ddl_district').val();
      $('#ddl_taluk').empty();
      $('#ddl_taluk').append('<option value="">--All--</option>');
      getTaluk(district_code);
});
function getCookie(name) {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.startsWith(name + '=')) {
        return cookie.substring(name.length + 1);
    return null;
  }
function getSchemeCategory(){
    $('#ddl_scheme_cate').empty();
    $('#ddl_scheme_name').empty();
    $('#ddl_sub_scheme').empty();
    $('#ddl_scheme_cate').append($('<option>', {value: "", text: "--All--"}));
    $('#ddl_scheme_name').append($('<option>', {value: "", text: "--Select--"}));
    $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--Select--"}));
  $.ajax({
    url: APIURL +'schem_filter',
    type: "POST",
    headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
    data: {case: "get_scheme_category",get_column:"scheme_code",groupbycolumn:"scheme_code",user_id:loginUser_id},
    success: function(response) {
        var schemeCode = response.data;
        $('#ddl_scheme_cate').empty();
        $('#ddl_scheme_cate').append($('<option>', {
              value: "",
              text: "--Select--"
          }));
        $.each(schemeCode, function (index, scheme) {
            if(schemeCode.length >1){
              $('#ddl_scheme_cate').append($('<option>', {
                value: scheme.scheme_category,
                text: scheme.scheme_category
            }));
            }else{
            }).prop('selected', true));
            $('#ddl_scheme_cate').trigger('change');
            }
         });
    },
    error: function(xhr, status, error) {
        console.log("Error:", error);
  });
}
$('#ddl_scheme_cate').on('change',function(){
    $('#ddl_scheme_code').empty();
    $('#ddl_scheme_code').append($('<option>', {value: "", text: "--Select--"}));
      let scheme_cate = $(this).val();
  if(scheme_cate ==''|| scheme_cate==null||scheme_cate==undefined){
    $('#ddl_year').empty();
    $('#ddl_payment_period').empty();
    $('#ddl_payment_installment').empty();
    $('#ddl_payment_cycle').text('Scheme Based Payment Period');
    $('#ddl_year').append($('<option>', {
          value: "",
          text: "Select Year - Month"
      }).attr('disabled','true').attr('selected', 'selected'));
      $('#ddl_payment_installment').append($('<option>', {
          text: "Select Installment"
      $('#ddl_payment_period').append($('<option>', {
          text: "Select the Payment Period"
   $.ajax({
     url: APIURL +'schem_filter',
     type: "POST",
     headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
     data: {case: "get_scheme_code",get_column:"scheme_code",groupbycolumn:"scheme_code",whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
     success: function(response) {
         var schemeCode = response.data;
         $('#ddl_scheme_code').empty();
         $('#ddl_scheme_code').append($('<option>', {
               value: "",
               text: "--Select--"
           }));  
              $('#ddl_scheme_code').append($('<option>', {
                value: scheme.scheme_code,
                text: scheme.scheme_code
         $('#ddl_scheme_code').trigger('change');
     },
     error: function(xhr, status, error) {
         console.log("Error:", error);
     }
   });
})
$('#ddl_scheme_code').on('change',function(){
     $('#ddl_sub_scheme').empty();
     $('#ddl_scheme_name').empty();
     $('#ddl_department').empty();
     $('#ddl_sub_department').empty();
     $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--Select--"}));
     $('#ddl_scheme_name').append($('<option>', {value: "", text: "--Select--"}));
     $('#ddl_department').append($('<option>', {value: "",text: "--Select--"}));
     $('#ddl_sub_department').append($('<option>', {value: "",text: "--Select--"}));
   url: APIURL +'schem_filter',
   type: "POST",
   headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
   data: {case: "get_scheme",scheme_code:$('#ddl_scheme_code').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
   success: function(response) {
    $('#preloader').hide();
       var schemeCode = response.data;
       $('#ddl_scheme_name').empty();
       $('#ddl_scheme_name').append($('<option>', {
             value: "",
             text: "--Select--"
         }));
       $.each(schemeCode, function (index, scheme) {
        if(schemeCode.length >1){
          $('#ddl_scheme_name').append($('<option>', {value: scheme.scheme_name,text: scheme.scheme_name}));
        }else{
          $('#ddl_scheme_name').append($('<option>', {value: scheme.scheme_name,text: scheme.scheme_name}).prop('selected', true));
       });
       $('#ddl_scheme_name').trigger('change');
   },
   error: function(xhr, status, error) {
       console.log("Error:", error);
   }
 });
$('#ddl_scheme_name').on('change',function(){
   $('#ddl_sub_scheme').empty();
   $('#ddl_department').empty();
   $('#ddl_sub_department').empty();
   $('#ddl_sub_scheme').append($('<option>', {value: "",text: "--Select--"}));
   $('#ddl_department').append($('<option>', {value: "",text: "--Select--"}));
   $('#ddl_sub_department').append($('<option>', {value: "",text: "--Select--"}));
$('#preloader').show();
   data: {case: "get_sub_scheme",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(), whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
       $('#ddl_sub_scheme').empty();
       $('#ddl_sub_scheme').append($('<option>', {
        if(schemeCode.length > 1){
          $('#ddl_sub_scheme').append($('<option>', {
             value: scheme.subscheme_name,
             text: scheme.subscheme_name
         }).prop('selected', true));
       $('#ddl_sub_scheme').trigger('change');
function getDepartment(depID){
    $('#preloader').show();
    let scheme_cate = $('#ddl_scheme_cate').val();
$.ajax({
   url: APIURL +'get_department',
   data: {type: "department"},
       var department = response[0].data;
      if(scheme_cate == '' || scheme_cate === 0){
                  $('#ddl_department').empty();
                  $('#ddl_department').append($('<option>', {val: '', text: '--All--' }));
                  $('#ddl_payment_cycle').empty();
                  $('#ddl_payment_cycle').append($('<option>', {val: '', text: 'Scheme Based Payment Period' }));
      else{
       $.each(department, function (index, dep) {
         if(dep.department_code==depID){
           $('#ddl_department').append($('<option>', {
             value: dep.department_code,
             text: dep.department_name
           }).attr('selected', 'selected'));
           
           $.ajax({
                 url: APIURL +'schem_filter',
                 type: "POST",
                 headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
                 data: {case: "get_sub_department",scheme_code:$('#ddl_scheme_code').val(),scheme_name:$('#ddl_scheme_name').val(),sub_scheme_name:$('#ddl_sub_scheme').val(),department:$('#ddl_department').val(),whereColumn:$('#ddl_scheme_cate').val(),user_id:loginUser_id},
                 success: function(response) {
                  $('#preloader').hide();
                     var subdepartment_code = response.data[0];
                     get_sub_department(dep.department_code,subdepartment_code.subdepartment);
                 },
                 error: function(xhr, status, error) {
                     console.log("Error:", error);
                 }
             });
         }
 function get_sub_department(depID,subDepID){
     $.ajax({
     url: APIURL +'get_department',
     data: {type: "sub_department",whereColumn:$('#ddl_scheme_cate').val(),department_code:depID},
      $('#preloader').hide();
         
         var department = response[0].data;
         $('#ddl_sub_department').empty();
         $('#ddl_sub_department').append($('<option>', {
           }));
         $.each(department, function (index, sub_dep) {
           if(sub_dep.sub_department_code==subDepID){
             $('#ddl_sub_department').append($('<option>', {
               value: sub_dep.sub_department_code,
               text: sub_dep.sub_department_name
           }
         get_schemebyuser(loginUser_id);
 }
  function getDistricts(){
      const userDataString = getCookie("payment_official");
      const userData = JSON.parse(userDataString);
      $('#ddl_district').selectpicker('destroy');
      var districtID=0;
      var data=[];
      if(userData['district_code']!=0){
      districtID=userData['district_code'];
      data={ case: 'district',district_code: districtID,user_id:userData['user_id']};
      data={ case: 'district',user_id:userData['user_id']};
    $.ajax({
      url: userMasterAPIURL+'userMaster',
      method: 'POST',
      headers: {'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
      data: data,
      dataType: 'json',
      success: function (response) {
        $('#preloader').hide();
        var district = response.district;
        var districtDropdown = $("#ddl_district");
        $('#ddl_district').empty();
        $('#ddl_district').append($('<option>', {value: "",text: "--All--"}));
        if(districtID==0 || districtID ==undefined){
        populateDropdown('ddl_district', response.districts, 'district');              
        } else {
        districtDropdown.html('<option value="'+district['district_code']+'">'+district['district_name']+'</option>');
        $('#ddl_district').trigger('change');
        var district_code= district['district_code'];
          getTaluk(district_code);
        $('#ddl_district').selectpicker();
      },
      error: function () {
        console.error('Error fetching district data');
  function getTaluk(districtID){
      $('#ddl_taluk').selectpicker('destroy');
    $('#ddl_taluk').empty();
    $('#ddl_taluk').append('<option value="">--All--</option>');
      var talukID=0;
      if(userData['taluk_code']!=0){
      talukID=userData['taluk_code'];
      data={ case: 'taluk',district_code: districtID,taluk_code: talukID,user_id:userData['user_id']};
      data={ case: 'taluk',district_code: districtID,user_id:userData['user_id']};
      url: userMasterAPIURL+'userMaster', 
      headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
        var taluk = response.taluk
        var talukDropdown = $("#ddl_taluk");
        if(talukID==0){
          populateDropdown('ddl_taluk', response.taluk, 'taluk');             
          talukDropdown.html('<option value="'+taluk['taluk_code']+'">'+taluk['taluk_name']+'</option>');
        $('#ddl_taluk').trigger('change');
        $('#ddl_taluk').selectpicker();
        Swal.fire({
          icon: "error",
          title: "Service Error!",
          showConfirmButton: false,
          timer: 2000
        })
  $('#paymentDate').on('change', function() {
    var todayDate = new Date(); 
    todayDate.setDate(todayDate.getDate() - 1);
    var toDate = new Date($(this).val());
    if (toDate < todayDate) {
        alert('To Date should be a future date.');
        $(this).val('');
    $('#paymentDate_error').hide();
  $('#reinitiatePaymentDate').on('change', function() {
    $('#reinitiatePaymentDate_error').hide();
var formsFilter = [];
window.localStorage.removeItem('filters');
$(document).ready(function() {
$('#filter_based_info_card_div').hide();
$('#tblCard').hide();
  $("#formFilters").validate({
          rules: {
            ddl_scheme_cate: {required: true},
            ddl_scheme_code: {required: true},
            ddl_scheme_name: {required: true},
            ddl_sub_scheme: {required: true},
            ddl_department: {required: true},
            ddl_sub_department: {required: true},
            ddl_year :{required: true},
            ddl_payment_period: {required: true},
            ddl_payment_installment : {required: true},
            ddl_year : {required: true},
          },
          messages: {
            ddl_scheme_cate: {required: "Select the Scheme Category"},
            ddl_scheme_code: {required: "Select the Scheme Code"},
            ddl_scheme_name: {required: "Select the scheme Name"},
            ddl_sub_scheme: {required: "Select the Sub Scheme Name"},
            ddl_department: {required: "Select the Deparment"},
            ddl_sub_department: {required: "Select the Sub Deparment"},
            ddl_year :{required: "Select the Year Month"},
            ddl_payment_period: {required: "Select the Payment Period"},
            ddl_payment_installment : {required: "Select the Installment"},
          errorClass: "help-inline text-danger",
          errorElement: "span",
          errorPlacement: function (error, element) {
              if (element.attr("id") === "ddl_year") {
                  error.insertAfter(element.parent()); 
              } else {
                  error.insertAfter(element); 
              }
          highlight: function(element, errorClass, validClass) {
              $(element).parents('.form-group').addClass('has-error');
          unhighlight: function(element, errorClass, validClass) {
              $(element).parents('.form-group').removeClass('has-error');
              $(element).parents('.form-group').addClass('has-success');
          submitHandler: function(form,e) {
              e.preventDefault();
              formsFilter.length = 0;
              formsFilter = [];
              var formData = $(form).serialize();
              window.localStorage.removeItem('filters');
              window.localStorage.setItem('filters', JSON.stringify(formData));
              var tabId = $('#approvelpayment').val();
              if(tabId==''){tabId = 7;}
                tabClickValue(tabId);
              $('html, body').animate({
                scrollTop: $("#tblCard").offset().top
              }, 2000);
              $('#lable_text_scheme_cate').text($('#ddl_scheme_cate').val());
              $('#lable_text_scheme_code').text($('#ddl_scheme_code').val());
              $('#lable_text_scheme').text($('#ddl_scheme_name').val());
              $('#lable_text_sub_scheme').text($('#ddl_sub_scheme').val());
              $('#lable_text_Department').text($("#ddl_department option:selected").text());
              $('#lable_text_sub_department').text($("#ddl_sub_department option:selected").text());
              let paymentCycle = $('#ddl_payment_cycle').text();
              if($("#ddl_payment_period option:selected").val()!='' && $("#ddl_payment_period option:selected").val()!=null && $("#ddl_payment_period option:selected").val()!=undefined){
                paymentCycle = $('#ddl_payment_cycle').text()+'-'+$("#ddl_payment_period option:selected").text();
              $('#lable_text_payment_period').text(paymentCycle);
              $('#lable_text_year_month').text($("#ddl_year option:selected").text());
              $('#lable_text_installment').text($("#ddl_payment_installment option:selected").text());
              if ($('#ddl_scheme_code').val() !== '' && $('#ddl_scheme_name').val() !== '' && $('#ddl_sub_scheme').val() !== '' && $('#ddl_department').val() !== '' && $('#ddl_sub_department').val() !== '') {
                  $('#filter_based_info_card_div').show();
                  $('#tblCard').show();
                  
                  $('#accordionExample .accordion-collapse').collapse('hide');
                  var tabId = $('#approvelpayment').val();
                  if(tabId==''){tabId = 7;}
                  tabClickValue(tabId);
                  $('html, body').animate({
                    scrollTop: $("#tblCard").offset().top
                    }, 2000);
              }else{
                $('#filter_based_info_card_div').hide();
              return false;
        $.validator.addMethod("verhoeff", function(value, element) {
         let uidValidate = checkUID(value);
          return uidValidate;
        },"Please Enter the Valide Aadhaar No.");
function checkUID(uid) {
    if (uid.length != 12) {
        return false;
    var Verhoeff = {
        "d": [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
            [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],
            [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],
            [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],
            [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],
            [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],
            [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],
            [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],
            [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],
            [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]],
        "p": [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
            [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],
            [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],
            [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],
            [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],
            [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],
            [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],
            [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]],
        "j": [0, 4, 3, 2, 1, 5, 6, 7, 8, 9],
        "check": function (str) {
            var c = 0;
            str.replace(/\D+/g, "").split("").reverse().join("").replace(/[\d]/g, function (u, i) {
                c = Verhoeff.d[c][Verhoeff.p[i % 8][parseInt(u, 10)]];
            });
            return c;
        "get": function (str) {
                c = Verhoeff.d[c][Verhoeff.p[(i + 1) % 8][parseInt(u, 10)]];
            return Verhoeff.j[c];
    };
    String.prototype.verhoeffCheck = (function () {
        var d = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
            [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]];
        var p = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
            [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]];
        return function () {
            this.replace(/\D+/g, "").split("").reverse().join("").replace(/[\d]/g, function (u, i) {
                c = d[c][p[i % 8][parseInt(u, 10)]];
            return (c === 0);
        };
    })();
    if (Verhoeff['check'](uid) === 0) {
        return true;
    } else {
window.getCurrentTabId = -1;
tabClickValue(7);
$('#select_reason_code').val('');
function tabClickValue(tabID){
  var dataFilters = window.localStorage.getItem('filters');
  var input_schemCode = $('#ddl_scheme_code').val();
  var input_schemName = $('#ddl_scheme_name').val();
  var input_subScheme = $('#ddl_sub_scheme').val();
  var input_dep = $('#ddl_department').val();
  var input_subDep = $('#ddl_sub_department').val();
  var input_dateMonthYear = $('#dayWeekMonthFilter').val();
  getCurrentTabId = tabID;
  if(tabID==0){
    $('#approvelpayment').val(0);
      if (input_schemCode !== '' && input_schemName !== '' && input_subScheme !== null && input_dep !== '' && input_subDep !== '' && input_dateMonthYear !== '') {
        get_pending_paymment_list(dataFilters,1);
        $('#profile-tab-pane').show();
      } else {$('#profile-tab-pane').hide();}  
  }else if(tabID==1){
    $('#approvelpayment').val(1);
        get_success_paymment_list(dataFilters,3);
        $('#contact-tab-pane').show();
      } else {$('#contact-tab-pane').hide();}
  }else if(tabID==2){
    $('#approvelpayment').val(2);
    if (input_schemCode !== '' && input_schemName !== '' && input_subScheme !== null && input_dep !== '' && input_subDep !== '' && input_dateMonthYear !== '') {
        get_failed_paymment_list(dataFilters,4,null);
        $('#disabled-tab-pane').show();
      } else {$('#disabled-tab-pane').hide();}
  }else if(tabID==3){
    $('#approvelpayment').val(3);
      console.log(tabID);
        get_inprogress_paymment_list(dataFilters,2);
        $('#disabled-tab-pane1').show();
      } else {$('#disabled-tab-pane1').hide();}
  else if(tabID==4){
    $('#approvelpayment').val(4);
      get_generate_payment_file_pre_list(dataFilters,5);
        $('#disabled-tab-pane2').show();
      } else {$('#disabled-tab-pane2').hide();}   
  else if(tabID==5){
    $('#approvelpayment').val(5);
        get_transfer_payment_to_bank_pre_list(dataFilters,6);
        $('#disabled-tab-pane3').show();
      } else {$('#disabled-tab-pane3').hide();}
  else if(tabID==6){
    $('#approvelpayment').val(6);
  }else if(tabID == 7){
    $('#approvelpayment').val(7);
        if (input_schemCode !== '' && input_schemName !== '' && input_subScheme !== null && input_dep !== '' && input_subDep !== '' && input_dateMonthYear !== '') {
          uploadDataList(dataFilters, 7);
          $('#uploadDataList').show();
        } else {$('#uploadDataList').hide();}
  else if(tabID == 8){
    $('#approvelpayment').val(8);
          payment_emo_list(dataFilters, 8);
let tableRecordCount = 0;
function get_pending_paymment_list(dataFilters,approveStatus){
  $('#preloader').show();
    $('#tblPaymentPendingList').DataTable().clear().destroy();
    $('#tblPaymentPendingList').DataTable({
        "aLengthMenu": [10, 25, 50,100],
        "pageLength": 50,
        "footer": true,
        "dom": 'Bfrtip',
        "buttons": [
          ],
        "searching": true,
        "processing": true,
        "serverSide": true,
        "ajax": {
            "url": APIURL + 'payment_list',
            "type": "POST",
            "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
            "dataType": "JSON",
            "data": function (data) {
              data.fileters = dataFilters;
              data.approveStatus = approveStatus;
              data.user_id = loginUser_id;
            },
          "beforeSend": function () {
            tblPreloaderEnable('tblPaymentPendingList');
          "error": function (xhr, error, thrown) {
                Swal.fire({
                    icon: "error",
                    title: 'Service Error !',
                    showConfirmButton: false,
                    timer: 2000
                });
                $('#preloader').hide();
            "dataSrc": 'data',
        "columns": [
            { "data": "checkbox" },
            { "data": "S.No", render: function (data, type, row, meta) {
                return meta.row + meta.settings._iDisplayStart + 1;
                }
            { "data": "scheme_name" },
            { "data": "year_code" },
            { "data": "month_name" },
            { "data": "benificiary_name" },
            { "data": "benificiary_mobile_no"},
            { "data": "payment_mode_name"},
            { "data": "installment_id"},
            { "data": "amount"},
            { "data": "created_dt"},
            { "data": "action" },
        ],
        "aoColumnDefs": [{
          'bSortable': false,
          'aTargets': [0]
        }],
        "drawCallback": function (settings) {
        "initComplete": function (settings, json) {
         $('#preloader').hide(); 
         tableRecordCount = json.recordsTotal;
    });  
function get_inprogress_paymment_list(dataFilters,approveStatus){
    $('#tblPaymentInprogressList').DataTable().clear().destroy();
    $('#tblPaymentInprogressList').DataTable({
        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
        "pageLength": 30, 
          {
                extend: 'csv',
                text: 'CSV',
                filename: 'Payment Lists',
                exportOptions: {
                    rows: ':visible', 
                    modifier: {
                        selected: null 
                    }
            {
                extend: 'excel',
                text: 'Excel',
                filename: 'Payment Lists' 
                extend: 'pdf',
                text: 'PDF',
            }],
            "beforeSend": function () {
            $('#preloader').show(); 
            tblPreloaderEnable('tblPaymentInprogressList');
            "error": function (xhr, error, thrown) {
        $('#preloader').hide(); 
        tableRecordCount = json.recordsTotal;
$('.failure_reason_lable').hide();
function get_failed_paymment_list(dataFilters,approveStatus,rejected_reason){
  $('.dataTables_filter').hide();
  $('#tblPaymentFailedList').DataTable().clear().destroy();
  $('#tblPaymentFailedList').DataTable({
      "pageLength": 30, 
      "footer": true,
      "dom": 'Bfrtip',
      "buttons": [
      "searching": true,
      "processing": true,
      "serverSide": true,
      "ajax": {
          "url": APIURL + 'payment_list',
          "type": "POST",
          "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
          "dataType": "JSON",
          "data": function (data) {
            data.fileters = dataFilters;
            data.approveStatus = approveStatus;
            data.user_id = loginUser_id;
            data.rejected_reason = rejected_reason;
              $('#preloader').show();
              $('#tblPaymentFailedList_wrapper > .dt-buttons').hide();
              $('#tblPaymentFailedList_filter.dataTables_filter').hide();
              $('.failure_reason_lable').hide();
              Swal.fire({
                  icon: "error",
                  title: 'Service Error !',
                  showConfirmButton: false,
                  timer: 2000
              });
              $('#preloader').hide();
          "dataSrc": 'data',
      "columns": [
          { "data": "checkbox" },
          { "data": "S.No", render: function (data, type, row, meta) {
              return meta.row + meta.settings._iDisplayStart + 1;
          { "data": "scheme_name" },
          { "data": "year_code" },
          { "data": "month_name" },
          { "data": "benificiary_name" },
          { "data": "benificiary_mobile_no"},
          { "data": "payment_mode_name"},
          { "data": "installment_id"},
          { "data": "amount"},
          { "data": "created_dt"},
          { "data": function (data, type, row, meta) {
            let return_reasons = '';          
            if(data.rejection_reason!==null){
              return_reasons = data.rejection_reason;
              return_reasons = data.rejection_reason_code;
            return return_reasons;
          { "data": "action" },
      ],
      "aoColumnDefs": [{
            'bSortable': false,
            'aTargets': [0]
          }],
      "drawCallback": function (settings) {
          $('#tblPaymentFailedList_filter.dataTables_filter').show();
          $('#tblPaymentFailedList_wrapper > .dt-buttons').show();
          $('.failure_reason_lable').show();
      "initComplete": function(settings, json) {
        $('#tblPaymentFailedList_filter.dataTables_filter').show();
        $('#tblPaymentFailedList_wrapper > .dt-buttons').show();
        $('.failure_reason_lable').show();
            $('#preloader').hide(); 
            tableRecordCount = json.recordsTotal;
            if (tableRecordCount != 0) {
                if (json.rejected_reson !== null) {
                      var selectFilterHtml = '<option value="">--All--</option>';
                      let selected;
                      $.each(json.rejected_reson, function(index, reason) {
                          if(rejected_reason == reason.rejection_reason_code){
                            selected = "selected";
                          }else{
                            selected = '';
                          }
                        selectFilterHtml += '<option value="' + reason.rejection_reason_code + '" '+selected+'>' + (reason.rejection_reason ? reason.rejection_reason: reason.rejection_reason_code) +'</option>';
                    });
                    $('#failur_reason_filter').html(selectFilterHtml);
              $('#failur_reason_filter').html('');
  });  
$('#failur_reason_filter').on('change',function(){
    let rejected_reason_value = $(this).val();
    get_failed_paymment_list(dataFilters,4,rejected_reason_value);
function get_success_paymment_list(dataFilters,approveStatus){
  $('#tblPaymentSuccessList').DataTable().clear().destroy();
  $('#tblPaymentSuccessList').DataTable({
        {
              extend: 'csv',
              text: 'CSV',
              filename: 'Payment Lists',
              exportOptions: {
                  rows: ':visible', 
                  modifier: {
                      selected: null 
                  }
              extend: 'excel',
              text: 'Excel',
              filename: 'Payment Lists' 
              extend: 'pdf',
              text: 'PDF',
           },
      "initComplete": function (settings, json) {
function get_generate_payment_file_pre_list(dataFilters,approveStatus){
$('#tblPaymentFilePreGenerateList').DataTable().clear().destroy();
$('#tblPaymentFilePreGenerateList').DataTable({
    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
    "pageLength": 30, 
    "footer": true,
    "dom": 'Bfrtip',
    "buttons": [
    "searching": true,
    "processing": true,
    "serverSide": true,
    "ajax": {
        "url": APIURL + 'payment_list',
        "type": "POST",
        "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
        "dataType": "JSON",
        "data": function (data) {
          data.fileters = dataFilters;
          data.approveStatus = approveStatus;
          data.user_id = loginUser_id;
        "beforeSend": function () {
        "error": function (xhr, error, thrown) {
            Swal.fire({
                icon: "error",
                title: 'Service Error !',
                showConfirmButton: false,
                timer: 2000
        "dataSrc": 'data',
    "columns": [
        { "data": "S.No", render: function (data, type, row, meta) {
            return meta.row + meta.settings._iDisplayStart + 1;
        { "data": "scheme_name" },
        { "data": "year_code" },
        { "data": "month_name" },
        { "data": "benificiary_name" },
        { "data": "benificiary_mobile_no"},
        { "data": "payment_mode_name"},
        { "data": "installment_id"},
        { "data": "amount"},
        { "data": "created_dt"},
        { "data": "action" },
    ],
    "aoColumnDefs": [{
      'bSortable': false,
      'aTargets': [0]
    }],
    "drawCallback": function (settings) {
    "initComplete": function (settings, json) {
}); 
let pre_transfer_to_bank_row_count = 0;
function get_transfer_payment_to_bank_pre_list(dataFilters,approveStatus){
  let selectedScheme = $('#lable_text_scheme_cate').text();
  let yearmonth = $('#lable_text_year_month').text();
$('#tblPaymenTransferList').DataTable().clear().destroy();
$('#tblPaymenTransferList').DataTable({
        "url": APIURL + 'payment_transfer_to_bank_list',
          $('#tblPaymenTransferList_tfoot').hide();
        { "data": "payment_mode" },
        { "data": "benificiary_count" },
        { "data": "total_amount" },
        { "data": "file_created_date"},
        { "data": "file_name"},
        pre_transfer_to_bank_row_count = json.recordsTotal;
    "footerCallback": function (row, data, start, end, display) {
          var api = this.api();
          if(data.length !=0 && data.length != undefined){
            let total_table_row =  `<tr>
              <th id="footerColumn0"></th>
              <th id="footerColumn1">Total</th>
              <th id="footerColumn2"></th>
              <th id="footerColumn3"></th>
              <th id="footerColumn4"></th>
              <th id="footerColumn5"></th>
              <th id="footerColumn6"></th>
            </tr>`;
            $('#tblPaymenTransferList_tfoot').html(total_table_row);
            $('#tblPaymenTransferList_tfoot').show();
          }else{
           $('#tblPaymenTransferList_tfoot').hide();
          var columnsToSum = [3,4];
          columnsToSum.forEach(function (columnIndex) {
              var sum = api.column(columnIndex, { page: 'current' }).data()
                  .reduce(function (a, b) {
                      var val = parseFloat(b);
                      
                      return isNaN(val) ? a : a + val;
                  }, 0);
                  $('#tblPaymenTransferList_tfoot #footerColumn' + columnIndex).text(sum);
              $(api.column(columnIndex).footer()).html(sum);
          });
});  
function downloadTransferToBankPreExcel(){
  if(pre_transfer_to_bank_row_count!=0){
        let selectedScheme = $('#lable_text_scheme_cate').text();
        let yearmonth = $('#lable_text_year_month').text();
        let filename = `${selectedScheme}-Pre-transfer-to-bank-files-${yearmonth}`;
        var userDataString = getCookie('payment_official');
        userDataString = JSON.parse(userDataString);
        window.loginUser_id = userDataString['user_id'];
        $('#preloader').show();
        var dataFilters = window.localStorage.getItem('filters');
        $.ajax({
          url: APIURL + 'payment_transfer_to_bank_list_download',
          method: 'POST',
          headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
          data: {fileters:dataFilters,approveStatus:6,user_id:loginUser_id},
          dataType: 'json',
          success: function (response) {
            if(response.data!=null){
              exportJsonToExcel(response.data,filename);
              icon: "error",
              title: 'Data is Empty !',
              showConfirmButton: false,
              timer: 2000
          error: function (xhr, status, error) {
              title: 'Service Error',
  }else{
      Swal.fire({
          title: "Data Not Found",
function downloadTransferToBankPreCsv(){
              convertJsonToCsv(response.data,filename);
function populateDropdown(dropdownId, data, fieldName) {
    const dropdown = document.getElementById(dropdownId);
    data.forEach(item => {
      const option = document.createElement('option');
      option.value = item[fieldName + '_code'];
      option.textContent = item[fieldName + '_name'];
      dropdown.appendChild(option);
  $('#selectAllCheckbox').on('change', function () {
      $('tbody :checkbox').prop('checked', $(this).prop('checked'));
  $('#selectAllCheckbox2').on('change', function () {
  $('#selectAllCheckbox3').on('change', function () {
  function selectApprove(){
      var paymentDate = $('#paymentDate').val();
        if(paymentDate == ''){
          $('#paymentDate_error').show();
          $('#paymentDate').addClass('text-danger');
          var scrollTarget = document.getElementById('paymentDateForm');
          scrollableContainer.scrollTop = scrollTarget.offsetTop;
          return false;
     userDataString = JSON.parse(userDataString);
    let userID = userDataString['user_id'];
    var checkboxValues = [];
    var dataFilters = window.localStorage.getItem('filters');
    $('input[name="pending_check[]"]:checked').each(function () {
      checkboxValues.push($(this).val());
    if (checkboxValues.length === 0) {
          title: "Kindly select beneficiary!",
          url: APIURL+'selectApprove', 
          data: {groupOfarray:checkboxValues,fileters:dataFilters,approveStatus:1,user_id:userID,paymentDate:paymentDate},
            $('#paymentDate').val('');
            if(response.success == 1)
              output = response.data;
                icon: "success",
                title: response.message,
              setTimeout(() => {
                get_pending_paymment_list(dataFilters,1);
            else if(response.success == 0)
              })
          error: function () {
              title: "Service Error!",
            })
  let intervalId;
  $('#pending_approval_processing').hide();
  $('#paymentDate_error').hide();
  $('#reinitiatePaymentDate_error').hide();
  $('#paymentDate').removeClass('text-danger');
let buklApproveSummary = [];
let buklApproveSummaryTotalCount = 0;
  function allApprove(){
      $('#allApprovalPermissionEnable').prop('disabled',true);
    var input_schemCode = $('#ddl_scheme_code').val();
    var input_schemName = $('#ddl_scheme_name').val();
    var input_subScheme = $('#ddl_sub_scheme').val();
    var input_dep = $('#ddl_department').val();
    var input_subDep = $('#ddl_sub_department').val();
    var input_dateMonthYear = $('#dayWeekMonthFilter').val();
    let selectedScheme = $('#lable_text_scheme_cate').text();
    let yearmonth = $('#lable_text_year_month').text();
  if(input_schemCode !='' && input_schemName !='' && input_subScheme !='' && input_dep !='' && input_subDep !='' && input_dateMonthYear != ''){
          var paymentDate = $('#paymentDate').val();
            if(paymentDate == ''){
              $('#paymentDate_error').show();
              $('#paymentDate').addClass('text-danger');
              var scrollTarget = document.getElementById('paymentDateForm');
              scrollableContainer.scrollTop = scrollTarget.offsetTop;
              $("#formFilters").submit();
             $('.blulkapproveSummary').modal({backdrop: 'static',keyboard: false}).modal('show');
             $('#bulkApproveCloseBtn').hide();
              var dataFilters = window.localStorage.getItem('filters');
              var approveStatus = 1;
              $('#tblBulkApproveSummary').DataTable().clear().destroy();
              $('#tblBulkApproveSummary').DataTable({
              "aLengthMenu": [10, 25, 50,100],
              "pageLength": -1,
              "footer": true,
              "dom": 'Bfrtip',
              "buttons": [
              {
                  extend: 'csv',
                  text: 'CSV',
                  filename: selectedScheme+'-bulk-approval-summary-'+yearmonth,
                  exportOptions: {
                      rows: ':visible', 
                      modifier: {
                          selected: null 
                      }
              },
                  extend: 'excel',
                  text: 'Excel',
                  filename: selectedScheme+'-bulk-approval-summary-'+yearmonth 
                  extend: 'pdf',
                  text: 'PDF',
              }],
              "searching": true,
              "processing": true,
              "serverSide": true,
              "ajax": {
              "url": APIURL + 'fn_payment_getbulkapprovestatistic',
              "type": "POST",
              "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
              "dataType": "JSON",
              "data": function (data) {
                data.fileters = dataFilters;
                data.approveStatus = approveStatus;
                data.user_id = loginUser_id;
              "beforeSend": function () {
                $('#tblBulkApproveSummary_tfoot').hide();
                $('#preloader').show(); 
                tblPreloaderEnable('tblBulkApproveSummary');
              "error": function (xhr, error, thrown) {
                  Swal.fire({
                      icon: "error",
                      title: 'Service Error !',
                      showConfirmButton: false,
                      timer: 2000
                  });
              "dataSrc": 'data',
              "columns": [
              { "data": "S.No", render: function (data, type, row, meta) {
                  return meta.row + meta.settings._iDisplayStart + 1;
              { "data": "scheme_name" },
              { "data": "distrinct_name" },
              { "data": "taluk_name" },
              { "data": "yyyymm"},
              { "data": "trackingID",
              "render": function (data, type, row) {
                return '<a href ="#" style="cursor:default !important;text:decoration:none !important;" id="bulk_'+data+'"><span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Approval</span></a>';
              }},
              { "data": "apb_benificiaries_count" },
              { "data": "apb_benificiaries_amount"},
              { "data": "ach_benificiaries_count"},
              { "data": "ach_benificiaries_amount"},
              { "data": "total_count"},
              { "data": "total_value"},
              ],
              "aoColumnDefs": [{
              'bSortable': false,
              'aTargets': [0]
              "drawCallback": function (settings) {
              "initComplete": function (settings, json) {
                $('#preloader').hide(); 
                buklApproveSummary = json.data;
                $('#tblBulkApproveSummary_action_status').hide();
                if (!buklApproveSummary || buklApproveSummary.length === 0) {     
                    $('#allApprovalPermissionEnable').hide();  
                    $('#allApprovalPermissionEnable').prop('disabled', true);
                  } else {
                    $('#allApprovalPermissionEnable').show();
                    $('#allApprovalPermissionEnable').prop('disabled', false);
                  buklApproveSummaryTotalCount = buklApproveSummary.length;
              "footerCallback": function (row, data, start, end, display) {
                  var api = this.api();
                  if(data.length !=0 && data.length != undefined){
                    let total_table_row =  `<tr>
                      <th id="footerColumn0"></th>
                      <th id="footerColumn1"></th>
                      <th id="footerColumn2">Total</th>
                      <th id="footerColumn3"></th>
                      <th id="footerColumn4"></th>
                      <th id="footerColumn5"></th>
                      <th id="footerColumn6"></th>
                      <th id="footerColumn7"></th>
                      <th id="footerColumn8"></th>
                      <th id="footerColumn9"></th>
                      <th id="footerColumn10"></th>
                      <th id="footerColumn11"></th>
                    </tr>`;
                    $('#tblBulkApproveSummary_tfoot').html(total_table_row);
                    $('#tblBulkApproveSummary_tfoot').show();
                  }else{
                    $('#tblBulkApproveSummary_tfoot').hide();
                  var columnsToSum = [6,7,8,9,10,11];
                  columnsToSum.forEach(function (columnIndex) {
                      var sum = api.column(columnIndex, { page: 'current' }).data()
                          .reduce(function (a, b) {
                              var val = parseFloat(b);
                              
                              return isNaN(val) ? a : a + val;
                          }, 0);
                          $('#tblBulkApproveSummary_tfoot #footerColumn'+columnIndex).text(sum);
                      $(api.column(columnIndex).footer()).html(sum);
              }); 
  else{
          title: "Select must scheme code, scheme name,Subscheme, department, sub department and payment period",
          showConfirmButton: true,
    $("#formFilters").submit();
    $("html, body").animate({ scrollTop: 0 }, 3000);
$('#tblBulkApproveSummary_action_status').hide();
function allApprovalPermissionEnable(){
  $('#allApprovalPermissionEnable').prop('disabled',true);
  $('#allApprovalPermissionEnable').hide();
  buklApproveSummary.forEach(items => {
    if(items.status == 0){
      $('#bulk_'+items.trackingID).html(`<span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Approve </span>`);
  if (buklApproveSummary.length > 0) {
      const batchSize = 5;
      var  trackingIDArr = buklApproveSummary.filter(n => n.status == 0);
      var runningprocess = buklApproveSummary.filter(n => n.status == 1);
      var loopcounter = batchSize;
      loopcounter = loopcounter - runningprocess.length;
      if (loopcounter > 0)
      {
        if (loopcounter > trackingIDArr.length)
           loopcounter = trackingIDArr.length;
        bulkApproveProcessBatch(0,loopcounter,trackingIDArr);
  } else {
          title: 'Summary is Empty !',
function bulkApproveProcessBatch(startIndex, loopcounter, trackingIDArr){
  var paymentDate = $('#paymentDate').val();
  let userID = userDataString['user_id'];
  let transferToPaymentUniqId = [];
    for (let i = startIndex; i < loopcounter; i++) {
      $.each( buklApproveSummary, function( j, obj ) {
            if(obj.trackingID == trackingIDArr[i].trackingID){           
              obj.status = 1;
          $('#bulk_'+trackingIDArr[i].trackingID).focus();
        url: APIURL+'allApprove',
        method: 'POST',
        headers: {'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
        data: { fileters: dataFilters,summaryDistrictCode:trackingIDArr[i].district_code,summaryTalukCode:trackingIDArr[i].taluk_code, approveStatus: 1,user_id:userID,trackingId:trackingIDArr[i].trackingID,paymentDate:paymentDate},
        dataType: 'json',
        success: function (response) {
          if(response.success == 0){
            let ouput = response.data;
            $('#bulk_' + ouput.trackingid).html('<span class="badge bg-danger btn-sm">Failed !</span>');
            $.each(buklApproveSummary, function( j, obj ) {
                if(obj.trackingID == ouput.trackingid){         
                  obj.status = 3;
        error: function (xhr, status, error) {
          $('#bulk_' + trackingIDArr[i].trackingID).html('<span class="badge bg-danger btn-sm">Failed !</span>');
                if(obj.trackingID == trackingIDArr[i].trackingID){         
          console.log("Error:", error);
          bulkApproveUpdatestatus(trackingIDArr[i].trackingID);
function bulkApproveUpdatestatus(trakingId){
  $('#preloader').hide();
      url: APIURL + 'bulkApprovalStatus',
      data: { trackingId: trakingId },
        let output = response.data[0];
        if (output.status == 2) {
          $('#bulk_'+trakingId).html('<span class="badge bg-success btn-sm"><i class="bi bi-check2-circle"></i>' + output.updated_count + ' Approved </span>');
          $.each( buklApproveSummary, function( j, obj ) {
            if(obj.trackingID == trakingId){         
              obj.status = 2;
          var  pendingSummary = buklApproveSummary.filter(n => n.status == 0);
          var  runningCount = buklApproveSummary.filter(n => n.status == 1);
          var checkCount = pendingSummary.length + runningCount.length;
          console.log('check count >> ',checkCount);
          if(checkCount!=0){
            allApprovalPermissionEnable();
          var failedTrackid = buklApproveSummary.filter(n => n.status == 3);
          if (failedTrackid.every(failedObj => failedObj.trackingID !== trakingId)) {
              $('#bulk_'+trakingId).html('<span class="badge bg-info btn-sm">' + output.updated_count + ' In-progress</span>');
              setTimeout(() => { bulkApproveUpdatestatus(trakingId);}, 3000);
            var  pendingSummary = buklApproveSummary.filter(n => n.status == 0);
        var successArr = buklApproveSummary.filter(n => n.status == 2);
        var failedArr = buklApproveSummary.filter(n => n.status == 3);
        let successAndFailedCount = successArr.length + failedArr.length;
        if(buklApproveSummaryTotalCount == successAndFailedCount){
          $('#tblBulkApproveSummary_action_status').show();
          $('#tblBulkApproveSummary_action_total').text(successAndFailedCount);
          $('#tblBulkApproveSummary_action_success').text(successArr.length);
          $('#tblBulkApproveSummary_action_failed').text(failedArr.length);
          $('#bulkApproveCloseBtn').show();
          $('#paymentDate').val('');
      error: function (xhr, status, error) {
$('#bulkApproveCloseBtn').on('click',function(){
  tabClickValue(0);
               
let checkValue = window.localStorage.getItem('bulkApprvelstatustrigger');
intervalId = 1;
$('#progress_strat').hide();
$('#selectApprovalBtn').hide();
$('#bulkApprovalBtn').hide();
var showColletionData = true;
function getCurrentBulkApprovalCount() {
  $('#selectApproval').show();
    $('#bulkApproval').show();
    let getTriggerid = window.localStorage.getItem('bulkApprvelID');
    console.log('get trigger id');
    console.log(getTriggerid);
  if(intervalId !== undefined){
    if (intervalId == 1) {
      $('#progress_strat').show();
    console.log('intervalId', intervalId);
    if(intervalId ==1){
      get_pending_paymment_list(dataFilters,1);
    $('#selectApproval').hide();
    $('#bulkApproval').hide();
    $('#selectApprovalBtn').show();
    $('#bulkApprovalBtn').show();
      data: { trackingId: getTriggerid },
        console.log('bulkapproval status response >>> ', response.data);
        var output = response.data[0];
        if (output.status ==1 || output.status ==2 ||output.status ==0) {
          showColletionData = false;
          $('#progress_strat').hide();
          $('#pending_approval_processing').show();
          if(output.status ==1 ||output.status ==0){
            setTimeout(function() {getCurrentBulkApprovalCount();}, 5000);
          if (output.status == 2) {
            console.log('clearInterval path enable');            
            $('#pending_approval_processing').hide();
            $('#selectApproval').show();
            $('#bulkApproval').show();
            $('#selectApprovalBtn').hide();
            $('#bulkApprovalBtn').hide();
            window.localStorage.setItem('bulkApprvelstatustrigger', output.status);
              get_pending_paymment_list(dataFilters,1);
          } else {
            $('#pending_approval_processing_count').text(output.updated_count);
            $('#pending_approval_processing_total_count').text(output.total_count);
        intervalId++;
function reInitiateApprove(){
  var reinitiatePaymentDate = $('#reinitiatePaymentDate').val();
  if(reinitiatePaymentDate == ''){
        $('#reinitiatePaymentDate_error').show();
        $('#reinitiatePaymentDate').addClass('text-danger');
          var scrollTarget = document.getElementById('reinitiatePaymentDateForm');
          if (scrollTarget) {
              document.body.scrollTop = scrollTarget.offsetTop;
              document.documentElement.scrollTop = scrollTarget.offsetTop;
    $('input[name="failed_check[]"]:checked').each(function () {
    checkboxValues.push($(this).val());
          url: APIURL+'reinitiateApprove', 
          data: {groupOfarray:checkboxValues,fileters:dataFilters,approveStatus:4,user_id:userID,payment_date:reinitiatePaymentDate},
            $('#reinitiatePaymentDate').val('');
              console.log(output);
                get_failed_paymment_list(dataFilters,4,null);
let failureToEmoBulkApproveArr = [];
let failureToEmoBulkApproveArrCount = 0;
  function failureToEmoBulkApprove(){
      $('#allApprovalEmo').prop('disabled',true);
      $('#allApproveCloseBtn').prop('disabled',false);
      $('#allApproveCloseBtn').show();
            let reason_code = $('#failur_reason_filter').val();
             $('.emoBlulkapproveSummary').modal({backdrop: 'static',keyboard: false}).modal('show');
              $('#tblEmoBulkApproveSummary').DataTable().clear().destroy();
              $('#tblEmoBulkApproveSummary').DataTable({
                  filename: selectedScheme+'-Bulk EMO Transfer Summary-'+yearmonth,
                  filename: selectedScheme+'-Bulk EMO Transfer Summary-'+yearmonth 
              "url": APIURL + 'emo_bulk_summary',
                data.reason_code = reason_code;
                $('#tblEmoBulkApproveSummary_tfoot').hide();
                tblPreloaderEnable('tblEmoBulkApproveSummary');
                return '<a href ="#" style="cursor:default !important;text:decoration:none !important;" id="bulk_'+data+'"><span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Transfer</span></a>';
                failureToEmoBulkApproveArr = json.data;
                $('#tblEmoBulkApproveSummary_action_status').hide();
                if (typeof failureToEmoBulkApproveArr === 'undefined' || failureToEmoBulkApproveArr === null) {
                  failureToEmoBulkApproveArr = [];
                } else {
                  failureToEmoBulkApproveArrCount = failureToEmoBulkApproveArr.length;
                if (!failureToEmoBulkApproveArr || failureToEmoBulkApproveArr.length === 0) {                
                    $('#allApprovalEmo').prop('disabled', true);
                    $('#allApprovalEmo').hide();
                    $('#allApprovalEmo').prop('disabled', false);
                    $('#allApprovalEmo').show();
                "footerCallback": function (row, data, start, end, display) {
                var api = this.api();
                if(data.length !=0 && data.length != undefined){
                let total_table_row =  `<tr>
                    <th id="footerColumn0"></th>
                    <th id="footerColumn1"></th>
                    <th id="footerColumn2">Total</th>
                    <th id="footerColumn3"></th>
                    <th id="footerColumn4"></th>
                    <th id="footerColumn5"></th>
                    <th id="footerColumn6"></th>
                    <th id="footerColumn7"></th>
                    <th id="footerColumn8"></th>
                    <th id="footerColumn9"></th>
                    <th id="footerColumn10"></th>
                    <th id="footerColumn11"></th>
                </tr>`;
                $('#tblEmoBulkApproveSummary_tfoot').html(total_table_row);
                  $('#tblEmoBulkApproveSummary_tfoot').show();
                }else{
                  $('#tblEmoBulkApproveSummary_tfoot').hide();
                var columnsToSum = [6,7,8,9,10,11];
                columnsToSum.forEach(function (columnIndex) {
                var sum = api.column(columnIndex, { page: 'current' }).data()
                  $('#tblEmoBulkApproveSummary_tfoot #footerColumn'+columnIndex).text(sum);
                $(api.column(columnIndex).footer()).html(sum);
$('#tblEmoBulkApproveSummary_action_status').hide();
function allApprovalEmo(){
  $('#allApprovalEmo').prop('disabled',true);
  $('#allApprovalEmo').hide();
  $('#allApproveCloseBtn').hide();
  failureToEmoBulkApproveArr.forEach(items => {
      $('#bulk_'+items.trackingID).html(`<span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Transfer</span>`);
  if (failureToEmoBulkApproveArr.length > 0) {
      var  trackingIDArr = failureToEmoBulkApproveArr.filter(n => n.status == 0);
      var runningprocess = failureToEmoBulkApproveArr.filter(n => n.status == 1);
        failureToEmoBulkApproveProcessBatch(0,loopcounter,trackingIDArr);
function failureToEmoBulkApproveProcessBatch(startIndex, loopcounter, trackingIDArr){
  let reason_code = $('#emo_reason_code').val();
      $.each( failureToEmoBulkApproveArr, function( j, obj ) {
        url: APIURL+'emoAllApprove',
        data: { fileters: dataFilters,summaryDistrictCode:trackingIDArr[i].district_code,summaryTalukCode:trackingIDArr[i].taluk_code, approveStatus: 1,user_id:userID,trackingId:trackingIDArr[i].trackingID,paymentDate:reinitiatePaymentDate,reason_code:reason_code},
            $.each(failureToEmoBulkApproveArr, function( j, obj ) {
          failureToEmoBulkApproveUpdatestatus(trackingIDArr[i].trackingID);
function failureToEmoBulkApproveUpdatestatus(trakingId){
          $('#bulk_'+trakingId).html('<span class="badge bg-success btn-sm"><i class="bi bi-check2-circle"></i>' + output.updated_count + ' Transferred</span>');
          $.each( failureToEmoBulkApproveArr, function( j, obj ) {
          console.log($('#bulk_'+trakingId));
          allApprovalEmo();
          var failedTrackid = failureToEmoBulkApproveArr.filter(n => n.status == 3);
              setTimeout(() => { failureToEmoBulkApproveUpdatestatus(trakingId);}, 3000);
            console.log($('#bulk_'+trakingId));
            allApprovalEmo();
          var successArr = failureToEmoBulkApproveArr.filter(n => n.status == 2);
          var failedArr = failureToEmoBulkApproveArr.filter(n => n.status == 3);
          let successAndFailedCount = failedArr.length + successArr.length;
          if(failureToEmoBulkApproveArrCount == successAndFailedCount){
            $('#tblEmoBulkApproveSummary_action_status').show();
            $('#tblEmoBulkApproveSummary_action_total').text(successAndFailedCount);
            $('#tblEmoBulkApproveSummary_action_success').text(successArr.length);
            $('#tblEmoBulkApproveSummary_action_failed').text(failedArr.length);
            $('#allApproveCloseBtn').show();
$('#allApproveCloseBtn').on('click',function(){
  tabClickValue(2);
function failureToEmoSelectApprove(){
          url: APIURL+'select_emo_transfer', 
          data: {groupOfarray:checkboxValues,fileters:dataFilters,approveStatus:4,user_id:userID},
let bulkReInitiateApproveArr = [];
let bulkReInitiateApproveArrCount = 0;
  function bulkReInitiateApprove(){
      $('#allApprovalReinitiate').prop('disabled',true);
      $('#allApprovalReinitiateCloseBtn').prop('disabled',false);
      $('#allApprovalReinitiate').hide();
    let reason_code = $('#failur_reason_filter').val();
          var paymentDate = $('#reinitiatePaymentDate').val();
              $('#reinitiatePaymentDate_error').show();
              $('#reinitiatePaymentDate').addClass('text-danger');
              var scrollTarget = document.getElementById('reinitiatePaymentDateForm');
              if (scrollTarget) {
                  document.body.scrollTop = scrollTarget.offsetTop;
                  document.documentElement.scrollTop = scrollTarget.offsetTop;
             $('.reinitiateBlulkapproveSummary').modal({backdrop: 'static',keyboard: false}).modal('show');
              let selectedScheme = $('#lable_text_scheme_cate').text();
              let yearmonth = $('#lable_text_year_month').text();
              $('#tblReinitiateBulkApproveSummary').DataTable().clear().destroy();
              $('#tblReinitiateBulkApproveSummary').DataTable({
                  filename: selectedScheme+'-bulk reinitiate summary-'+yearmonth,
                  filename: selectedScheme+'-Bulk reinitiate summary-'+yearmonth 
                  filename: selectedScheme+'-bulk reinitiate summary-'+yearmonth 
              "url": APIURL + 'reinitiate_bulk_summary',
                $('#tblReinitiateBulkApproveSummary_tfoot').hide();
                tblPreloaderEnable('tblReinitiateBulkApproveSummary');
                return '<a href ="#" style="cursor:default !important;text:decoration:none !important;" id="bulk_'+data+'"><span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Reinitiate</span></a>';
                  bulkReInitiateApproveArr = json.data;
                  $('#tblReinitiateBulkApproveSummary_action_status').hide();
                  if (bulkReInitiateApproveArr === undefined || bulkReInitiateApproveArr.length === undefined) {
                    bulkReInitiateApproveArr = [];
                    bulkReInitiateApproveArrCount = bulkReInitiateApproveArr.length;
                  if (!bulkReInitiateApproveArr || bulkReInitiateApproveArr.length === 0) {                
                    $('#allApprovalReinitiate').prop('disabled', true);
                    $('#allApprovalReinitiate').hide();
                    $('#allApprovalReinitiate').prop('disabled', false);
                    $('#allApprovalReinitiate').show();
                        <th id="footerColumn0"></th>
                        <th id="footerColumn1"></th>
                        <th id="footerColumn2">Total</th>
                        <th id="footerColumn3"></th>
                        <th id="footerColumn4"></th>
                        <th id="footerColumn5"></th>
                        <th id="footerColumn6"></th>
                        <th id="footerColumn7"></th>
                        <th id="footerColumn8"></th>
                        <th id="footerColumn9"></th>
                        <th id="footerColumn10"></th>
                        <th id="footerColumn11"></th>
                    $('#tblReinitiateBulkApproveSummary_tfoot').html(total_table_row);
                    $('#tblReinitiateBulkApproveSummary_tfoot').show();
                    $('#tblReinitiateBulkApproveSummary_tfoot').hide();
                  var sum = api.column(columnIndex, { page: 'current' }).data()
                    .reduce(function (a, b) {
                        var val = parseFloat(b);
                        return isNaN(val) ? a : a + val;
                    }, 0);
                    $('#tblReinitiateBulkApproveSummary_tfoot #footerColumn'+columnIndex).text(sum);
                  $(api.column(columnIndex).footer()).html(sum);
$('#tblReinitiateBulkApproveSummary_action_status').hide();
function allApprovalReinitiate(){
  $('#allApprovalReinitiate').prop('disabled',true);
  $('#allApprovalReinitiate').hide();
  $('#allApprovalReinitiateCloseBtn').hide();
  bulkReInitiateApproveArr.forEach(items => {
      $('#bulk_'+items.trackingID).html(`<span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Reinitiate</span>`);
  if (bulkReInitiateApproveArr.length > 0) {
      var  trackingIDArr = bulkReInitiateApproveArr.filter(n => n.status == 0);
      var runningprocess = bulkReInitiateApproveArr.filter(n => n.status == 1);
        bulkReinitiateApproveProcessBatch(0,loopcounter,trackingIDArr);
function bulkReinitiateApproveProcessBatch(startIndex, loopcounter, trackingIDArr){
  let reason_code = $('#select_reason_code').val();
  console.log('reason_code >>> ', reason_code );
  var paymentDate = $('#reinitiatePaymentDate').val();
      $.each( bulkReInitiateApproveArr, function( j, obj ) {
        url: APIURL+'reinitiateAllApprove',
        data: { fileters: dataFilters,summaryDistrictCode:trackingIDArr[i].district_code,summaryTalukCode:trackingIDArr[i].taluk_code, approveStatus: 1,user_id:userID,trackingId:trackingIDArr[i].trackingID,paymentDate:paymentDate,reason_code:reason_code},
            $.each(bulkReInitiateApproveArr, function( j, obj ) {
          bulkReinitiateApproveUpdatestatus(trackingIDArr[i].trackingID);
function bulkReinitiateApproveUpdatestatus(trakingId){
          $('#bulk_'+trakingId).html('<span class="badge bg-success btn-sm"><i class="bi bi-check2-circle"></i>' + output.updated_count + ' Reinitiated </span>');
          $.each( bulkReInitiateApproveArr, function( j, obj ) {
          allApprovalReinitiate();
          var failedTrackid = bulkReInitiateApproveArr.filter(n => n.status == 3);
              setTimeout(() => { bulkReinitiateApproveUpdatestatus(trakingId);}, 3000);
            allApprovalReinitiate();
        var successArr = bulkReInitiateApproveArr.filter(n => n.status == 2);
        var failedArr = bulkReInitiateApproveArr.filter(n => n.status == 3);
        if(bulkReInitiateApproveArrCount == successAndFailedCount){
            $('#tblReinitiateBulkApproveSummary_action_status').show();
            $('#tblReinitiateBulkApproveSummary_action_total').text(successAndFailedCount);
            $('#tblReinitiateBulkApproveSummary_action_success').text(successArr.length);
            $('#tblReinitiateBulkApproveSummary_action_failed').text(failedArr.length);
            $('#allApprovalReinitiateCloseBtn').show();
$('#allApprovalReinitiateCloseBtn').on('click',function(){
  $('#generate_payment_status').hide();
  $('#generate_payment_disable_btn').hide();
let start = 0;
function triggerScript(scriptName) {
  start=1;
  window.localStorage.setItem('generate_payment_enable', true);
      $('#generate_payment_real_btn').hide();
      $('#generate_payment_status').addClass('d-inline');
      $('#generate_payment_status').show();
      $('#generate_payment_disable_btn').show();
    url: APIURL + 'execute_script', 
    method: 'GET', 
    headers: {
        'X-APP-KEY': config.app_key,
        'X-APP-NAME': config.app_name
    data: {
      script: scriptName,
      fileters:dataFilters,
      user_id:loginUser_id
    dataType: 'json',
    success: function (response) {
      start = 2;
      $('#generate_payment_status').removeClass('d-inline');
      $('#generate_payment_status').hide();
      $('#generate_payment_disable_btn').hide();
      $('#generate_payment_real_btn').show();
      window.localStorage.setItem('generate_payment_enable', false);
        if (response.success == 1) {
            output = response.data;
            console.log(output);
                title: "Generated Payment File Completed Successfully",
            $('#generate_file_status_cards').html('');
            setTimeout(() => {
              get_generate_payment_file_pre_list(dataFilters,5);
            }, 2000);
        } else if (response.success == 0) {
    error: function () {
            icon: "error",
            title: "Service Error!",
            showConfirmButton: false,
            timer: 2000
        get_generate_payment_file_pre_list(dataFilters,5);
  generateFileStatus();
          title: "select best scheme code, scheme name,Subscheme, department, sub department and payment period",
function generateFileStatus(){
    url: APIURL + 'file_gentrated_status', 
    method: 'POST', 
            let column = ``;
            if(start != 2){
                output.forEach(files => {
                let sumValues = files.pending+files.completed;
                    column += `<div class="d-flex">
                                  <div class="col mx-2 text-center mb-2 align-items-stretch">
                                  <div class="card col-4 info-card customers-card-lavander h-100">
                                    <div class="card-body pt-3">
                                      <h3 id="card_total_invalid_count" class="fw-bold">${files.payment_date}</h3>
                                      <span class="badge bg-primary">Payment date</span>
                                    </div>
                                    <div class="row mb-3">
                                      <div class="col-md" style="border-right: 2px solid #0d6efd !important;">
                                        <h3 id="card_aadhar_invalid_count" class="fw-bold">${files.total}</h3>
                                        <span class="badge bg-blue">Total</span>
                                      </div>
                                        <h3 id="card_ac_invalid_count" class="fw-bold">${files.pending}</h3>
                                        <span class="badge card-green-orange">Pending</span>
                                        <h3 id="card_obsolete_invalid_count" class="fw-bold">${files.completed}</h3>
                                        <span class="badge bg-success" >Processed</span>
                                      <div class="col-md">
                                        <h3 id="card_obsolete_invalid_count" class="fw-bold">${files.files_count}</h3>
                                        <span class="badge bg-info" >Files Created</span>
                                  </div>
                                </div>`;
                $('#generate_file_status_cards').html(column);
                generateFileStatus();
          $('#generate_file_status_cards').html('');
$('#transfer_payment_status').hide();
$('#transfer_payment_disable_btn').hide();
let transferStrat = 0;
function triggerScript2(scriptName) {
  transferStrat = 1;
  window.localStorage.setItem('transfer_payment_enable', true);
  $('#transfer_payment_status').addClass('d-inline');
  $('#transfer_payment_status').show();
  $('#transfer_payment_disable_btn').show();
  $('#transfer_payment_enable').hide();
      transferStrat = 2;
      $('#transfer_payment_status').removeClass('d-inline');
      $('#transfer_payment_status').hide();
      $('#transfer_payment_disable_btn').hide();
      $('#transfer_payment_enable').show();
      $('#tranfer_to_bank_file_status_cards').html('');
      window.localStorage.setItem('transfer_payment_enable', false);
              get_transfer_payment_to_bank_pre_list(dataFilters,6);
  transferredToBankFileStatus();
function transferredToBankFileStatus(){
    url: APIURL + 'file_tranferred_to_bank_status', 
            $('#tranfer_to_bank_file_status_cards').html(column);
            if(transferStrat !=2){
              output.forEach(files => {
                let sumValues = files.pending+files.transferred;
                  column +=  `<div class="d-flex">
                    <div class="col mx-2 text-center mb-2 align-items-stretch">
                    <div class="card col-4 info-card customers-card-lavander h-100">
                    <div class="card-body pt-3">
                    <h3 id="card_total_invalid_count" class="fw-bold">${files.payment_date}</h3>
                    <span class="badge bg-primary">Payment date</span>
                    <div class="row mb-3">
                    <div class="col-md" style="border-right: 2px solid #0d6efd !important;">
                    <h3 id="card_aadhar_invalid_count" class="fw-bold">${files.total}</h3>
                    <span class="badge bg-blue">Total</span>
                    <h3 id="card_ac_invalid_count" class="fw-bold">${files.pending}</h3>
                    <span class="badge card-green-orange">Pending</span>
                    <div class="col-md">
                    <h3 id="card_obsolete_invalid_count" class="fw-bold">${files.transferred}</h3>
                    <span class="badge bg-success" >Transferred</span>
                  </div>`;
              $('#tranfer_to_bank_file_status_cards').html(column);
              transferredToBankFileStatus();
          $('#tranfer_to_bank_file_status_cards').html('');
function viewScheme(listID){
    $('#popup_scheme').text('')
    $('#popup_year').text('')
    $('#popup_month').text('')
    $('#popup_beneficiary_name').text('')
    $('#popup_beneficiary_mobile').text('')
    $('#popup_account_type').text('')
    $('#popup_installment').text('')
    $('#popup_amount').text('')
    $('#popup_transcation').text('');
    $('#check_activity').text('');
    url: APIURL + 'viewpopupData', 
      list_id: listID
            output = response.data[0];
            timeLine = response.data.timeline;
            $('#popup_scheme').text(output.scheme_name);
            $('#popup_year').text(output.year_part);
            $('#popup_month').text(output.Month);
            $('#popup_beneficiary_name').text(output.beneficiary_name);
            $('#popup_beneficiary_mobile').text(output.beneficiary_mobile_no);
            $('#popup_account_type').text(output.payment_mode);
            $('#popup_installment').text(output.installment_id);
            $('#popup_amount').text(output.amount);
            $('#popup_transcation').text(output.created_ts);
              var activeColStart = `<div class="col-lg-12">`;
              var activeColEnd = `</div>`;
              var activeTitleOne = `<h5 class="card-title mb-2 px-2"><i class="bi bi-check2-circle"></i> Activity</h5>`;
              var activeTitletwo = `<h5 class="card-title mb-2 px-2"><i class="bi bi-check2-circle"></i> Re-Initiate Activity</h5>`;
              let timelineValue = '';
              timeLine.forEach((action, key) => {
                timelineValue += `<div class="activity-item d-flex">
                <div class="activite-label">${key + 1}</div>
                <i class="bi bi-circle-fill activity-badge  align-self-start" style="color:#9090bf"></i>
                <div class="activity-content">
                 ${action.action_desc}
                </div>`;
              var transcation = `${activeColStart}<div class="activity">${activeTitleOne}`+`${timelineValue}</div>${activeColEnd}`;
              $('#check_activity').html(transcation);
      })
function generateUniqueId() {
  const timestamp = new Date().getTime();
  return `${timestamp}`;
function tblPreloaderEnable(tableName){
      var processingDiv = document.getElementById(tableName+'_processing');
      var displayStatus = window.getComputedStyle(processingDiv).display;
      if (displayStatus === 'block') {
      $('#'+tableName+'_processing').html(`<div id="preloader"></div>`);
        $('#'+tableName+'_processing').text(`<div id="preloader"></div>`);
var generate_payment_enable = window.localStorage.getItem('generate_payment_enable');
var transfer_payment_enable = window.localStorage.getItem('transfer_payment_enable');
if(generate_payment_enable === 'true'){
  $('#generate_payment_real_btn').hide();
  $('#generate_payment_status').addClass('d-inline');
  $('#generate_payment_status').show();
  $('#generate_payment_disable_btn').show();
if(transfer_payment_enable === 'true'){
    $('#transfer_payment_status').addClass('d-inline');
    $('#transfer_payment_status').show();
    $('#transfer_payment_disable_btn').show();
    $('#transfer_payment_enable').hide();
function viewSummary(){
let yearmonth = $('#lable_text_year_month').text();
  $('#transFerToValidBtn').hide();
      window.localStorage.setItem('deDuplicatePopup',2);
      $('.deduplicationValidateSummary').modal({backdrop: 'static',keyboard: false}).modal('show');
      var dataFilters = window.localStorage.getItem('filters');
      var approveStatus = 1;
      $('#deduplicationValidateSummary').DataTable().clear().destroy();
      $('#deduplicationValidateSummary').DataTable({
      "aLengthMenu": [10, 25, 50,100],
      "pageLength": -1,
          extend: 'csv',
          text: 'CSV',
          filename: selectedScheme+'-Validation-summary-'+yearmonth,
          exportOptions: {
              rows: ':visible', 
              modifier: {
                  selected: null 
          extend: 'excel',
          text: 'Excel',
          filename: selectedScheme+'-Validation-summary-'+yearmonth 
          extend: 'pdf',
          text: 'PDF',
      }],
      "url": APIURL + 'fn_payment_validatebenificiaries',
      "type": "POST",
      "headers": { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
      "dataType": "JSON",
      "data": function (data) {
      data.fileters = dataFilters;
      data.approveStatus = approveStatus;
      data.user_id = loginUser_id;
      "beforeSend": function () {
        $('#deduplicationValidateSummary_tfoot').hide();
      $('#preloader').show(); 
      tblPreloaderEnable('deduplicationValidateSummary');
      "error": function (xhr, error, thrown) {
          Swal.fire({
              title: 'Service Error !',
      "dataSrc": 'data',
      { "data": "S.No", render: function (data, type, row, meta) {
          return meta.row + meta.settings._iDisplayStart + 1;
      { "data": "scheme_name" },
      { "data": "subscheme_name" },
      { "data": "district_name" },
      { "data": "taluk_name"},
      { "data": "yyyymm" },
      { "data": "total_count"},
      { "data": function (data, type, row, meta) {
          return data.total_count - data.error_count;
      { "data": "error_count"},
      { "data": "duplicatebenificiary"},
      { "data": "duplicateaadhaar"},
      { "data": "duplicateaccount"},
      { "data": "invalidbeneficiaryname"},
      { "data": "invalidiinorifsc"},
      { "data": "invalidaadhaar"},
      { "data": "invalidaccount"},
      { "data": "obsolete_beneficiary"},
          return '<a onclick="downloadFileDuplicates(' + data.distirict_code + ',' + data.taluk_code + ',\'' + data.district_name + '\',\'' + data.taluk_name + '\')" ><span class="btn btn-primary btn-sm"><i class="bi bi-download"></i> Download</span></span>';
      $('#transFerToValidBtn').show();
      buklApproveSummary = json.data;
        let checkvalidCount = false;
        if(buklApproveSummary != null){
          for (let i = 0; i < buklApproveSummary.length; i++) {
            let rowValid = buklApproveSummary[i];
            let validaCount = rowValid.total_count - rowValid.error_count;
              if (validaCount > 0) {
                checkvalidCount = true;
                break;
        let noRecordInfo = `<span class="badge badge-danger custom-btn"><i class="bi bi-info-circle"></i> No valid records to transfer</span>`;
      if(checkvalidCount!=false){
        if(buklApproveSummary==null){
          TransferPermissionBtnDisable();
          $('.deduplicationValidateSummary').modal('hide');
          $('#transFerToValidBtn').show();
        $('#valid_records_not_found_info').html('');
      }else{
        $('#transFerToValidBtn').hide();
        $('#valid_records_not_found_info').html(noRecordInfo);        
      "footerCallback": function (row, data, start, end, display) {
              let total_table_row =  `<tr>
                <th id="footerColumn0"></th>
                <th id="footerColumn1"></th>
                <th id="footerColumn2"></th>
                <th id="footerColumn3"></th>
                <th id="footerColumn4"></th>
                <th id="footerColumn5">Total</th>
                <th id="footerColumn6"></th>
                <th id="footerColumn7"></th>
                <th id="footerColumn8"></th>
                <th id="footerColumn9"></th>
                <th id="footerColumn10"></th>
                <th id="footerColumn11"></th>
                <th id="footerColumn12"></th>
                <th id="footerColumn13"></th>
                <th id="footerColumn14"></th>
                <th id="footerColumn15"></th>
                <th id="footerColumn16"></th>
              </tr>`;
            $('#deduplicationValidateSummary_tfoot').html(total_table_row);
            $('#deduplicationValidateSummary_tfoot').show();
           $('#deduplicationValidateSummary_tfoot').hide();
          var columnsToSum = [6,7,8,9,10,11,12,13,14,15,16];
                  $('#deduplicationValidateSummary_tfoot #footerColumn'+columnIndex).text(sum);           
var bulkTransferPaymentProcessSummary = [];
var bulkTransferPaymentProcessSummaryCount = 0;
let transferPaymentProcessApproveStatus = window.localStorage.getItem('transferPaymentProcess');
if(transferPaymentProcessApproveStatus === null){
  window.localStorage.setItem('transferPaymentProcess', 'false');
function showTranferPaymentProcess(){
  $('#transferBtn').prop('disabled',false);
  let transferPaymentProcess = window.localStorage.getItem('transferPaymentProcess');
  $('#deduplicationValidateFunctionsListClose').click();
  $('validateSummaryClose').click();
  if(transferPaymentProcess == 'true'){
    $('.transferPaymentProcess').modal({backdrop: 'static',keyboard: false}).modal('show');
        var approveStatus = 1;
        $('#transferPaymentProcess').DataTable().clear().destroy();
        $('#transferPaymentProcess').DataTable({
        "pageLength": -1,
            extend: 'csv',
            text: 'CSV',
            filename: selectedScheme+'-Transfer-summary-'+yearmonth,
            exportOptions: {
                rows: ':visible', 
                modifier: {
                    selected: null 
            extend: 'excel',
            text: 'Excel',
            filename: selectedScheme+'-Transfer-summary-'+yearmonth 
            extend: 'pdf',
            text: 'PDF',
        "searching": false,
        "url": APIURL + 'transferPaymentSummaryList',
        data.fileters = dataFilters;
        data.approveStatus = approveStatus;
        data.user_id = loginUser_id;
          $('#transferPaymentProcess_tfoot').hide();
        $('#preloader').show(); 
        tblPreloaderEnable('transferPaymentProcess');
        { "data": "district_name" },
        { "data": "taluk_name" },
        "data": "trackingID",
        "render": function (data, type, row) {
            return '<a href ="#" style="cursor:default !important;text:decoration:none !important;" id="'+data+'"><span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Transfer</span></a>';
        { "data": "apb_count" },
        { "data": "apb_amount"},
        { "data": "ach_count"},
        { "data": "ach_amount"},
        { "data": "total_count"},
        { "data": "total_amount"},
        'bSortable': false,
        'aTargets': [0]
        var districtTalukArr = [];
         $('#transferBtn').hide();
         $('#transferPaymentProcess_action_status').hide();
          if (json.data && json.data.length > 0) {
          $('#transferBtn').show();
          json.data.forEach(summary => {
            districtTalukArr.push({
                "district": summary.distirict_code,
                "taluk": summary.taluk_code,
                "trackingID": summary.trackingID,
                "status": 0
          bulkTransferPaymentProcessSummary = districtTalukArr;
          bulkTransferPaymentProcessSummaryCount = districtTalukArr.length;
          $('#TransferPaymentProcessCloseBtn').hide();
          "footerCallback": function (row, data, start, end, display) {
            var api = this.api();
            if(data.length !=0 && data.length != undefined){
              <th id="footerColumn1"></th>
              <th id="footerColumn3">Total</th>
              <th id="footerColumn7"></th>
              <th id="footerColumn8"></th>
              <th id="footerColumn9"></th>
            $('#transferPaymentProcess_tfoot').html(total_table_row);
            $('#transferPaymentProcess_tfoot').show();
              $('#transferPaymentProcess_tfoot').hide();
            var columnsToSum = [4, 5, 6, 7, 8, 9];
            columnsToSum.forEach(function (columnIndex) {
                    $('#transferPaymentProcess_tfoot #footerColumn'+columnIndex).text(sum);
function downloadFileDuplicates(district_code,taluk_code,district_name,taluk_name){
  let filename = `${district_name}-${taluk_name}-Validation Summary-${yearmonth}`;
      url: APIURL + 'transferToPaymentProcessDownload',
      data: {fileters:dataFilters,district_code:district_code,taluk_code:taluk_code,user_id:loginUser_id},
        if(response.data!=null){
          exportJsonToExcel(response.data,filename);
$('#transferPaymentProcess_action_status').hide();
function TransferPaymentProcessInziated(){
  bulkTransferPaymentProcessSummary.forEach(items => {
      $('#'+items.trackingID).html(`<span class="badge bg-warning btn-sm cursor-auto"><i class="bi bi-check2-circle"></i> Yet to Transfer</span>`);
  if (bulkTransferPaymentProcessSummary.length > 0) {
      $('#transferBtn').prop('disabled',true);
      $('#transferBtn').hide();
      var  trackingIDArr = bulkTransferPaymentProcessSummary.filter(n => n.status == 0);
      var runningprocess = bulkTransferPaymentProcessSummary.filter(n => n.status == 1);
        processBatch(0,loopcounter,trackingIDArr);
          title: 'Summary is Empty ...!',
let failedTrackingIDs = [];
function processBatch(startIndex, loopcounter, trackingIDArr) {
  window.loginUser_id = userDataString['user_id'];
      $.each( bulkTransferPaymentProcessSummary, function( j, obj ) {
            if(obj.trackingID == trackingIDArr[i].trackingID){              
          $('#'+trackingIDArr[i].trackingID).focus();
          console.log(trackingIDArr[i].trackingID);
        url: APIURL+'transferPaymentProcessbulkapproveNew',
        data: {district:trackingIDArr[i].district, taluk:trackingIDArr[i].taluk, trackingID:trackingIDArr[i].trackingID, user_id:loginUser_id,fileters:dataFilters},
            $('#' + ouput.trackingid).html('<span class="badge bg-danger btn-sm">Failed !</span>');
            $.each(bulkTransferPaymentProcessSummary, function( j, obj ) {
          $('#' + trackingIDArr[i].trackingID).html('<span class="badge bg-danger btn-sm">Failed !</span>');
                if(obj.trackingID == trackingIDArr[i].trackingID){
          updatestatus(trackingIDArr[i].trackingID);
function updatestatus(trakingId)
{
          $('#' + trakingId).html('<span class="badge bg-success btn-sm"><i class="bi bi-check2-circle"></i>' + output.updated_count + ' Transferred</span>');
          $.each( bulkTransferPaymentProcessSummary, function( j, obj ) {
            if(obj.trackingID == trakingId){
          TransferPaymentProcessInziated();
          var failedTrackid = bulkTransferPaymentProcessSummary.filter(n => n.status == 3);
              $('#' + trakingId).html('<span class="badge bg-info btn-sm">' + output.updated_count + ' In-progress</span>');
              setTimeout(() => { updatestatus(trakingId);}, 3000);
            TransferPaymentProcessInziated();
        var successArr = bulkTransferPaymentProcessSummary.filter(n => n.status == 2);
        var failedArr = bulkTransferPaymentProcessSummary.filter(n => n.status == 3);
        if(bulkTransferPaymentProcessSummaryCount == successAndFailedCount){
            $('#transferPaymentProcess_action_status').show();
            $('#transferPaymentProcess_action_total').text(successAndFailedCount);
            $('#transferPaymentProcess_action_success').text(successArr.length);
            $('#transferPaymentProcess_action_failed').text(failedArr.length);
          $('#TransferPaymentProcessCloseBtn').show();
$('#TransferPaymentProcessCloseBtn').on('click',function(){
  tabClickValue(7);
  $('#transferBtn').show();
    const timestamp = new Date().getTime();
    return `${timestamp}`;
function exportJsonToExcel(jsonData, file_name) {
  var data = jsonData.map(obj => Object.values(obj));
  var ws = XLSX.utils.aoa_to_sheet([Object.keys(jsonData[0])].concat(data));
  var wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');
  var binaryData = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'binary' });
  var blob = new Blob([s2ab(binaryData)], { type: 'application/octet-stream' });
  saveAs(blob, file_name + '.xlsx');
function s2ab(s) {
  var buf = new ArrayBuffer(s.length);
  var view = new Uint8Array(buf);
  for (var i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;
  return buf;
function convertJsonToCsv(jsonData,filename) {
    let columns = Object.keys(jsonData[0]);
    let csvContent = [
        columns.join(','), 
        ...jsonData.map(obj => columns.map(col => obj[col]).join(',')) 
    ].join('\n');
    let blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    let link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.setAttribute('download', filename+'.csv');
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
let checkUploaderData = [];
function uploadDataList(dataFilters,approveStatus){
  $('#uploadDataList').DataTable().clear().destroy();
  $('#uploadDataList').DataTable({
              filename: selectedScheme+'-Prevalidation-Summary-'+yearmonth,
              filename: selectedScheme+'-Prevalidation-Summary-'+yearmonth 
      "searching": false,
          "url": APIURL + 'uploadData_list',
          $('#uploadDataList_tfoot').hide();
          tblPreloaderEnable('uploadDataList');
          { "data": "district_name" },
          { "data": "taluk_name" },
          { "data": "yyyymm" },
          { "data": "apb_count"},
          { "data": "apb_amount"},
          { "data": "ach_count"},
          { "data": "ach_amount"},
          { "data": "total_count"},
          { "data": "total_amount" },
      $('#preloader').hide(); 
      checkUploaderData = json.data;
                     let total_table_row =  `<tr>
                      <th id="footerColumn2"></th>
                      <th id="footerColumn4">Total</th>
                      </tr>`;
              $('#uploadDataList_tfoot').html(total_table_row);
            $('#uploadDataList_tfoot').show();
           $('#uploadDataList_tfoot').hide();
          var columnsToSum = [5,6,7,8,9,10];
                  $('#uploadDataList_tfoot #footerColumn' + columnIndex).text(sum);
function payment_emo_list(dataFilters,approveStatus){
  $('#tblPaymentEmoList').DataTable().clear().destroy();
  $('#tblPaymentEmoList').DataTable({
      "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
              $('#preloader').show(); 
          $('#preloader').hide(); 
          tableRecordCount = json.recordsTotal;
  }); 
$('#deduplicationBtn').hide();
$('#transFerToValidBtn').hide();
  window.localStorage.setItem('deDuplicatePopup',0);
function deduplicateValidate(){
  $('#deduplicationvalidationCloseBtn').hide();
  TransferPermissionBtnEnable();
    if(checkUploaderData!=null){
      $('#deduplicationBtn').hide();
      $('#transFerToValidBtn').hide();
      $('#transferToPaymetProcessBtn').hide();
      let deDuplicationPopupStatus =  window.localStorage.getItem('deDuplicatePopup');
          var userDataString = getCookie('payment_official');
          userDataString = JSON.parse(userDataString);
          window.loginUser_id = userDataString['user_id'];
          $('#function_1').html(`<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>`);
          $('#function_2').html(`<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>`);
          $('#function_3').html(`<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>`);
          $('#function_4').html(`<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>`);
          $('.deduplicationValidateFunctionsList').modal({backdrop: 'static',keyboard: false}).modal('show');
          var caseList = ['fn_validation_aadhaar','fn_validation_account','fn_validation_duplicatepayment','fn_validation_obsoletebeneficiaries'];
          let totalFunction = 4;
          let startFalseFunction = 0;
          let startTrueFunction = 0;
          caseList.length
          caseList.forEach(fnCase => {
            $.ajax({
              url: APIURL + 'checkDuplicationValues',
              method: 'POST',
              headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
              data: { case: fnCase,fileters: dataFilters, user_id:loginUser_id},
              dataType: 'json',
              success: function (response) {
                  let output = response.data;
                  if(response.success == 1){
                      if(output.result==false){
                      $('#'+output.activeId).html(`<h5 class="badge bg-success fs-custom-dummy">Success</h5>`);
                      startFalseFunction++;
                    }else{
                      $('#'+output.activeId).html(`<h5 class="badge bg-danger fs-custom-dummy">Failed</h5>`);
                      startTrueFunction++;
                    let runningFunctionTotalCount = startTrueFunction + startFalseFunction;
                      if(totalFunction == runningFunctionTotalCount){
                        $('#deduplicationBtn').show();
                        $('#transFerToValidBtn').show();
                        $('#deduplicationvalidationCloseBtn').show();
                    if(totalFunction == startFalseFunction){
                    $('#'+output.activeId).html(`<h5 class="badge bg-danger fs-custom-dummy">Error</h5>`);
                    Swal.fire({
                    title: response.message,
                    showConfirmButton: true,
                    timer: 20000
              error: function (xhr, status, error) {
                if(fnCase=='fn_validation_aadhaar'){
                  $('#function_1').html(`<h5 class="badge bg-danger fs-custom-dummy">Error : <small> ${error} <small> </h5>`);
                }else if(fnCase=='fn_validation_account'){
                  $('#function_2').html(`<h5 class="badge bg-danger fs-custom-dummy">Error : <small> ${error} <small> </h5>`);
                }else if(fnCase=='fn_validation_duplicatepayment'){
                  $('#function_3').html(`<h5 class="badge bg-danger fs-custom-dummy">Error : <small> ${error} <small> </h5>`);
                }else if(fnCase=='fn_validation_obsoletebeneficiaries'){
                  $('#function_4').html(`<h5 class="badge bg-danger fs-custom-dummy">Error : <small> ${error} <small> </h5>`);
                  console.log("Error:", error);
                  $('#deduplicationvalidationCloseBtn').show();
    }else{
          title: "No Data for Validation",
function transferToPending(){
  showTranferPaymentProcess()
function witchModalisActiveCheck(){
  $('.modal').each(function() {
    if ($(this).is(':visible')) {
function TransferPermissionBtnDisable(){
    $('#transferToPaymetProcessBtn').prop('disabled', false);
function TransferPermissionBtnEnable(){
    $('#transferToPaymetProcessBtn').prop('disabled', true);
function paymentListActiveTab(){
  const currentDateAndTime = new Date();
  if(getCurrentTabId == 0){
    let fileName ='Pending_paymment_'+currentDateAndTime;
    downloadPaymentList(dataFilters,1,tableRecordCount,fileName);
  }else if(getCurrentTabId == 1){
    let fileName ='Success_paymment_'+currentDateAndTime;
      downloadPaymentList(dataFilters,3,tableRecordCount,fileName);
  }else if(getCurrentTabId == 2){
    let fileName ='Failed_paymment_'+currentDateAndTime;
      downloadPaymentList(dataFilters,4,tableRecordCount,fileName);
  }else if(getCurrentTabId == 3){
    let fileName ='Inprogress_paymment_'+currentDateAndTime;
      downloadPaymentList(dataFilters,2,tableRecordCount,fileName);
  else if(getCurrentTabId == 4){
    let fileName ='Generate_payment_'+currentDateAndTime;
      downloadPaymentList(dataFilters,5,tableRecordCount,fileName);
  else if(getCurrentTabId == 5){
    let fileName ='transfer_payment_to_bank_'+currentDateAndTime;
      downloadPaymentList(dataFilters,6,dataFilters);
function downloadPaymentList(dataFilters,approvalStatus,tableRecordCount,filename){
  if(dataFilters!='' || dataFilters!=null || dataFilters!= undefined){
    console.log('error function downloadPaymentList');
function _fnGetHeaders() {
    var dt = $('#uploadDataList').DataTable();
    var thRows = $('#uploadDataList thead tr');
    var numRows = thRows.length;
    var matrix = [];
    for (var rowIdx = 0; rowIdx < numRows; rowIdx++) {
        var $row = $(thRows[rowIdx]);
        var $ths = $row.find("th");
        var aRow = [];
        for (var colIdx = 0; colIdx < $ths.length; colIdx++) {
            var $th = $($ths.get(colIdx));
            aRow.push($th.text().trim());
        matrix.push(aRow);
    return matrix;
function htmlDecode(input) {
    var doc = new DOMParser().parseFromString(input, "text/html");
    return doc.documentElement.textContent;
function getYearMonth(dateStr) {
    var dateObj = new Date(dateStr);
    var year = dateObj.getFullYear();
    var month = dateObj.getMonth() + 1;
    var monthStr = month < 10 ? '0' + month : month.toString();
    return { year: year, month: monthStr };
function processDates(fromDateStr, toDateStr) {
    var fromDate = getYearMonth(fromDateStr);
    var toDate = getYearMonth(toDateStr);
    return {
        from: fromDate,
        to: toDate
function get_schemebyuser(userid){
let ddl_scheme_cate = $('#ddl_scheme_cate').val();
let ddl_scheme_code = $('#ddl_scheme_code').val();
let ddl_scheme_name = $('#ddl_scheme_name').val();
let ddl_sub_scheme = $('#ddl_sub_scheme').val();
let ddl_department = $('#ddl_department').val();
let ddl_sub_department = $('#ddl_sub_department').val();
$('#ddl_payment_period').empty();
  $('#ddl_payment_cycle').text('');
  $('#payment_cycle_hidden').val('');
    url: APIURL +'get_scheme_by_user',
    data: {user_id:userid,ddl_scheme_cate:ddl_scheme_cate,ddl_scheme_code:ddl_scheme_code,ddl_scheme_name:ddl_scheme_name,ddl_sub_scheme:ddl_sub_scheme,ddl_department:ddl_department,ddl_sub_department:ddl_sub_department},
        if(response.success == 1){
      $('#ddl_payment_cycle').text(output.payment_cycle_text);
      $('#payment_cycle_hidden').val(output.payment_cycle);
      bindDropDownList(output.payment_cycle_text,'#ddl_payment_period');
        console.log("Error:", response);
function bindDropDownList(type,element){
var userDataString = getCookie('payment_official');
userDataString = JSON.parse(userDataString);
window.loginUser_id = userDataString['user_id'];
        value: "",
        text: "Select Year - Month"
    }).attr('disabled','true').attr('selected', 'selected'));
    $('#ddl_payment_installment').append($('<option>', {
        text: "Select Installment"
    if (typeof type === 'object') {
      type = type[0];
    url: APIURL +'fn_general_getdropdownvalues',
    headers: {'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
    data: {user_id: loginUser_id,dropdown_type:type},
        var dropdownList = response.data;
        if(response.success ==1){
          $(element).show();
          $(element+'_col').show();
        $(element).empty();
        $(element).append($('<option>', {
              text: "Select "+type
        $.each(dropdownList, function (index, dep) {
          $(element).append($('<option>', {
              value: dep.id,
              text: dep.display_text
        if(element!=null && element!=''&&element!=undefined){
          $(element).hide();
          $(element+'_col').hide();
        if(type=='Monthly' || type=='Yearly'){
          get_instalment_filter();
$('#ddl_payment_period').on('change',function(){
  get_instalment_filter();
function get_instalment_filter(){
$('#ddl_payment_installment').empty();
$('#ddl_year').empty();
$('#ddl_year').append($('<option>', {
    value: "",
    text: "Select Year - Month"
}).attr('disabled','true').attr('selected', 'selected'));
let ddl_payment_period = $('#ddl_payment_period').val();
let ddl_payment_cycle = $('#payment_cycle_hidden').val();
if(ddl_payment_period=='' || ddl_payment_period==null||ddl_payment_period==undefined){
  ddl_payment_period = -1;
   url: APIURL +'get_installment_filter',
   data: {user_id:loginUser_id,ddl_scheme_cate:ddl_scheme_cate,ddl_scheme_code:ddl_scheme_code,ddl_scheme_name:ddl_scheme_name,ddl_sub_scheme:ddl_sub_scheme,ddl_department:ddl_department,ddl_sub_department:ddl_sub_department,paymentcycle:ddl_payment_cycle,paymentperiod:ddl_payment_period},
       if(response.success == 1){
        var output = response.data;
            let installment = fetchDropdownValues('Installment');
            installment.then(function(arrayValue) {
            let grounList = [];
            output.forEach(element => {
              grounList.push(element.installments);
            let instamentList = arrayValue.filter(item => grounList.includes(item.id));
            if(instamentList.length==1){
                  instamentList.forEach(list => {                 
                  $('#ddl_payment_installment').append($('<option>', {
                    value: list.value,
                    text: list.display_text
                  }).attr('selected','selected'));
                  $('#ddl_payment_installment').change();
                  $('#ddl_payment_installment').append($('<option>', { value: "",text: "Select Installment"}));
                    instamentList.forEach(list => {                 
                    $('#ddl_payment_installment').append($('<option>', {
                      value: list.value,
                      text: list.display_text
                    }));
       }else{
       }
$('#ddl_payment_installment').on('change',function(){
  let instalmment_value = $('#ddl_payment_installment').val();
  if(instalmment_value!='' || instalmment_value!=null){
      let installment_txt_value = $('#ddl_payment_installment option:selected').text();
      $('#installment_txt_value').val(installment_txt_value);
      let installment_txt_value = '';
  $('#ddl_year').selectpicker('destroy');
  $('#ddl_year').empty();
let ddl_payment_installment = $('#ddl_payment_installment').val();
 url: APIURL +'get_year_filter',
 type: "POST",
 headers: { 'X-APP-KEY': config.app_key, 'X-APP-NAME': config.app_name },
 data: {user_id:loginUser_id,ddl_scheme_cate:ddl_scheme_cate,ddl_scheme_code:ddl_scheme_code,ddl_scheme_name:ddl_scheme_name,ddl_sub_scheme:ddl_sub_scheme,ddl_department:ddl_department,ddl_sub_department:ddl_sub_department,paymentcycle:ddl_payment_cycle,paymentperiod:ddl_payment_period,iinstallment:ddl_payment_installment},
 success: function(response) {
     if(response.success == 1){
      var output = response.data;
      $.each(output, function (index, list) {
            $('#ddl_year').append($('<option>', {
              value: list.yyyymm,
              text: list.yyyymm_text
      $('#ddl_year').selectpicker();
     }else{
      console.log("Error:", response);
 },
 error: function(xhr, status, error) {
     console.log("Error:", error);
$('#ddl_year').selectpicker();
async function dropDownList(type) {
  try {
      var userDataString = getCookie('payment_official');
      userDataString = JSON.parse(userDataString);
      window.loginUser_id = userDataString['user_id'];
      const response = await $.ajax({
          url: APIURL + 'fn_general_getdropdownvalues',
          type: "POST",
          data: { user_id: loginUser_id, dropdown_type: type }
      return response.data;
  } catch (error) {
      console.error("Error:", error);
      throw error;
async function fetchDropdownValues(type) {
try {
    let getDropDown = await dropDownList(type);
    return getDropDown;
} catch (error) {
    console.error('Error occurred:', error);
  let selectReasonCode = $(this).val();
  $('#select_reason_code').val(selectReasonCode);
  $('#emo_reason_code').val(selectReasonCode);
$('#transferPaymentProcessCloseOne, #pendingBulkApproveClose, #emoBlulkapproveSummaryCloseTop, #reinitiateBlulkapproveSummaryCloseTop').click(function(){
  var tabId = $('#approvelpayment').val();
  if(tabId=='') {
    tabId = 7;
  tabClickValue(tabId);
  $('#paymentDate').val('');
  $('#reinitiatePaymentDate').val('');
localStorage.clear();
</script>
</body>
</html>